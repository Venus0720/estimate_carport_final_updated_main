"use strict";function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj;};}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}return _typeof(obj);}Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=exports.CkBngDr=exports.setUpWatermarkLogo=exports.dawplace=exports.updateEntryData=exports.uUdDp=exports.uUdDCB=exports.uBmLDimension=exports.leanuUdD=exports.uUdD=exports.CheckLegsByResponse=exports.makeInsulationArrayForLeanto=exports.makeExtraElements=exports.makeInstallationBackground=exports.upperCaseAllFirst=exports.upperCaseFirst=exports.addComponent=exports.rEaEfW=exports.loadDefaultBuilding=exports.converImageIntoBase64=exports.EditloadDefaultBuilding=exports.makeCertificateArray=exports.makeCertificateArrayLeft=exports.updatePriceCalculation=exports.SetPriceforComponent=exports.removeDataFromArrayCompare=exports.removeDataFromArray=exports.cPforRLeanOnly=exports.cPforLLeanOnly=exports.cPforBLeanOnly=exports.cPforFLeanOnly=exports.filtterArrayElements=exports.cP=exports.setComparePricingData=exports.CheckLegsByResponseForCompare=exports.cPforLLeanOnlyComparision=exports.cPforBLeanOnlyComparision=exports.cPforFLeanOnlyComparision=exports.cPforRLeanOnlyComparision=exports.ConvStr=exports.F=exports.rP=exports.BuildingUpdate=void 0;var THREE=_interopRequireWildcard(require("three"));var _axios=_interopRequireDefault(require("axios"));var _reducer=require("./reducer");var cuComponent=_interopRequireWildcard(require("./componentReducer"));var ColorHelper=_interopRequireWildcard(require("../../_helper/colors"));var CenterBuildingRoofPitch=_interopRequireWildcard(require("../../_helper/_CenterBuilding/Update_CB_Roof"));var CenterBuildingWalls=_interopRequireWildcard(require("../../_helper/_CenterBuilding/Update_CB_Walls"));var CenterBuildingLegs=_interopRequireWildcard(require("../../_helper/_CenterBuilding/Update_CB_Legs"));var CenterBuildingArrows=_interopRequireWildcard(require("../../_helper/UpdateArrow&Dimension"));var LeanToArrows=_interopRequireWildcard(require("../../_helper/UpdateLeanArrow&Dim"));var LeanToPorchLegs=_interopRequireWildcard(require("../../_helper/Porches/UpdateLeanPorchLegs"));var LeanToPorchRoof=_interopRequireWildcard(require("../../_helper/Porches/UpdateLeanPorchRoof"));var LeanToPorchWalls=_interopRequireWildcard(require("../../_helper/Porches/UpdateLeanPorchWalls"));var LeftLeanToLegs=_interopRequireWildcard(require("../../_helper/Left Lean-To/UpdateLeftLeanLegs"));var LeftLeanToRoof=_interopRequireWildcard(require("../../_helper/Left Lean-To/UpdateLeftLeanRoof"));var LeftLeanToWalls=_interopRequireWildcard(require("../../_helper/Left Lean-To/UpdateLeftLeanWalls"));var RightLeanToLegs=_interopRequireWildcard(require("../../_helper/Right Lean-To/UpdateRightLeanLegs"));var RightLeanToRoof=_interopRequireWildcard(require("../../_helper/Right Lean-To/UpdateRightLeanRoof"));var RightLeanToWalls=_interopRequireWildcard(require("../../_helper/Right Lean-To/UpdateRightLeanWalls"));var FrontLeanToLegs=_interopRequireWildcard(require("../../_helper/FrontLeanTo/UpdateFrontLeanLegs"));var FrontLeanToRoof=_interopRequireWildcard(require("../../_helper/FrontLeanTo/UpdateFrontLeanRoof"));var FrontLeanToWalls=_interopRequireWildcard(require("../../_helper/FrontLeanTo/UpdateFrontLeanWalls"));var BackLeanToLegs=_interopRequireWildcard(require("../../_helper/BackLeanTo/UpdateBackLeanLegs"));var BackLeanToRoof=_interopRequireWildcard(require("../../_helper/BackLeanTo/UpdateBackLeanRoof"));var BackLeanToWalls=_interopRequireWildcard(require("../../_helper/BackLeanTo/UpdateBackLeanWalls"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}function _getRequireWildcardCache(){if(typeof WeakMap!=="function")return null;var cache=new WeakMap();_getRequireWildcardCache=function _getRequireWildcardCache(){return cache;};return cache;}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj;}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{"default":obj};}var cache=_getRequireWildcardCache();if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj);}return newObj;}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}var BuildingUpdate=function BuildingUpdate(Val,newFlag){// setTimeout( () => {const_var.scene.getObjectByName("C_B_Walls").visible = true;},1000)
CenterBuildingLegs.updateCenterBuildingLegs();CenterBuildingRoofPitch.updateCenterBuildingRoofPitch();CenterBuildingWalls.updateCenterBuildingWalls();LeanToPorchLegs.updateLeanToPorchLegs();LeanToPorchWalls.updateLeanToPorchWalls();LeanToPorchRoof.updateLeanToPorchRoofPitch();ColorHelper.colors();//  CenterBuildingArrows.updateCenterBuildingArrows();
//  if(params.callMesure == true)
//  {
//      CenterBuildingArrows.updateCenterBuildingArrows();
//  }
/*Left Lean To*/if(_reducer.params.add_left_lean){LeftLeanToLegs.updateLeftLeanToLegs(_reducer.params.add_left_lean);LeftLeanToWalls.updateLeftLeanToWalls();LeftLeanToRoof.updateLeftLeanToRoofPitch();ColorHelper.colors();//  LeanToArrows.updateLeantosArrowAndDimensions();
}else{LeftLeanToLegs.updateLeftLeanToLegs(_reducer.params.add_left_lean==true);LeftLeanToWalls.updateLeftLeanToWalls(_reducer.params.add_left_lean==true);LeftLeanToRoof.updateLeftLeanToRoofPitch(_reducer.params.add_left_lean==true);LeanToArrows.updateLeantosArrowAndDimensions(_reducer.params.add_left_lean==true);}/*Right Lean-To*/if(_reducer.params.add_right_lean){RightLeanToLegs.updateRightLeanToLegs(_reducer.params.add_right_lean);RightLeanToWalls.updateRightLeanToWalls();RightLeanToRoof.updateRightLeanToRoofPitch();// LeanToArrows.updateLeantosArrowAndDimensions();
ColorHelper.colors();}else{RightLeanToLegs.updateRightLeanToLegs(_reducer.params.add_right_lean==true);RightLeanToWalls.updateRightLeanToWalls(_reducer.params.add_right_lean==true);RightLeanToRoof.updateRightLeanToRoofPitch(_reducer.params.add_right_lean==true);LeanToArrows.updateLeantosArrowAndDimensions(_reducer.params.add_right_lean==true);}/*Front Lean-To*/if(_reducer.params.add_front_lean){FrontLeanToLegs.updateFrontLeanToLegs(_reducer.params.add_front_lean);FrontLeanToWalls.updateFrontLeanToWalls();FrontLeanToRoof.updateFrontLeanToRoofPitch();// LeanToArrows.updateLeantosArrowAndDimensions();
ColorHelper.colors();}else{FrontLeanToLegs.updateFrontLeanToLegs(_reducer.params.add_front_lean==true);FrontLeanToWalls.updateFrontLeanToWalls(_reducer.params.add_front_lean==true);FrontLeanToRoof.updateFrontLeanToRoofPitch(_reducer.params.add_front_lean==true);LeanToArrows.updateLeantosArrowAndDimensions(_reducer.params.add_front_lean==true);}/*Back Lean-To*/if(_reducer.params.add_back_lean){BackLeanToLegs.updateBackLeanToLegs(_reducer.params.add_back_lean);BackLeanToWalls.updateBackLeanToWalls();BackLeanToRoof.updateBackLeanToRoofPitch();// LeanToArrows.updateLeantosArrowAndDimensions();
ColorHelper.colors();}else{BackLeanToLegs.updateBackLeanToLegs(_reducer.params.add_back_lean==true);BackLeanToWalls.updateBackLeanToWalls(_reducer.params.add_back_lean==true);BackLeanToRoof.updateBackLeanToRoofPitch(_reducer.params.add_back_lean==true);LeanToArrows.updateLeantosArrowAndDimensions(_reducer.params.add_back_lean==true);}_reducer.const_var.controls.maxDistance=_reducer.params.p_d<=150?_reducer.params.add_front_lean==true||_reducer.params.add_left_lean==true||_reducer.params.add_right_lean==true||_reducer.params.add_back_lean==true?90:_reducer.params.p_d/2+_reducer.params.p_w/2+40:240;if(_reducer.params.add_left_lean==true&&_reducer.params.p_l_w!="Close"){var pitchCalulation=_reducer.params.lean_p_w*_reducer.params.b_l_t_r_p/12;var calData=_reducer.params.lean_p_w*_reducer.params.b_l_t_r_p/12;finalHeight=_reducer.params.p_h-(calData+_reducer.params.lean_p_h);var calVal=Math.ceil(finalHeight/3);var oneFourthValue=_reducer.params.p_h/4;if(oneFourthValue<finalHeight||2*oneFourthValue<finalHeight||3*oneFourthValue<finalHeight){_reducer.params.p_l_w=_reducer.params.p_l_w>calVal?_reducer.params.p_l_w:calVal;}if(calVal!=0&&_reducer.params.p_l_w!=="Half_Close"&&_reducer.params.p_l_w!=="One_Fourth_Close"&&_reducer.params.p_l_w!=="Three_Fourth_Close"){if(_reducer.params.p_h==calData+_reducer.params.lean_p_h){_reducer.params.p_l_w="Open";}else{if(_reducer.const_var.a_p_d_a.length>0&&_reducer.const_var.a_p_d_a.panel.length==0){_reducer.params.p_l_w="Close";}else{_reducer.params.p_l_w=_reducer.params.p_l_w>calVal?_reducer.params.p_l_w:calVal;}}}else{if(_reducer.params.p_l_w=="Half_Close"||_reducer.params.p_l_w=="One_Fourth_Close"||_reducer.params.p_l_w=="Three_Fourth_Close"){_reducer.params.p_l_w=_reducer.params.a_c_p_l==true?_reducer.params.p_l_w:_reducer.params.p_l_w;}else{_reducer.params.p_l_w=_reducer.params.a_c_p_l==true?_reducer.params.p_l_w:"Open";}}}if(_reducer.params.add_right_lean==true&&_reducer.params.p_r_w!="Close"){var pitchCalulation=_reducer.params.leanR_p_w*_reducer.params.b_l_t_r_pR/12;var calData=_reducer.params.leanR_p_w*_reducer.params.b_l_t_r_pR/12;var finalHeight=_reducer.params.p_h-(calData+_reducer.params.leanR_p_h);var calVal=Math.ceil(finalHeight/3);var oneFourthValue=_reducer.params.p_h/4;if(oneFourthValue<finalHeight||2*oneFourthValue<finalHeight||3*oneFourthValue<finalHeight){_reducer.params.p_r_w=_reducer.params.p_r_w>calVal?_reducer.params.p_r_w:calVal;}if(calVal!=0&&_reducer.params.p_r_w!=="Half_Close"&&_reducer.params.p_r_w!=="One_Fourth_Close"&&_reducer.params.p_r_w!=="Three_Fourth_Close"){if(_reducer.params.p_h==calData+_reducer.params.leanR_p_h){_reducer.params.p_r_w="Open";}else{if(_reducer.const_var.a_p_d_a.length>0&&_reducer.const_var.a_p_d_a.panel.length==0){_reducer.params.p_r_w="Close";}else{_reducer.params.p_r_w=_reducer.params.p_r_w>calVal?_reducer.params.p_r_w:calVal;}}}else{if(_reducer.params.p_r_w=="Half_Close"||_reducer.params.p_r_w=="One_Fourth_Close"||_reducer.params.p_r_w=="Three_Fourth_Close"){_reducer.params.p_r_w=_reducer.params.a_c_p_r==true?_reducer.params.p_r_w:_reducer.params.p_r_w;}else{_reducer.params.p_r_w=_reducer.params.a_c_p_r==true?_reducer.params.p_r_w:"Open";}}}var rHight=_reducer.params.p_h-(_reducer.params.leanF_p_h+parseInt(_reducer.params.b_l_t_r_pF)/12*_reducer.params.leanF_p_w);if(_reducer.params.add_front_lean==true){if(rHight<3){_reducer.params.p_f_wF="Gable";}else if(rHight>=3&&rHight<=3.5){_reducer.params.p_f_wF="Extended Gable";}else if(rHight>3.5&&rHight<=_reducer.params.p_h/4){_reducer.params.p_f_wF="One_Fourth_Close";}else if(rHight>_reducer.params.p_h/4&&rHight<=_reducer.params.p_h/2){_reducer.params.p_f_wF="Half_Close";}else{_reducer.params.p_f_wF="Closed";}}else{_reducer.params.p_f_wF="Open";}// console.log(rHight,params.p_f_wF,"params.p_f_wF",params.add_front_lean);
_reducer.const_var.showInsulation=_reducer.const_var.a_p_d_a.insulation&&_reducer.const_var.a_p_d_a.insulation.length>0?true:false;if(_reducer.params.p_f_w=="Close"||_reducer.params.p_b_w=="Close"||_reducer.params.p_l_w=="Close"||_reducer.params.p_r_w=="Close"||_reducer.params.p_b_c_b_l_f=="Close"||_reducer.params.p_b_c_b_l=="Close"||_reducer.params.p_b_c_b_r_f=="Close"||_reducer.params.p_b_c_b_r=="Close"||_reducer.params.p_b_c_b_f_f=="Close"||_reducer.params.p_b_c_b_f_b=="Close"||_reducer.params.p_b_c_b_f_l=="Close"||_reducer.params.p_b_c_b_b_f=="Close"||_reducer.params.p_b_c_b_b_b=="Close"||_reducer.params.p_b_c_b_b_l=="Close"||_reducer.params.add_storage_check==true||_reducer.params.add_storage_check_right==true||_reducer.params.add_storage_check_front==true||_reducer.params.add_storage_check_back==true||_reducer.params.p_u_c==true){_reducer.const_var.showWainscotJSX=true;}else{_reducer.const_var.showWainscotJSX=false;}if(_reducer.params.p_f_w!="Open"||_reducer.params.p_b_w!="Open"||_reducer.params.p_l_w!="Open"||_reducer.params.p_r_w!="Open"||_reducer.params.p_b_c_b_l_f!="Open"||_reducer.params.p_b_c_b_l!="Open"||_reducer.params.p_b_c_b_r_f!="Open"||_reducer.params.p_b_c_b_r!="Open"||_reducer.params.p_b_c_b_f_f!="Open"||_reducer.params.p_b_c_b_f_b!="Open"||_reducer.params.p_b_c_b_f_l!="Open"||_reducer.params.p_b_c_b_b_f!="Open"||_reducer.params.p_b_c_b_b_b!="Open"||_reducer.params.p_b_c_b_b_l!="Open"||_reducer.params.p_u_c==true||_reducer.params.add_storage_check==true||_reducer.params.add_storage_check_right==true||_reducer.params.add_storage_check_front==true||_reducer.params.add_storage_check_back==true||_reducer.params.p_c_p_l==true||_reducer.params.p_c_p_r==true){_reducer.const_var.showWallColorJSX=true;}else{_reducer.const_var.showWallColorJSX=false;}//   },1100)
};exports.BuildingUpdate=BuildingUpdate;var pricingReducer=function pricingReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:_reducer.initialState;var action=arguments.length>1?arguments[1]:undefined;var newState=_objectSpread({},state);return newState;};var rP=function rP(){};exports.rP=rP;var F=function F(){_reducer.const_var.scene.getObjectByName("foundation").visible=false;var a=_reducer.const_var.scene.getObjectByName("foundation");var b=0;var c=0;var LeanWdth=0;var LeanLegth=0;if(_reducer.params.add_left_lean==true){LeanWdth=LeanWdth>_reducer.params.lean_p_w?LeanWdth:_reducer.params.lean_p_w;LeanLegth=LeanLegth>_reducer.params.lean_p_d?LeanLegth:_reducer.params.lean_p_d;}if(_reducer.params.add_right_lean==true){LeanWdth=LeanWdth>_reducer.params.leanR_p_w?LeanWdth:_reducer.params.leanR_p_w;LeanLegth=LeanLegth>_reducer.params.leanR_p_d?LeanLegth:_reducer.params.leanR_p_d;}a.scale.x=_reducer.params.add_left_lean==true||_reducer.params.add_right_lean==true?_reducer.params.p_w+LeanWdth*2+b+c+8/12:_reducer.params.p_w+b+c+8/12;a.scale.z=LeanLegth>_reducer.params.p_d?LeanLegth+8/12:_reducer.params.p_d+8/12;a.position.x=(c-b)/2;a.material.map.repeat.set((_reducer.params.p_w+8/12)/10,(_reducer.params.p_d+8/12)/10);a.material.map.offset.x=(_reducer.params.p_w+8/12)/-20+.5;a.material.map.offset.y=(_reducer.params.p_d+8/12)/-20+.5;};exports.F=F;var ConvStr=function ConvStr(str){return typeof str==="string"?str.toLowerCase():str;};exports.ConvStr=ConvStr;function CheckString(mapVal,str){return mapVal.indexOf(str);}/* Function for FindStringByName */function FindStringByName(arr,str){for(var i=0;i<=arr.length-1;i++){if(arr[i].name.includes(str)){return i;}}return"false";}var cPforRLeanOnlyComparision=function cPforRLeanOnlyComparision(data,iiD){var t_c_b=0;var b={};var newParams=_reducer.const_var.ComparisionDataArray[iiD].paramsData;if(newParams.add_right_lean==true){removeDataFromArrayCompare(2);var leftLeanData="";b={"leanto_type":2,"width":newParams.leanR_p_w,"height":newParams.leanR_p_h,'length':newParams.leanR_p_d,"leanto_drop":"","front_wall":ConvStr(newParams.p_b_c_b_r_f),"back_wall":ConvStr(newParams.p_b_c_b_r_b),"side_wall":ConvStr(newParams.p_b_c_b_r),"front_wall_price":0,"back_wall_price":0,"side_wall_price":0,"front_wall_vertical":newParams.p_v_w,"back_wall_vertical":newParams.p_v_w,"side_wall_vertical":newParams.p_v_w,"certificate":_reducer.const_var.makeCertificateArrayLeft[newParams.leanR_p_e_i]};//a.concat(b);
var data=data;var mapVal=_reducer.const_var.map[newParams.p_r_s];var CalCulateRoofBasePrice=0;var CalCulateRoofEndClosePrice=0;var CalCulateRoofEndGablePrice=0;var CalCulateRoofUtilityEndPrice=0;_reducer.const_var.main_extraItems_arr_Rlean_Compare=[];if(data.certificate!=undefined&&data.certificate.length>0){newParams.leanR_p_e_i="Select";for(var i=0;i<=data.certificate.length-1;i++){if(_reducer.params.p_e_l==true){if(data.certificate[i].has_other_leg==1){_reducer.const_var.main_extraItems_arr_Rlean_Compare[data.certificate[i].certificate_id]=data.certificate[i];if(data.certificate[i].is_default=="yes"&&(data.certificate[i].gauge==0||newParams.gauge_val==data.certificate[i].gauge)){newParams.leanR_p_e_i=newParams.leanR_p_e_i=="Select"?data.certificate[i].certificate_id:newParams.leanR_p_e_i;}}}else{if(data.certificate[i].has_other_leg==0){_reducer.const_var.main_extraItems_arr_Rlean_Compare[data.certificate[i].certificate_id]=data.certificate[i];if(data.certificate[i].is_default=="yes"&&(data.certificate[i].gauge==0||_reducer.params.gauge_val==data.certificate[i].gauge)){newParams.leanR_p_e_i=newParams.leanR_p_e_i=="Select"?data.certificate[i].certificate_id:newParams.leanR_p_e_i;}}}}}_reducer.const_var.insulationArrayForLeantoRightCompare=[];if(data!=""){for(var i=0;i<=data.insulation.length-1;i++){_reducer.const_var.insulationArrayForLeantoRightCompare[data.insulation[i].insulation_id]=data.insulation[i];}}b.certificate=_reducer.const_var.main_extraItems_arr_Rlean_Compare.filter(function(data){return data.gauge==0||newParams.gauge_val==data.gauge;})[0];if(newParams.leanR_p_e_i=="Select"){newParams.leanR_p_e_i=b.certificate.certificate_id;}if(newParams.add_storage_check_right==true){data.side=data.side;data.panel=data.panel;}else{data.side=data.full_length_side!=undefined?data.full_length_side:data.side;data.panel=data.full_length_panel!=undefined?data.full_length_panel:data.panel;}for(var i=0;i<data.base.length;i++){if(_reducer.const_var.g_v==data.base[i].gauge){b.basic_price=data.base[i][mapVal];t_c_b=parseFloat(t_c_b)+parseFloat(b.basic_price);CalCulateRoofBasePrice=b.basic_price;}}var heightFullData=data.full_length_side!=undefined&&data.full_length_side.length>0?data.full_length_side:undefined;if(_reducer.const_var.g_v==14){if(heightFullData[0].double_leg_baserail_cost!=0&&newParams.p_e_l==true){b.height_price=heightFullData[0].double_leg_baserail_cost!=0?heightFullData[0].double_leg_baserail_cost:heightFullData[0].leg_height_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}else{b.height_price=heightFullData[0].leg_height_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}}if(_reducer.const_var.g_v==12){if(newParams.p_e_l==true){b.height_price=heightFullData[0].double_leg_baserail_cost_12!=0?heightFullData[0].double_leg_baserail_cost_12:heightFullData[0].leg_height_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}else{b.height_price=heightFullData[0].leg_height_cost_12!=0?heightFullData[0].leg_height_cost_12:heightFullData[0].leg_height_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}}// b.height_price = (UpdatePriceRecord==true && const_var.UpdatedPriceData.left_lean_height_price_changed!=true)?leftLeanData.height_price:(data.full_length_side!=undefined && data.full_length_side.length>0)?data.full_length_side[0].leg_height_cost:0;
// t_c_b = parseFloat(t_c_b) + parseFloat(b.height_price); 
if(newParams.p_b_c_b_r_f=="Gable"){var ShowPrice="";if(newParams.p_v_w==true){//t_c_b = t_c_b + (data.gable_end[0].vertical);
if(newParams.leanR_p_e_i!=""&&newParams.leanR_p_e_i!="other"&&newParams.leanR_p_e_i!="0"&&_reducer.const_var.main_extraItems_arr_Rlean_Compare[newParams.leanR_p_e_i].certified==1){//t_c_b = ((data.gable_end[0].certified)==0)?parseFloat(t_c_b)+ (parseFloat(data.gable_end[0].uncertified) + parseFloat(data.gable_end[0].vertical)):(parseFloat(data.gable_end[0].vertical_certified)+parseFloat(data.gable_end[0].certified)) + parseFloat(t_c_b);
ShowPrice=data.gable_end[0].vertical_certified+data.gable_end[0].certified;}else{//t_c_b = parseFloat(t_c_b)+ (parseFloat(data.gable_end[0].uncertified) + parseFloat(data.gable_end[0].vertical));
ShowPrice=data.gable_end[0].uncertified+data.gable_end[0].vertical;}}else{if(newParams.leanR_p_e_i!=""&&newParams.leanR_p_e_i!="other"&&newParams.leanR_p_e_i!="0"&&_reducer.const_var.main_extraItems_arr_Rlean_Compare[newParams.leanR_p_e_i].certified==1){//t_c_b = ((data.gable_end[0].certified)==0)?parseFloat(t_c_b)+ parseFloat((data.gable_end[0].uncertified)):parseFloat((data.gable_end[0].certified)) + parseFloat(t_c_b);
ShowPrice=data.gable_end[0].certified;}else{//t_c_b = parseFloat(t_c_b)+ parseFloat((data.gable_end[0].uncertified));
ShowPrice=data.gable_end[0].uncertified;}}b.front_wall_price=ShowPrice;//(newParams.p_v_w==true)?(data.gable_end[0].vertical):(data.gable_end[0].uncertified);
t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);CalCulateRoofEndGablePrice=b.front_wall_price;//b.back_wall_price = ShowPrice;//(newParams.p_v_w==true)?(data.gable_end[0].vertical):(data.gable_end[0].uncertified);
}if(newParams.p_b_c_b_r_b=="Gable"&&newParams.add_storage_check_right!=true){var ShowPrice="";if(newParams.p_v_w==true){//t_c_b = t_c_b + (data.gable_end[0].vertical);
if(newParams.leanR_p_e_i!=""&&newParams.leanR_p_e_i!="other"&&newParams.leanR_p_e_i!="0"&&_reducer.const_var.main_extraItems_arr_Rlean_Compare[newParams.leanR_p_e_i].certified==1){//t_c_b = ((data.gable_end[0].certified)==0)?parseFloat(t_c_b)+ (parseFloat(data.gable_end[0].uncertified) + parseFloat(data.gable_end[0].vertical)) :(parseFloat(data.gable_end[0].vertical_certified)+parseFloat(data.gable_end[0].certified)) + parseFloat(t_c_b);
ShowPrice=data.gable_end[0].vertical_certified+data.gable_end[0].certified;}else{//t_c_b = parseFloat(t_c_b)+ (parseFloat(data.gable_end[0].uncertified) + parseFloat(data.gable_end[0].vertical));
ShowPrice=data.gable_end[0].uncertified+data.gable_end[0].vertical;}}else{if(newParams.leanR_p_e_i!=""&&newParams.leanR_p_e_i!="other"&&newParams.leanR_p_e_i!="0"&&_reducer.const_var.main_extraItems_arr_Rlean_Compare[newParams.leanR_p_e_i].certified==1){//t_c_b = ((data.gable_end[0].certified)==0)?parseFloat(t_c_b)+ parseFloat((data.gable_end[0].uncertified)):parseFloat((data.gable_end[0].certified)) + parseFloat(t_c_b);
ShowPrice=data.gable_end[0].certified;}else{//t_c_b = parseFloat(t_c_b)+ parseFloat((data.gable_end[0].uncertified));
ShowPrice=data.gable_end[0].uncertified;}}//b.front_wall_price = ShowPrice;//(newParams.p_v_w==true)?(data.gable_end[0].vertical):(data.gable_end[0].uncertified);
b.back_wall_price=ShowPrice;//(newParams.p_v_w==true)?(data.gable_end[0].vertical):(data.gable_end[0].uncertified);
t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);CalCulateRoofEndGablePrice=CalCulateRoofEndGablePrice+b.back_wall_price;}if(newParams.p_b_c_b_r_f=="Half_Close"){b.front_wall_price=newParams.p_v_w==true?(data.end[0].half_vertical_ends_cost+data.end[0].half_end_close_cost).toFixed(2):data.end[0].half_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);}if(newParams.p_b_c_b_r_f=="One_Fourth_Close"){b.front_wall_price=newParams.p_v_w==true?(data.end[0].one_fourth_vertical_ends_cost+data.end[0].one_fourth_end_close_cost).toFixed(2):data.end[0].one_fourth_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);}if(newParams.p_b_c_b_r_f=="Three_Fourth_Close"){b.front_wall_price=newParams.p_v_w==true?(data.end[0].three_fourth_vertical_ends_cost+data.end[0].three_fourth_end_close_cost).toFixed(2):data.end[0].three_fourth_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);}if(newParams.p_b_c_b_r_f=="Close"){b.front_wall_price=newParams.p_v_w==true?data.end[0].vertical_ends_cost+data.end[0].end_close_cost:data.end[0].end_close_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);CalCulateRoofEndClosePrice=b.front_wall_price;//b.back_wall_price  = (newParams.p_v_w==true )?((data.end[0].vertical_ends_cost)) + (data.end[0].end_close_cost):(data.end[0].end_close_cost);
}if(newParams.p_b_c_b_r_b=="Half_Close"){b.back_wall_price=newParams.p_v_w==true?(data.end[0].half_vertical_ends_cost+data.end[0].half_end_close_cost).toFixed(2):data.end[0].half_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);}if(newParams.p_b_c_b_r_b=="One_Fourth_Close"){b.back_wall_price=newParams.p_v_w==true?(data.end[0].one_fourth_vertical_ends_cost+data.end[0].one_fourth_end_close_cost).toFixed(2):data.end[0].one_fourth_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);}if(newParams.p_b_c_b_r_b=="Three_Fourth_Close"){b.back_wall_price=newParams.p_v_w==true?(data.end[0].three_fourth_vertical_ends_cost+data.end[0].three_fourth_end_close_cost).toFixed(2):data.end[0].three_fourth_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);}if(newParams.p_b_c_b_r_b=="Close"&&newParams.add_storage_check!=true){b.back_wall_price=newParams.p_v_w==true?data.end[0].vertical_ends_cost+data.end[0].end_close_cost:data.end[0].end_close_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);CalCulateRoofEndClosePrice=CalCulateRoofEndClosePrice+b.back_wall_price;}if(newParams.p_b_c_b_r=="Close"){b.side_wall_price=newParams.p_v_w==true?data.side[0].vertical_side_cost+data.side[0].side_close_cost:data.side[0].side_close_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(newParams.p_b_c_b_r=="Half_Close"){b.side_wall_price=newParams.p_v_w==true?(data.side[0].half_vertical_side_cost+data.side[0].half_side_close_cost).toFixed(2):data.side[0].half_side_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(newParams.p_b_c_b_r=="One_Fourth_Close"){b.side_wall_price=newParams.p_v_w==true?(data.side[0].one_fourth_vertical_side_cost+data.side[0].one_fourth_side_close_cost).toFixed(2):data.side[0].one_fourth_side_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(newParams.p_b_c_b_r=="Three_Fourth_Close"){b.side_wall_price=newParams.p_v_w==true?(data.side[0].three_fourth_vertical_side_cost+data.side[0].three_fourth_side_close_cost).toFixed(2):data.side[0].three_fourth_side_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(newParams.p_b_c_b_r!=="Close"&&newParams.p_b_c_b_r!=="Open"&&newParams.p_b_c_b_r!="Half_Close"&&newParams.p_b_c_b_r!="One_Fourth_Close"&&newParams.p_b_c_b_r!="Three_Fourth_Close"){b.side_wall_price=newParams.p_v_w==true?data.panel[0].vertical_panel_cost*newParams.p_b_c_b_r:data.panel[0].cost*newParams.p_b_c_b_r;t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(newParams.add_storage_check_right==true&&data.utility_side.length>0){b.utility_price=newParams.p_v_w==true?data.utility_side[0].vertical_side_cost*2+data.end[0].vertical_ends_cost*2+data.utility_side[0].side_close_cost*2+data.end[0].end_close_cost*2:data.utility_side[0].side_close_cost*2+data.end[0].end_close_cost*2;t_c_b=parseFloat(t_c_b)+parseFloat(b.utility_price);b.utility_length=newParams.add_storage;b.has_utility=true;b.utility_vertical=newParams.p_v_w?true:false;b.utility_on_centers=_reducer.const_var.DistanceArr[newParams.p_b_t][newParams.p_r_s]==undefined?5:_reducer.const_var.DistanceArr[newParams.p_b_t][newParams.p_r_s];CalCulateRoofUtilityEndPrice=newParams.p_v_w==true?data.end[0].vertical_ends_cost*2+data.end[0].end_close_cost*2:data.end[0].end_close_cost*2;}if(_reducer.const_var.b_r_p_l_to_a.length>0&&_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pR]!=undefined){if(_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pR].cost_type=="%"){var splitVal=_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pR].percentage_of!=undefined&&_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pR].percentage_of!=0?_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pR].percentage_of.split(","):0;var splval=0;if(splitVal!=0){if(splitVal.includes("1")!=false){splval=splval+CalCulateRoofBasePrice;}if(splitVal.includes("2")!=false){splval=splval+CalCulateRoofEndClosePrice;}if(splitVal.includes("3")!=false){splval=splval+CalCulateRoofEndGablePrice;}if(CalCulateRoofUtilityEndPrice!=0){splval=splval+CalCulateRoofUtilityEndPrice;}}else{splval=splval+CalCulateRoofBasePrice;}var finalCertPrice=_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pR]?splval*_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pR].cost/100:0;b.roof_pitch=_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pR].roof_pitch;b.roof_pitch_name=_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pR].roof_pitch;b.roof_pitch_price=finalCertPrice;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);}else{var finalCertPrice=_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pR]?_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pR].cost:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.roof_pitch=_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pR].roof_pitch;b.roof_pitch_name=_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pR].roof_pitch;b.roof_pitch_price=finalCertPrice;}}else{b.roof_pitch="3/12";b.roof_pitch_name="3/12";b.roof_pitch_price=0;}if(newParams.leanR_p_e_i!=""&&newParams.leanR_p_e_i!="0"&&newParams.leanR_p_e_i!="other"&&_reducer.const_var.main_extraItems_arr_Rlean_Compare[newParams.leanR_p_e_i]!=undefined){if(newParams.p_i_s=="1"){if(_reducer.const_var.main_extraItems_arr_Rlean_Compare[newParams.leanR_p_e_i].percentage_of_cost!=0){if(_reducer.const_var.main_extraItems_arr_Rlean_Compare[newParams.leanR_p_e_i].percentage_of!=undefined&&_reducer.const_var.main_extraItems_arr_Rlean_Compare[newParams.leanR_p_e_i].percentage_of=="building_amount"){var finalCertPrice=_reducer.const_var.main_extraItems_arr_Rlean_Compare[newParams.leanR_p_e_i].percentage_of_cost?t_c_b*_reducer.const_var.main_extraItems_arr_Rlean_Compare[newParams.leanR_p_e_i].percentage_of_cost/100:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}else{var finalCertPrice=_reducer.const_var.main_extraItems_arr_Rlean_Compare[newParams.leanR_p_e_i].percentage_of_cost?CalCulateRoofBasePrice*_reducer.const_var.main_extraItems_arr_Rlean_Compare[newParams.leanR_p_e_i].percentage_of_cost/100:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}}else{var finalCertPrice=_reducer.const_var.main_extraItems_arr_Rlean_Compare[newParams.leanR_p_e_i].certification_concrete_cost?_reducer.const_var.main_extraItems_arr_Rlean_Compare[newParams.leanR_p_e_i].certification_concrete_cost:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}}else{if(_reducer.const_var.main_extraItems_arr_Rlean_Compare[newParams.leanR_p_e_i].percentage_of_cost!=0){if(_reducer.const_var.main_extraItems_arr_Rlean_Compare[newParams.leanR_p_e_i].percentage_of!=undefined&&_reducer.const_var.main_extraItems_arr_Rlean_Compare[newParams.leanR_p_e_i].percentage_of=="building_amount"){var finalCertPrice=_reducer.const_var.main_extraItems_arr_Rlean_Compare[newParams.leanR_p_e_i].percentage_of_cost?t_c_b*_reducer.const_var.main_extraItems_arr_Rlean_Compare[newParams.leanR_p_e_i].percentage_of_cost/100:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}else{var finalCertPrice=_reducer.const_var.main_extraItems_arr_Rlean_Compare[newParams.leanR_p_e_i].percentage_of_cost?CalCulateRoofBasePrice*_reducer.const_var.main_extraItems_arr_Rlean_Compare[newParams.leanR_p_e_i].percentage_of_cost/100:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}//console.log(b.certificate_price,"b.certificate_price",b.certificate_price * certVal);
}else{var finalCertPrice=_reducer.const_var.main_extraItems_arr_Rlean_Compare[newParams.leanR_p_e_i].cost?_reducer.const_var.main_extraItems_arr_Rlean_Compare[newParams.leanR_p_e_i].cost:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}}}if(newParams.leanR_p_e_i=="other"){b.certificate={'gauge':0,'certified':1,'has_double_leg':0,'has_ladder_leg':0,'has_other_leg':0,'height':0,'id':-1,'cost':0,'is_default':"no",'length':0,'map_id':0,'name':"Other"};b.certificate_other_name=newParams.leanR_p_e_i_other!=''?newParams.leanR_p_e_i_other:'Other';b.certificate_price=0;t_c_b=parseFloat(t_c_b)+parseFloat(b.certificate_price);}if(newParams.continous_left_lean==true){b.continous_lean=true;}else{b.continous_lean=false;}b.pricing_data=data;b.t_c_b=parseFloat(t_c_b);_reducer.const_var.leantoCompare.push(b);}else{removeDataFromArrayCompare(2);}setComparePricingData(iiD);};exports.cPforRLeanOnlyComparision=cPforRLeanOnlyComparision;var cPforFLeanOnlyComparision=function cPforFLeanOnlyComparision(data,iiD){var t_c_b=0;var b={};var newParams=_reducer.const_var.ComparisionDataArray[iiD].paramsData;if(newParams.add_front_lean==true){removeDataFromArrayCompare(3);var leftLeanData="";b={"leanto_type":1,"width":newParams.leanF_p_w,"height":newParams.leanF_p_h,'length':newParams.leanF_p_d,"leanto_drop":"","front_wall":ConvStr(newParams.p_b_c_b_f_f),"back_wall":ConvStr(newParams.p_b_c_b_f_b),"side_wall":ConvStr(newParams.p_b_c_b_f_l),"front_wall_price":0,"back_wall_price":0,"side_wall_price":0,"front_wall_vertical":newParams.p_v_w,"back_wall_vertical":newParams.p_v_w,"side_wall_vertical":newParams.p_v_w,"certificate":_reducer.const_var.makeCertificateArrayFront[newParams.leanF_p_e_i]};//a.concat(b);
var data=data;var mapVal=_reducer.const_var.map[newParams.p_r_s];var CalCulateRoofBasePrice=0;var CalCulateRoofEndClosePrice=0;var CalCulateRoofEndGablePrice=0;var CalCulateRoofUtilityEndPrice=0;_reducer.const_var.main_extraItems_arr_Flean_Compare=[];if(data.certificate!=undefined&&data.certificate.length>0){newParams.leanF_p_e_i="Select";for(var i=0;i<=data.certificate.length-1;i++){if(_reducer.params.p_e_l==true){if(data.certificate[i].has_other_leg==1){_reducer.const_var.main_extraItems_arr_Flean_Compare[data.certificate[i].certificate_id]=data.certificate[i];if(data.certificate[i].is_default=="yes"&&(data.certificate[i].gauge==0||newParams.gauge_val==data.certificate[i].gauge)){newParams.leanF_p_e_i=newParams.leanF_p_e_i=="Select"?data.certificate[i].certificate_id:newParams.leanF_p_e_i;}}}else{if(data.certificate[i].has_other_leg==0){_reducer.const_var.main_extraItems_arr_Flean_Compare[data.certificate[i].certificate_id]=data.certificate[i];if(data.certificate[i].is_default=="yes"&&(data.certificate[i].gauge==0||_reducer.params.gauge_val==data.certificate[i].gauge)){newParams.leanF_p_e_i=newParams.leanF_p_e_i=="Select"?data.certificate[i].certificate_id:newParams.leanF_p_e_i;}}}}}_reducer.const_var.insulationArrayForLeantoFrontCompare=[];if(data!=""){for(var i=0;i<=data.insulation.length-1;i++){_reducer.const_var.insulationArrayForLeantoFrontCompare[data.insulation[i].insulation_id]=data.insulation[i];}}b.certificate=_reducer.const_var.main_extraItems_arr_Flean_Compare.filter(function(data){return data.gauge==0||newParams.gauge_val==data.gauge;})[0];if(newParams.leanF_p_e_i=="Select"){newParams.leanF_p_e_i=b.certificate.certificate_id;}if(newParams.leanF_p_e_i==0){newParams.leanF_p_e_i=b.certificate.certificate_id;}if(newParams.add_storage_check_front==true){data.side=data.side;data.panel=data.panel;}else{data.side=data.full_length_side!=undefined?data.full_length_side:data.side;data.panel=data.full_length_panel!=undefined?data.full_length_panel:data.panel;}for(var i=0;i<data.base.length;i++){if(_reducer.const_var.g_v==data.base[i].gauge){b.basic_price=data.base[i][mapVal];t_c_b=parseFloat(t_c_b)+parseFloat(b.basic_price);CalCulateRoofBasePrice=b.basic_price;}}var heightFullData=data.full_length_side!=undefined&&data.full_length_side.length>0?data.full_length_side:undefined;if(_reducer.const_var.g_v==14){if(heightFullData[0].double_leg_baserail_cost!=0&&newParams.p_e_l==true){b.height_price=heightFullData[0].double_leg_baserail_cost!=0?heightFullData[0].double_leg_baserail_cost:heightFullData[0].leg_height_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}else{b.height_price=heightFullData[0].leg_height_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}}if(_reducer.const_var.g_v==12){if(newParams.p_e_l==true){b.height_price=heightFullData[0].double_leg_baserail_cost_12!=0?heightFullData[0].double_leg_baserail_cost_12:heightFullData[0].leg_height_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}else{b.height_price=heightFullData[0].leg_height_cost_12!=0?heightFullData[0].leg_height_cost_12:heightFullData[0].leg_height_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}}// b.height_price = (UpdatePriceRecord==true && const_var.UpdatedPriceData.left_lean_height_price_changed!=true)?leftLeanData.height_price:(data.full_length_side!=undefined && data.full_length_side.length>0)?data.full_length_side[0].leg_height_cost:0;
// t_c_b = parseFloat(t_c_b) + parseFloat(b.height_price); 
if(newParams.p_b_c_b_f_f=="Gable"){var ShowPrice="";if(newParams.p_v_w==true){//t_c_b = t_c_b + (data.gable_end[0].vertical);
if(newParams.leanF_p_e_i!=""&&newParams.leanF_p_e_i!="other"&&newParams.leanF_p_e_i!="0"&&_reducer.const_var.main_extraItems_arr_Flean_Compare[newParams.leanF_p_e_i].certified==1){//t_c_b = ((data.gable_end[0].certified)==0)?parseFloat(t_c_b)+ (parseFloat(data.gable_end[0].uncertified) + parseFloat(data.gable_end[0].vertical)):(parseFloat(data.gable_end[0].vertical_certified)+parseFloat(data.gable_end[0].certified)) + parseFloat(t_c_b);
ShowPrice=data.gable_end[0].vertical_certified+data.gable_end[0].certified;}else{//t_c_b = parseFloat(t_c_b)+ (parseFloat(data.gable_end[0].uncertified) + parseFloat(data.gable_end[0].vertical));
ShowPrice=data.gable_end[0].uncertified+data.gable_end[0].vertical;}}else{if(newParams.leanF_p_e_i!=""&&newParams.leanF_p_e_i!="other"&&newParams.leanF_p_e_i!="0"&&_reducer.const_var.main_extraItems_arr_Flean_Compare[newParams.leanF_p_e_i].certified==1){//t_c_b = ((data.gable_end[0].certified)==0)?parseFloat(t_c_b)+ parseFloat((data.gable_end[0].uncertified)):parseFloat((data.gable_end[0].certified)) + parseFloat(t_c_b);
ShowPrice=data.gable_end[0].certified;}else{//t_c_b = parseFloat(t_c_b)+ parseFloat((data.gable_end[0].uncertified));
ShowPrice=data.gable_end[0].uncertified;}}b.front_wall_price=ShowPrice;//(newParams.p_v_w==true)?(data.gable_end[0].vertical):(data.gable_end[0].uncertified);
t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);CalCulateRoofEndGablePrice=b.front_wall_price;//b.back_wall_price = ShowPrice;//(newParams.p_v_w==true)?(data.gable_end[0].vertical):(data.gable_end[0].uncertified);
}if(newParams.p_b_c_b_f_b=="Gable"&&newParams.add_storage_check_front!=true){var ShowPrice="";if(newParams.p_v_w==true){//t_c_b = t_c_b + (data.gable_end[0].vertical);
if(newParams.leanF_p_e_i!=""&&newParams.leanF_p_e_i!="other"&&newParams.leanF_p_e_i!="0"&&_reducer.const_var.main_extraItems_arr_Flean_Compare[newParams.leanF_p_e_i].certified==1){//t_c_b = ((data.gable_end[0].certified)==0)?parseFloat(t_c_b)+ (parseFloat(data.gable_end[0].uncertified) + parseFloat(data.gable_end[0].vertical)) :(parseFloat(data.gable_end[0].vertical_certified)+parseFloat(data.gable_end[0].certified)) + parseFloat(t_c_b);
ShowPrice=data.gable_end[0].vertical_certified+data.gable_end[0].certified;}else{//t_c_b = parseFloat(t_c_b)+ (parseFloat(data.gable_end[0].uncertified) + parseFloat(data.gable_end[0].vertical));
ShowPrice=data.gable_end[0].uncertified+data.gable_end[0].vertical;}}else{if(newParams.leanF_p_e_i!=""&&newParams.leanF_p_e_i!="other"&&newParams.leanF_p_e_i!="0"&&_reducer.const_var.main_extraItems_arr_Flean_Compare[newParams.leanF_p_e_i].certified==1){//t_c_b = ((data.gable_end[0].certified)==0)?parseFloat(t_c_b)+ parseFloat((data.gable_end[0].uncertified)):parseFloat((data.gable_end[0].certified)) + parseFloat(t_c_b);
ShowPrice=data.gable_end[0].certified;}else{//t_c_b = parseFloat(t_c_b)+ parseFloat((data.gable_end[0].uncertified));
ShowPrice=data.gable_end[0].uncertified;}}//b.front_wall_price = ShowPrice;//(newParams.p_v_w==true)?(data.gable_end[0].vertical):(data.gable_end[0].uncertified);
b.back_wall_price=ShowPrice;//(newParams.p_v_w==true)?(data.gable_end[0].vertical):(data.gable_end[0].uncertified);
t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);CalCulateRoofEndGablePrice=CalCulateRoofEndGablePrice+b.back_wall_price;}if(newParams.p_b_c_b_f_f=="Half_Close"){b.front_wall_price=newParams.p_v_w==true?(data.end[0].half_vertical_ends_cost+data.end[0].half_end_close_cost).toFixed(2):data.end[0].half_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);}if(newParams.p_b_c_b_f_f=="One_Fourth_Close"){b.front_wall_price=newParams.p_v_w==true?(data.end[0].one_fourth_vertical_ends_cost+data.end[0].one_fourth_end_close_cost).toFixed(2):data.end[0].one_fourth_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);}if(newParams.p_b_c_b_f_f=="Three_Fourth_Close"){b.front_wall_price=newParams.p_v_w==true?(data.end[0].three_fourth_vertical_ends_cost+data.end[0].three_fourth_end_close_cost).toFixed(2):data.end[0].three_fourth_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);}if(newParams.p_b_c_b_f_f=="Close"){b.front_wall_price=newParams.p_v_w==true?data.end[0].vertical_ends_cost+data.end[0].end_close_cost:data.end[0].end_close_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);CalCulateRoofEndClosePrice=b.front_wall_price;//b.back_wall_price  = (newParams.p_v_w==true )?((data.end[0].vertical_ends_cost)) + (data.end[0].end_close_cost):(data.end[0].end_close_cost);
}if(newParams.p_b_c_b_f_b=="Half_Close"){b.back_wall_price=newParams.p_v_w==true?(data.end[0].half_vertical_ends_cost+data.end[0].half_end_close_cost).toFixed(2):data.end[0].half_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);}if(newParams.p_b_c_b_f_b=="One_Fourth_Close"){b.back_wall_price=newParams.p_v_w==true?(data.end[0].one_fourth_vertical_ends_cost+data.end[0].one_fourth_end_close_cost).toFixed(2):data.end[0].one_fourth_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);}if(newParams.p_b_c_b_f_b=="Three_Fourth_Close"){b.back_wall_price=newParams.p_v_w==true?(data.end[0].three_fourth_vertical_ends_cost+data.end[0].three_fourth_end_close_cost).toFixed(2):data.end[0].three_fourth_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);}if(newParams.p_b_c_b_f_b=="Close"&&newParams.add_storage_check_front!=true){b.back_wall_price=newParams.p_v_w==true?data.end[0].vertical_ends_cost+data.end[0].end_close_cost:data.end[0].end_close_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);CalCulateRoofEndClosePrice=CalCulateRoofEndClosePrice+b.back_wall_price;}if(newParams.p_b_c_b_f_l=="Close"){b.side_wall_price=newParams.p_v_w==true?data.side[0].vertical_side_cost+data.side[0].side_close_cost:data.side[0].side_close_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(newParams.p_b_c_b_f_l=="Half_Close"){b.side_wall_price=newParams.p_v_w==true?(data.side[0].half_vertical_side_cost+data.side[0].half_side_close_cost).toFixed(2):data.side[0].half_side_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(newParams.p_b_c_b_f_l=="One_Fourth_Close"){b.side_wall_price=newParams.p_v_w==true?(data.side[0].one_fourth_vertical_side_cost+data.side[0].one_fourth_side_close_cost).toFixed(2):data.side[0].one_fourth_side_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(newParams.p_b_c_b_f_l=="Three_Fourth_Close"){b.side_wall_price=newParams.p_v_w==true?(data.side[0].three_fourth_vertical_side_cost+data.side[0].three_fourth_side_close_cost).toFixed(2):data.side[0].three_fourth_side_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(newParams.p_b_c_b_f_l!=="Close"&&newParams.p_b_c_b_f_l!=="Open"&&newParams.p_b_c_b_f_l!="Half_Close"&&newParams.p_b_c_b_f_l!="One_Fourth_Close"&&newParams.p_b_c_b_f_l!="Three_Fourth_Close"){b.side_wall_price=newParams.p_v_w==true?data.panel[0].vertical_panel_cost*newParams.p_b_c_b_f_l:data.panel[0].cost*newParams.p_b_c_b_f_l;t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(newParams.add_storage_check_front==true&&data.utility_side.length>0){b.utility_price=newParams.p_v_w==true?data.utility_side[0].vertical_side_cost*2+data.end[0].vertical_ends_cost*2+data.utility_side[0].side_close_cost*2+data.end[0].end_close_cost*2:data.utility_side[0].side_close_cost*2+data.end[0].end_close_cost*2;t_c_b=parseFloat(t_c_b)+parseFloat(b.utility_price);b.utility_length=newParams.add_storage_front;b.has_utility=true;b.utility_vertical=newParams.p_v_w?true:false;b.utility_on_centers=_reducer.const_var.DistanceArr[newParams.p_b_t][newParams.p_r_s]==undefined?5:_reducer.const_var.DistanceArr[newParams.p_b_t][newParams.p_r_s];CalCulateRoofUtilityEndPrice=newParams.p_v_w==true?data.end[0].vertical_ends_cost*2+data.end[0].end_close_cost*2:data.end[0].end_close_cost*2;}if(_reducer.const_var.b_r_p_l_to_a.length>0&&_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pF]!=undefined){if(_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pF].cost_type=="%"){var splitVal=_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pF].percentage_of!=undefined&&_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pF].percentage_of!=0?_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pF].percentage_of.split(","):0;var splval=0;if(splitVal!=0){if(splitVal.includes("1")!=false){splval=splval+CalCulateRoofBasePrice;}if(splitVal.includes("2")!=false){splval=splval+CalCulateRoofEndClosePrice;}if(splitVal.includes("3")!=false){splval=splval+CalCulateRoofEndGablePrice;}if(CalCulateRoofUtilityEndPrice!=0){splval=splval+CalCulateRoofUtilityEndPrice;}}else{splval=splval+CalCulateRoofBasePrice;}var finalCertPrice=_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pF]?splval*_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pF].cost/100:0;b.roof_pitch=_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pF].roof_pitch;b.roof_pitch_name=_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pF].roof_pitch;b.roof_pitch_price=finalCertPrice;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);}else{var finalCertPrice=_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pF]?_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pF].cost:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.roof_pitch=_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pF].roof_pitch;b.roof_pitch_name=_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pF].roof_pitch;b.roof_pitch_price=finalCertPrice;}}else{b.roof_pitch="3/12";b.roof_pitch_name="3/12";b.roof_pitch_price=0;}if(newParams.leanF_p_e_i!=""&&newParams.leanF_p_e_i!="0"&&newParams.leanF_p_e_i!="other"&&_reducer.const_var.main_extraItems_arr_Flean_Compare[newParams.leanF_p_e_i]!=undefined){if(newParams.p_i_s=="1"){if(_reducer.const_var.main_extraItems_arr_Flean_Compare[newParams.leanF_p_e_i].percentage_of_cost!=0){if(_reducer.const_var.main_extraItems_arr_Flean_Compare[newParams.leanF_p_e_i].percentage_of!=undefined&&_reducer.const_var.main_extraItems_arr_Flean_Compare[newParams.leanF_p_e_i].percentage_of=="building_amount"){var finalCertPrice=_reducer.const_var.main_extraItems_arr_Flean_Compare[newParams.leanF_p_e_i].percentage_of_cost?t_c_b*_reducer.const_var.main_extraItems_arr_Flean_Compare[newParams.leanF_p_e_i].percentage_of_cost/100:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}else{var finalCertPrice=_reducer.const_var.main_extraItems_arr_Flean_Compare[newParams.leanF_p_e_i].percentage_of_cost?CalCulateRoofBasePrice*_reducer.const_var.main_extraItems_arr_Flean_Compare[newParams.leanF_p_e_i].percentage_of_cost/100:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}}else{var finalCertPrice=_reducer.const_var.main_extraItems_arr_Flean_Compare[newParams.leanF_p_e_i].certification_concrete_cost?_reducer.const_var.main_extraItems_arr_Flean_Compare[newParams.leanF_p_e_i].certification_concrete_cost:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}}else{if(_reducer.const_var.main_extraItems_arr_Flean_Compare[newParams.leanF_p_e_i].percentage_of_cost!=0){if(_reducer.const_var.main_extraItems_arr_Flean_Compare[newParams.leanF_p_e_i].percentage_of!=undefined&&_reducer.const_var.main_extraItems_arr_Flean_Compare[newParams.leanF_p_e_i].percentage_of=="building_amount"){var finalCertPrice=_reducer.const_var.main_extraItems_arr_Flean_Compare[newParams.leanF_p_e_i].percentage_of_cost?t_c_b*_reducer.const_var.main_extraItems_arr_Flean_Compare[newParams.leanF_p_e_i].percentage_of_cost/100:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}else{var finalCertPrice=_reducer.const_var.main_extraItems_arr_Flean_Compare[newParams.leanF_p_e_i].percentage_of_cost?CalCulateRoofBasePrice*_reducer.const_var.main_extraItems_arr_Flean_Compare[newParams.leanF_p_e_i].percentage_of_cost/100:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}//console.log(b.certificate_price,"b.certificate_price",b.certificate_price * certVal);
}else{var finalCertPrice=_reducer.const_var.main_extraItems_arr_Flean_Compare[newParams.leanF_p_e_i].cost?_reducer.const_var.main_extraItems_arr_Flean_Compare[newParams.leanF_p_e_i].cost:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}}}if(newParams.leanF_p_e_i=="other"){b.certificate={'gauge':0,'certified':1,'has_double_leg':0,'has_ladder_leg':0,'has_other_leg':0,'height':0,'id':-1,'cost':0,'is_default':"no",'length':0,'map_id':0,'name':"Other"};b.certificate_other_name=newParams.leanF_p_e_i_other!=''?newParams.leanF_p_e_i_other:'Other';b.certificate_price=0;t_c_b=parseFloat(t_c_b)+parseFloat(b.certificate_price);}if(newParams.continous_left_lean==true){b.continous_lean=true;}else{b.continous_lean=false;}b.pricing_data=data;b.t_c_b=parseFloat(t_c_b);_reducer.const_var.leantoCompare.push(b);}else{removeDataFromArrayCompare(3);}setComparePricingData(iiD);};exports.cPforFLeanOnlyComparision=cPforFLeanOnlyComparision;var cPforBLeanOnlyComparision=function cPforBLeanOnlyComparision(data,iiD){var t_c_b=0;var b={};var newParams=_reducer.const_var.ComparisionDataArray[iiD].paramsData;if(newParams.add_back_lean==true){removeDataFromArrayCompare(4);var leftLeanData="";b={"leanto_type":1,"width":newParams.leanB_p_w,"height":newParams.leanB_p_h,'length':newParams.leanB_p_d,"leanto_drop":"","front_wall":ConvStr(newParams.p_b_c_b_b_f),"back_wall":ConvStr(newParams.p_b_c_b_b_b),"side_wall":ConvStr(newParams.p_b_c_b_b_l),"front_wall_price":0,"back_wall_price":0,"side_wall_price":0,"front_wall_vertical":newParams.p_v_w,"back_wall_vertical":newParams.p_v_w,"side_wall_vertical":newParams.p_v_w,"certificate":_reducer.const_var.makeCertificateArrayBack[newParams.leanB_p_e_i]};//a.concat(b);
var data=data;var mapVal=_reducer.const_var.map[newParams.p_r_s];var CalCulateRoofBasePrice=0;var CalCulateRoofEndClosePrice=0;var CalCulateRoofEndGablePrice=0;var CalCulateRoofUtilityEndPrice=0;_reducer.const_var.main_extraItems_arr_Blean_Compare=[];if(data.certificate!=undefined&&data.certificate.length>0){newParams.leanB_p_e_i="Select";for(var i=0;i<=data.certificate.length-1;i++){if(_reducer.params.p_e_l==true){if(data.certificate[i].has_other_leg==1){_reducer.const_var.main_extraItems_arr_Blean_Compare[data.certificate[i].certificate_id]=data.certificate[i];if(data.certificate[i].is_default=="yes"&&(data.certificate[i].gauge==0||newParams.gauge_val==data.certificate[i].gauge)){newParams.leanB_p_e_i=newParams.leanB_p_e_i=="Select"?data.certificate[i].certificate_id:newParams.leanB_p_e_i;}}}else{if(data.certificate[i].has_other_leg==0){_reducer.const_var.main_extraItems_arr_Blean_Compare[data.certificate[i].certificate_id]=data.certificate[i];if(data.certificate[i].is_default=="yes"&&(data.certificate[i].gauge==0||_reducer.params.gauge_val==data.certificate[i].gauge)){newParams.leanB_p_e_i=newParams.leanB_p_e_i=="Select"?data.certificate[i].certificate_id:newParams.leanB_p_e_i;}}}}}_reducer.const_var.insulationArrayForLeantoBackCompare=[];if(data!=""){for(var i=0;i<=data.insulation.length-1;i++){_reducer.const_var.insulationArrayForLeantoBackCompare[data.insulation[i].insulation_id]=data.insulation[i];}}b.certificate=_reducer.const_var.main_extraItems_arr_Blean_Compare.filter(function(data){return data.gauge==0||newParams.gauge_val==data.gauge;})[0];if(newParams.leanB_p_e_i=="Select"){newParams.leanB_p_e_i=b.certificate.certificate_id;}if(newParams.leanB_p_e_i==0){newParams.leanB_p_e_i=b.certificate.certificate_id;}if(newParams.add_storage_check_back==true){data.side=data.side;data.panel=data.panel;}else{data.side=data.full_length_side!=undefined?data.full_length_side:data.side;data.panel=data.full_length_panel!=undefined?data.full_length_panel:data.panel;}for(var i=0;i<data.base.length;i++){if(_reducer.const_var.g_v==data.base[i].gauge){b.basic_price=data.base[i][mapVal];t_c_b=parseFloat(t_c_b)+parseFloat(b.basic_price);CalCulateRoofBasePrice=b.basic_price;}}var heightFullData=data.full_length_side!=undefined&&data.full_length_side.length>0?data.full_length_side:undefined;if(_reducer.const_var.g_v==14){if(heightFullData[0].double_leg_baserail_cost!=0&&newParams.p_e_l==true){b.height_price=heightFullData[0].double_leg_baserail_cost!=0?heightFullData[0].double_leg_baserail_cost:heightFullData[0].leg_height_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}else{b.height_price=heightFullData[0].leg_height_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}}if(_reducer.const_var.g_v==12){if(newParams.p_e_l==true){b.height_price=heightFullData[0].double_leg_baserail_cost_12!=0?heightFullData[0].double_leg_baserail_cost_12:heightFullData[0].leg_height_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}else{b.height_price=heightFullData[0].leg_height_cost_12!=0?heightFullData[0].leg_height_cost_12:heightFullData[0].leg_height_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}}// b.height_price = (UpdatePriceRecord==true && const_var.UpdatedPriceData.left_lean_height_price_changed!=true)?leftLeanData.height_price:(data.full_length_side!=undefined && data.full_length_side.length>0)?data.full_length_side[0].leg_height_cost:0;
// t_c_b = parseFloat(t_c_b) + parseFloat(b.height_price); 
if(newParams.p_b_c_b_b_f=="Gable"){var ShowPrice="";if(newParams.p_v_w==true){//t_c_b = t_c_b + (data.gable_end[0].vertical);
if(newParams.leanB_p_e_i!=""&&newParams.leanB_p_e_i!="other"&&newParams.leanB_p_e_i!="0"&&_reducer.const_var.main_extraItems_arr_Blean_Compare[newParams.leanB_p_e_i].certified==1){//t_c_b = ((data.gable_end[0].certified)==0)?parseFloat(t_c_b)+ (parseFloat(data.gable_end[0].uncertified) + parseFloat(data.gable_end[0].vertical)):(parseFloat(data.gable_end[0].vertical_certified)+parseFloat(data.gable_end[0].certified)) + parseFloat(t_c_b);
ShowPrice=data.gable_end[0].vertical_certified+data.gable_end[0].certified;}else{//t_c_b = parseFloat(t_c_b)+ (parseFloat(data.gable_end[0].uncertified) + parseFloat(data.gable_end[0].vertical));
ShowPrice=data.gable_end[0].uncertified+data.gable_end[0].vertical;}}else{if(newParams.leanB_p_e_i!=""&&newParams.leanB_p_e_i!="other"&&newParams.leanB_p_e_i!="0"&&_reducer.const_var.main_extraItems_arr_Blean_Compare[newParams.leanB_p_e_i].certified==1){//t_c_b = ((data.gable_end[0].certified)==0)?parseFloat(t_c_b)+ parseFloat((data.gable_end[0].uncertified)):parseFloat((data.gable_end[0].certified)) + parseFloat(t_c_b);
ShowPrice=data.gable_end[0].certified;}else{//t_c_b = parseFloat(t_c_b)+ parseFloat((data.gable_end[0].uncertified));
ShowPrice=data.gable_end[0].uncertified;}}b.front_wall_price=ShowPrice;//(newParams.p_v_w==true)?(data.gable_end[0].vertical):(data.gable_end[0].uncertified);
t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);CalCulateRoofEndGablePrice=b.front_wall_price;//b.back_wall_price = ShowPrice;//(newParams.p_v_w==true)?(data.gable_end[0].vertical):(data.gable_end[0].uncertified);
}if(newParams.p_b_c_b_b_b=="Gable"&&newParams.add_storage_check_back!=true){var ShowPrice="";if(newParams.p_v_w==true){//t_c_b = t_c_b + (data.gable_end[0].vertical);
if(newParams.leanB_p_e_i!=""&&newParams.leanB_p_e_i!="other"&&newParams.leanB_p_e_i!="0"&&_reducer.const_var.main_extraItems_arr_Blean_Compare[newParams.leanB_p_e_i].certified==1){//t_c_b = ((data.gable_end[0].certified)==0)?parseFloat(t_c_b)+ (parseFloat(data.gable_end[0].uncertified) + parseFloat(data.gable_end[0].vertical)) :(parseFloat(data.gable_end[0].vertical_certified)+parseFloat(data.gable_end[0].certified)) + parseFloat(t_c_b);
ShowPrice=data.gable_end[0].vertical_certified+data.gable_end[0].certified;}else{//t_c_b = parseFloat(t_c_b)+ (parseFloat(data.gable_end[0].uncertified) + parseFloat(data.gable_end[0].vertical));
ShowPrice=data.gable_end[0].uncertified+data.gable_end[0].vertical;}}else{if(newParams.leanB_p_e_i!=""&&newParams.leanB_p_e_i!="other"&&newParams.leanB_p_e_i!="0"&&_reducer.const_var.main_extraItems_arr_Blean_Compare[newParams.leanB_p_e_i].certified==1){//t_c_b = ((data.gable_end[0].certified)==0)?parseFloat(t_c_b)+ parseFloat((data.gable_end[0].uncertified)):parseFloat((data.gable_end[0].certified)) + parseFloat(t_c_b);
ShowPrice=data.gable_end[0].certified;}else{//t_c_b = parseFloat(t_c_b)+ parseFloat((data.gable_end[0].uncertified));
ShowPrice=data.gable_end[0].uncertified;}}//b.front_wall_price = ShowPrice;//(newParams.p_v_w==true)?(data.gable_end[0].vertical):(data.gable_end[0].uncertified);
b.back_wall_price=ShowPrice;//(newParams.p_v_w==true)?(data.gable_end[0].vertical):(data.gable_end[0].uncertified);
t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);CalCulateRoofEndGablePrice=CalCulateRoofEndGablePrice+b.back_wall_price;}if(newParams.p_b_c_b_b_f=="Half_Close"){b.front_wall_price=newParams.p_v_w==true?(data.end[0].half_vertical_ends_cost+data.end[0].half_end_close_cost).toFixed(2):data.end[0].half_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);}if(newParams.p_b_c_b_b_f=="One_Fourth_Close"){b.front_wall_price=newParams.p_v_w==true?(data.end[0].one_fourth_vertical_ends_cost+data.end[0].one_fourth_end_close_cost).toFixed(2):data.end[0].one_fourth_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);}if(newParams.p_b_c_b_b_f=="Three_Fourth_Close"){b.front_wall_price=newParams.p_v_w==true?(data.end[0].three_fourth_vertical_ends_cost+data.end[0].three_fourth_end_close_cost).toFixed(2):data.end[0].three_fourth_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);}if(newParams.p_b_c_b_b_f=="Close"){b.front_wall_price=newParams.p_v_w==true?data.end[0].vertical_ends_cost+data.end[0].end_close_cost:data.end[0].end_close_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);CalCulateRoofEndClosePrice=b.front_wall_price;//b.back_wall_price  = (newParams.p_v_w==true )?((data.end[0].vertical_ends_cost)) + (data.end[0].end_close_cost):(data.end[0].end_close_cost);
}if(newParams.p_b_c_b_b_b=="Half_Close"){b.back_wall_price=newParams.p_v_w==true?(data.end[0].half_vertical_ends_cost+data.end[0].half_end_close_cost).toFixed(2):data.end[0].half_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);}if(newParams.p_b_c_b_b_b=="One_Fourth_Close"){b.back_wall_price=newParams.p_v_w==true?(data.end[0].one_fourth_vertical_ends_cost+data.end[0].one_fourth_end_close_cost).toFixed(2):data.end[0].one_fourth_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);}if(newParams.p_b_c_b_b_b=="Three_Fourth_Close"){b.back_wall_price=newParams.p_v_w==true?(data.end[0].three_fourth_vertical_ends_cost+data.end[0].three_fourth_end_close_cost).toFixed(2):data.end[0].three_fourth_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);}if(newParams.p_b_c_b_b_b=="Close"&&newParams.add_storage_check_back!=true){b.back_wall_price=newParams.p_v_w==true?data.end[0].vertical_ends_cost+data.end[0].end_close_cost:data.end[0].end_close_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);CalCulateRoofEndClosePrice=CalCulateRoofEndClosePrice+b.back_wall_price;}if(newParams.p_b_c_b_b_l=="Close"){b.side_wall_price=newParams.p_v_w==true?data.side[0].vertical_side_cost+data.side[0].side_close_cost:data.side[0].side_close_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(newParams.p_b_c_b_b_l=="Half_Close"){b.side_wall_price=newParams.p_v_w==true?(data.side[0].half_vertical_side_cost+data.side[0].half_side_close_cost).toFixed(2):data.side[0].half_side_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(newParams.p_b_c_b_b_l=="One_Fourth_Close"){b.side_wall_price=newParams.p_v_w==true?(data.side[0].one_fourth_vertical_side_cost+data.side[0].one_fourth_side_close_cost).toFixed(2):data.side[0].one_fourth_side_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(newParams.p_b_c_b_b_l=="Three_Fourth_Close"){b.side_wall_price=newParams.p_v_w==true?(data.side[0].three_fourth_vertical_side_cost+data.side[0].three_fourth_side_close_cost).toFixed(2):data.side[0].three_fourth_side_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(newParams.p_b_c_b_b_l!=="Close"&&newParams.p_b_c_b_b_l!=="Open"&&newParams.p_b_c_b_b_l!="Half_Close"&&newParams.p_b_c_b_b_l!="One_Fourth_Close"&&newParams.p_b_c_b_b_l!="Three_Fourth_Close"){b.side_wall_price=newParams.p_v_w==true?data.panel[0].vertical_panel_cost*newParams.p_b_c_b_b_l:data.panel[0].cost*newParams.p_b_c_b_b_l;t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(newParams.add_storage_check_back==true&&data.utility_side.length>0){b.utility_price=newParams.p_v_w==true?data.utility_side[0].vertical_side_cost*2+data.end[0].vertical_ends_cost*2+data.utility_side[0].side_close_cost*2+data.end[0].end_close_cost*2:data.utility_side[0].side_close_cost*2+data.end[0].end_close_cost*2;t_c_b=parseFloat(t_c_b)+parseFloat(b.utility_price);b.utility_length=newParams.add_storage_back;b.has_utility=true;b.utility_vertical=newParams.p_v_w?true:false;b.utility_on_centers=_reducer.const_var.DistanceArr[newParams.p_b_t][newParams.p_r_s]==undefined?5:_reducer.const_var.DistanceArr[newParams.p_b_t][newParams.p_r_s];CalCulateRoofUtilityEndPrice=newParams.p_v_w==true?data.end[0].vertical_ends_cost*2+data.end[0].end_close_cost*2:data.end[0].end_close_cost*2;}if(_reducer.const_var.b_r_p_l_to_a.length>0&&_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pB]!=undefined){if(_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pB].cost_type=="%"){var splitVal=_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pB].percentage_of!=undefined&&_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pB].percentage_of!=0?_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pB].percentage_of.split(","):0;var splval=0;if(splitVal!=0){if(splitVal.includes("1")!=false){splval=splval+CalCulateRoofBasePrice;}if(splitVal.includes("2")!=false){splval=splval+CalCulateRoofEndClosePrice;}if(splitVal.includes("3")!=false){splval=splval+CalCulateRoofEndGablePrice;}if(CalCulateRoofUtilityEndPrice!=0){splval=splval+CalCulateRoofUtilityEndPrice;}}else{splval=splval+CalCulateRoofBasePrice;}var finalCertPrice=_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pB]?splval*_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pB].cost/100:0;b.roof_pitch=_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pB].roof_pitch;b.roof_pitch_name=_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pB].roof_pitch;b.roof_pitch_price=finalCertPrice;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);}else{var finalCertPrice=_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pB]?_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pB].cost:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.roof_pitch=_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pB].roof_pitch;b.roof_pitch_name=_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_pB].roof_pitch;b.roof_pitch_price=finalCertPrice;}}else{b.roof_pitch="3/12";b.roof_pitch_name="3/12";b.roof_pitch_price=0;}if(newParams.leanB_p_e_i!=""&&newParams.leanB_p_e_i!="0"&&newParams.leanB_p_e_i!="other"&&_reducer.const_var.main_extraItems_arr_Blean_Compare[newParams.leanB_p_e_i]!=undefined){if(newParams.p_i_s=="1"){if(_reducer.const_var.main_extraItems_arr_Blean_Compare[newParams.leanB_p_e_i].percentage_of_cost!=0){if(_reducer.const_var.main_extraItems_arr_Blean_Compare[newParams.leanB_p_e_i].percentage_of!=undefined&&_reducer.const_var.main_extraItems_arr_Blean_Compare[newParams.leanB_p_e_i].percentage_of=="building_amount"){var finalCertPrice=_reducer.const_var.main_extraItems_arr_Blean_Compare[newParams.leanB_p_e_i].percentage_of_cost?t_c_b*_reducer.const_var.main_extraItems_arr_Blean_Compare[newParams.leanB_p_e_i].percentage_of_cost/100:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}else{var finalCertPrice=_reducer.const_var.main_extraItems_arr_Blean_Compare[newParams.leanB_p_e_i].percentage_of_cost?CalCulateRoofBasePrice*_reducer.const_var.main_extraItems_arr_Blean_Compare[newParams.leanB_p_e_i].percentage_of_cost/100:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}}else{var finalCertPrice=_reducer.const_var.main_extraItems_arr_Blean_Compare[newParams.leanB_p_e_i].certification_concrete_cost?_reducer.const_var.main_extraItems_arr_Blean_Compare[newParams.leanB_p_e_i].certification_concrete_cost:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}}else{if(_reducer.const_var.main_extraItems_arr_Blean_Compare[newParams.leanB_p_e_i].percentage_of_cost!=0){if(_reducer.const_var.main_extraItems_arr_Blean_Compare[newParams.leanB_p_e_i].percentage_of!=undefined&&_reducer.const_var.main_extraItems_arr_Blean_Compare[newParams.leanB_p_e_i].percentage_of=="building_amount"){var finalCertPrice=_reducer.const_var.main_extraItems_arr_Blean_Compare[newParams.leanB_p_e_i].percentage_of_cost?t_c_b*_reducer.const_var.main_extraItems_arr_Blean_Compare[newParams.leanB_p_e_i].percentage_of_cost/100:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}else{var finalCertPrice=_reducer.const_var.main_extraItems_arr_Blean_Compare[newParams.leanB_p_e_i].percentage_of_cost?CalCulateRoofBasePrice*_reducer.const_var.main_extraItems_arr_Blean_Compare[newParams.leanB_p_e_i].percentage_of_cost/100:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}//console.log(b.certificate_price,"b.certificate_price",b.certificate_price * certVal);
}else{var finalCertPrice=_reducer.const_var.main_extraItems_arr_Blean_Compare[newParams.leanB_p_e_i].cost?_reducer.const_var.main_extraItems_arr_Blean_Compare[newParams.leanB_p_e_i].cost:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}}}if(newParams.leanB_p_e_i=="other"){b.certificate={'gauge':0,'certified':1,'has_double_leg':0,'has_ladder_leg':0,'has_other_leg':0,'height':0,'id':-1,'cost':0,'is_default':"no",'length':0,'map_id':0,'name':"Other"};b.certificate_other_name=newParams.leanB_p_e_i_other!=''?newParams.leanB_p_e_i_other:'Other';b.certificate_price=0;t_c_b=parseFloat(t_c_b)+parseFloat(b.certificate_price);}if(newParams.continous_left_lean==true){b.continous_lean=true;}else{b.continous_lean=false;}b.pricing_data=data;b.t_c_b=parseFloat(t_c_b);_reducer.const_var.leantoCompare.push(b);}else{removeDataFromArrayCompare(4);}setComparePricingData(iiD);};exports.cPforBLeanOnlyComparision=cPforBLeanOnlyComparision;var cPforLLeanOnlyComparision=function cPforLLeanOnlyComparision(data,iiD){var t_c_b=0;var b={};var newParams=_reducer.const_var.ComparisionDataArray[iiD].paramsData;if(newParams.add_left_lean==true){removeDataFromArrayCompare(1);var leftLeanData="";b={"leanto_type":1,"width":newParams.lean_p_w,"height":newParams.lean_p_h,'length':newParams.lean_p_d,"leanto_drop":"","front_wall":ConvStr(newParams.p_b_c_b_l_f),"back_wall":ConvStr(newParams.p_b_c_b_l_b),"side_wall":ConvStr(newParams.p_b_c_b_l),"front_wall_price":0,"back_wall_price":0,"side_wall_price":0,"front_wall_vertical":newParams.p_v_w,"back_wall_vertical":newParams.p_v_w,"side_wall_vertical":newParams.p_v_w,"certificate":_reducer.const_var.makeCertificateArrayLeft[newParams.lean_p_e_i]};//a.concat(b);
var data=data;var mapVal=_reducer.const_var.map[newParams.p_r_s];var CalCulateRoofBasePrice=0;var CalCulateRoofEndClosePrice=0;var CalCulateRoofEndGablePrice=0;var CalCulateRoofUtilityEndPrice=0;_reducer.const_var.main_extraItems_arr_Llean_Compare=[];if(data.certificate!=undefined&&data.certificate.length>0){newParams.lean_p_e_i="Select";for(var i=0;i<=data.certificate.length-1;i++){if(_reducer.params.p_e_l==true){if(data.certificate[i].has_other_leg==1){_reducer.const_var.main_extraItems_arr_Llean_Compare[data.certificate[i].certificate_id]=data.certificate[i];if(data.certificate[i].is_default=="yes"&&(data.certificate[i].gauge==0||newParams.gauge_val==data.certificate[i].gauge)){newParams.lean_p_e_i=newParams.lean_p_e_i=="Select"?data.certificate[i].certificate_id:newParams.lean_p_e_i;}}}else{if(data.certificate[i].has_other_leg==0){_reducer.const_var.main_extraItems_arr_Llean_Compare[data.certificate[i].certificate_id]=data.certificate[i];if(data.certificate[i].is_default=="yes"&&(data.certificate[i].gauge==0||_reducer.params.gauge_val==data.certificate[i].gauge)){newParams.lean_p_e_i=newParams.lean_p_e_i=="Select"?data.certificate[i].certificate_id:newParams.lean_p_e_i;}}}}}_reducer.const_var.insulationArrayForLeantoLeftCompare=[];if(data!=""){for(var i=0;i<=data.insulation.length-1;i++){_reducer.const_var.insulationArrayForLeantoLeftCompare[data.insulation[i].insulation_id]=data.insulation[i];}}b.certificate=_reducer.const_var.main_extraItems_arr_Llean_Compare.filter(function(data){return data.gauge==0||newParams.gauge_val==data.gauge;})[0];if(newParams.lean_p_e_i=="Select"){newParams.lean_p_e_i=b.certificate.certificate_id;}if(newParams.lean_p_e_i==0){newParams.lean_p_e_i=b.certificate.certificate_id;}if(newParams.add_storage_check==true){data.side=data.side;data.panel=data.panel;}else{data.side=data.full_length_side!=undefined?data.full_length_side:data.side;data.panel=data.full_length_panel!=undefined?data.full_length_panel:data.panel;}for(var i=0;i<data.base.length;i++){if(_reducer.const_var.g_v==data.base[i].gauge){b.basic_price=data.base[i][mapVal];t_c_b=parseFloat(t_c_b)+parseFloat(b.basic_price);CalCulateRoofBasePrice=b.basic_price;}}var heightFullData=data.full_length_side!=undefined&&data.full_length_side.length>0?data.full_length_side:undefined;if(_reducer.const_var.g_v==14){if(heightFullData[0].double_leg_baserail_cost!=0&&newParams.p_e_l==true){b.height_price=heightFullData[0].double_leg_baserail_cost!=0?heightFullData[0].double_leg_baserail_cost:heightFullData[0].leg_height_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}else{b.height_price=heightFullData[0].leg_height_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}}if(_reducer.const_var.g_v==12){if(newParams.p_e_l==true){b.height_price=heightFullData[0].double_leg_baserail_cost_12!=0?heightFullData[0].double_leg_baserail_cost_12:heightFullData[0].leg_height_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}else{b.height_price=heightFullData[0].leg_height_cost_12!=0?heightFullData[0].leg_height_cost_12:heightFullData[0].leg_height_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}}// b.height_price = (UpdatePriceRecord==true && const_var.UpdatedPriceData.left_lean_height_price_changed!=true)?leftLeanData.height_price:(data.full_length_side!=undefined && data.full_length_side.length>0)?data.full_length_side[0].leg_height_cost:0;
// t_c_b = parseFloat(t_c_b) + parseFloat(b.height_price); 
if(newParams.p_b_c_b_l_f=="Gable"){var ShowPrice="";if(newParams.p_v_w==true){//t_c_b = t_c_b + (data.gable_end[0].vertical);
if(newParams.lean_p_e_i!=""&&newParams.lean_p_e_i!="other"&&newParams.lean_p_e_i!="0"&&_reducer.const_var.main_extraItems_arr_Llean_Compare[newParams.lean_p_e_i].certified==1){//t_c_b = ((data.gable_end[0].certified)==0)?parseFloat(t_c_b)+ (parseFloat(data.gable_end[0].uncertified) + parseFloat(data.gable_end[0].vertical)):(parseFloat(data.gable_end[0].vertical_certified)+parseFloat(data.gable_end[0].certified)) + parseFloat(t_c_b);
ShowPrice=data.gable_end[0].vertical_certified+data.gable_end[0].certified;}else{//t_c_b = parseFloat(t_c_b)+ (parseFloat(data.gable_end[0].uncertified) + parseFloat(data.gable_end[0].vertical));
ShowPrice=data.gable_end[0].uncertified+data.gable_end[0].vertical;}}else{if(newParams.lean_p_e_i!=""&&newParams.lean_p_e_i!="other"&&newParams.lean_p_e_i!="0"&&_reducer.const_var.main_extraItems_arr_Llean_Compare[newParams.lean_p_e_i].certified==1){//t_c_b = ((data.gable_end[0].certified)==0)?parseFloat(t_c_b)+ parseFloat((data.gable_end[0].uncertified)):parseFloat((data.gable_end[0].certified)) + parseFloat(t_c_b);
ShowPrice=data.gable_end[0].certified;}else{//t_c_b = parseFloat(t_c_b)+ parseFloat((data.gable_end[0].uncertified));
ShowPrice=data.gable_end[0].uncertified;}}b.front_wall_price=ShowPrice;//(newParams.p_v_w==true)?(data.gable_end[0].vertical):(data.gable_end[0].uncertified);
t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);CalCulateRoofEndGablePrice=b.front_wall_price;//b.back_wall_price = ShowPrice;//(newParams.p_v_w==true)?(data.gable_end[0].vertical):(data.gable_end[0].uncertified);
}if(newParams.p_b_c_b_l_b=="Gable"&&newParams.add_storage_check!=true){var ShowPrice="";if(newParams.p_v_w==true){//t_c_b = t_c_b + (data.gable_end[0].vertical);
if(newParams.lean_p_e_i!=""&&newParams.lean_p_e_i!="other"&&newParams.lean_p_e_i!="0"&&_reducer.const_var.main_extraItems_arr_Llean_Compare[newParams.lean_p_e_i].certified==1){//t_c_b = ((data.gable_end[0].certified)==0)?parseFloat(t_c_b)+ (parseFloat(data.gable_end[0].uncertified) + parseFloat(data.gable_end[0].vertical)) :(parseFloat(data.gable_end[0].vertical_certified)+parseFloat(data.gable_end[0].certified)) + parseFloat(t_c_b);
ShowPrice=data.gable_end[0].vertical_certified+data.gable_end[0].certified;}else{//t_c_b = parseFloat(t_c_b)+ (parseFloat(data.gable_end[0].uncertified) + parseFloat(data.gable_end[0].vertical));
ShowPrice=data.gable_end[0].uncertified+data.gable_end[0].vertical;}}else{if(newParams.lean_p_e_i!=""&&newParams.lean_p_e_i!="other"&&newParams.lean_p_e_i!="0"&&_reducer.const_var.main_extraItems_arr_Llean_Compare[newParams.lean_p_e_i].certified==1){//t_c_b = ((data.gable_end[0].certified)==0)?parseFloat(t_c_b)+ parseFloat((data.gable_end[0].uncertified)):parseFloat((data.gable_end[0].certified)) + parseFloat(t_c_b);
ShowPrice=data.gable_end[0].certified;}else{//t_c_b = parseFloat(t_c_b)+ parseFloat((data.gable_end[0].uncertified));
ShowPrice=data.gable_end[0].uncertified;}}//b.front_wall_price = ShowPrice;//(newParams.p_v_w==true)?(data.gable_end[0].vertical):(data.gable_end[0].uncertified);
b.back_wall_price=ShowPrice;//(newParams.p_v_w==true)?(data.gable_end[0].vertical):(data.gable_end[0].uncertified);
t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);CalCulateRoofEndGablePrice=CalCulateRoofEndGablePrice+b.back_wall_price;}if(newParams.p_b_c_b_l_f=="Half_Close"){b.front_wall_price=newParams.p_v_w==true?(data.end[0].half_vertical_ends_cost+data.end[0].half_end_close_cost).toFixed(2):data.end[0].half_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);}if(newParams.p_b_c_b_l_f=="One_Fourth_Close"){b.front_wall_price=newParams.p_v_w==true?(data.end[0].one_fourth_vertical_ends_cost+data.end[0].one_fourth_end_close_cost).toFixed(2):data.end[0].one_fourth_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);}if(newParams.p_b_c_b_l_f=="Three_Fourth_Close"){b.front_wall_price=newParams.p_v_w==true?(data.end[0].three_fourth_vertical_ends_cost+data.end[0].three_fourth_end_close_cost).toFixed(2):data.end[0].three_fourth_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);}if(newParams.p_b_c_b_l_f=="Close"){b.front_wall_price=newParams.p_v_w==true?data.end[0].vertical_ends_cost+data.end[0].end_close_cost:data.end[0].end_close_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);CalCulateRoofEndClosePrice=b.front_wall_price;//b.back_wall_price  = (newParams.p_v_w==true )?((data.end[0].vertical_ends_cost)) + (data.end[0].end_close_cost):(data.end[0].end_close_cost);
}if(newParams.p_b_c_b_l_b=="Half_Close"){b.back_wall_price=newParams.p_v_w==true?(data.end[0].half_vertical_ends_cost+data.end[0].half_end_close_cost).toFixed(2):data.end[0].half_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);}if(newParams.p_b_c_b_l_b=="One_Fourth_Close"){b.back_wall_price=newParams.p_v_w==true?(data.end[0].one_fourth_vertical_ends_cost+data.end[0].one_fourth_end_close_cost).toFixed(2):data.end[0].one_fourth_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);}if(newParams.p_b_c_b_l_b=="Three_Fourth_Close"){b.back_wall_price=newParams.p_v_w==true?(data.end[0].three_fourth_vertical_ends_cost+data.end[0].three_fourth_end_close_cost).toFixed(2):data.end[0].three_fourth_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);}if(newParams.p_b_c_b_l_b=="Close"&&newParams.add_storage_check!=true){b.back_wall_price=newParams.p_v_w==true?data.end[0].vertical_ends_cost+data.end[0].end_close_cost:data.end[0].end_close_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);CalCulateRoofEndClosePrice=CalCulateRoofEndClosePrice+b.back_wall_price;}if(newParams.p_b_c_b_l=="Close"){b.side_wall_price=newParams.p_v_w==true?data.side[0].vertical_side_cost+data.side[0].side_close_cost:data.side[0].side_close_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(newParams.p_b_c_b_l=="Half_Close"){b.side_wall_price=newParams.p_v_w==true?(data.side[0].half_vertical_side_cost+data.side[0].half_side_close_cost).toFixed(2):data.side[0].half_side_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(newParams.p_b_c_b_l=="One_Fourth_Close"){b.side_wall_price=newParams.p_v_w==true?(data.side[0].one_fourth_vertical_side_cost+data.side[0].one_fourth_side_close_cost).toFixed(2):data.side[0].one_fourth_side_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(newParams.p_b_c_b_l=="Three_Fourth_Close"){b.side_wall_price=newParams.p_v_w==true?(data.side[0].three_fourth_vertical_side_cost+data.side[0].three_fourth_side_close_cost).toFixed(2):data.side[0].three_fourth_side_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(newParams.p_b_c_b_l!=="Close"&&newParams.p_b_c_b_l!=="Open"&&newParams.p_b_c_b_l!="Half_Close"&&newParams.p_b_c_b_l!="One_Fourth_Close"&&newParams.p_b_c_b_l!="Three_Fourth_Close"){b.side_wall_price=newParams.p_v_w==true?data.panel[0].vertical_panel_cost*newParams.p_b_c_b_l:data.panel[0].cost*newParams.p_b_c_b_l;t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(newParams.add_storage_check==true&&data.utility_side.length>0){b.utility_price=newParams.p_v_w==true?data.utility_side[0].vertical_side_cost*2+data.end[0].vertical_ends_cost*2+data.utility_side[0].side_close_cost*2+data.end[0].end_close_cost*2:data.utility_side[0].side_close_cost*2+data.end[0].end_close_cost*2;t_c_b=parseFloat(t_c_b)+parseFloat(b.utility_price);b.utility_length=newParams.add_storage;b.has_utility=true;b.utility_vertical=newParams.p_v_w?true:false;b.utility_on_centers=_reducer.const_var.DistanceArr[newParams.p_b_t][newParams.p_r_s]==undefined?5:_reducer.const_var.DistanceArr[newParams.p_b_t][newParams.p_r_s];CalCulateRoofUtilityEndPrice=newParams.p_v_w==true?data.end[0].vertical_ends_cost*2+data.end[0].end_close_cost*2:data.end[0].end_close_cost*2;}if(_reducer.const_var.b_r_p_l_to_a.length>0&&_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_p]!=undefined){if(_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_p].cost_type=="%"){var splitVal=_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_p].percentage_of!=undefined&&_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_p].percentage_of!=0?_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_p].percentage_of.split(","):0;var splval=0;if(splitVal!=0){if(splitVal.includes("1")!=false){splval=splval+CalCulateRoofBasePrice;}if(splitVal.includes("2")!=false){splval=splval+CalCulateRoofEndClosePrice;}if(splitVal.includes("3")!=false){splval=splval+CalCulateRoofEndGablePrice;}if(CalCulateRoofUtilityEndPrice!=0){splval=splval+CalCulateRoofUtilityEndPrice;}}else{splval=splval+CalCulateRoofBasePrice;}var finalCertPrice=_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_p]?splval*_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_p].cost/100:0;b.roof_pitch=_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_p].roof_pitch;b.roof_pitch_name=_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_p].roof_pitch;b.roof_pitch_price=finalCertPrice;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);}else{var finalCertPrice=_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_p]?_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_p].cost:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.roof_pitch=_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_p].roof_pitch;b.roof_pitch_name=_reducer.const_var.b_r_p_l_to_a[newParams.b_l_t_r_p].roof_pitch;b.roof_pitch_price=finalCertPrice;}}else{b.roof_pitch="3/12";b.roof_pitch_name="3/12";b.roof_pitch_price=0;}if(newParams.lean_p_e_i!=""&&newParams.lean_p_e_i!="0"&&newParams.lean_p_e_i!="other"&&_reducer.const_var.main_extraItems_arr_Llean_Compare[newParams.lean_p_e_i]!=undefined){if(newParams.p_i_s=="1"){if(_reducer.const_var.main_extraItems_arr_Llean_Compare[newParams.lean_p_e_i].percentage_of_cost!=0){if(_reducer.const_var.main_extraItems_arr_Llean_Compare[newParams.lean_p_e_i].percentage_of!=undefined&&_reducer.const_var.main_extraItems_arr_Llean_Compare[newParams.lean_p_e_i].percentage_of=="building_amount"){var finalCertPrice=_reducer.const_var.main_extraItems_arr_Llean_Compare[newParams.lean_p_e_i].percentage_of_cost?t_c_b*_reducer.const_var.main_extraItems_arr_Llean_Compare[newParams.lean_p_e_i].percentage_of_cost/100:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}else{var finalCertPrice=_reducer.const_var.main_extraItems_arr_Llean_Compare[newParams.lean_p_e_i].percentage_of_cost?CalCulateRoofBasePrice*_reducer.const_var.main_extraItems_arr_Llean_Compare[newParams.lean_p_e_i].percentage_of_cost/100:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}}else{var finalCertPrice=_reducer.const_var.main_extraItems_arr_Llean_Compare[newParams.lean_p_e_i].certification_concrete_cost?_reducer.const_var.main_extraItems_arr_Llean_Compare[newParams.lean_p_e_i].certification_concrete_cost:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}}else{if(_reducer.const_var.main_extraItems_arr_Llean_Compare[newParams.lean_p_e_i].percentage_of_cost!=0){if(_reducer.const_var.main_extraItems_arr_Llean_Compare[newParams.lean_p_e_i].percentage_of!=undefined&&_reducer.const_var.main_extraItems_arr_Llean_Compare[newParams.lean_p_e_i].percentage_of=="building_amount"){var finalCertPrice=_reducer.const_var.main_extraItems_arr_Llean_Compare[newParams.lean_p_e_i].percentage_of_cost?t_c_b*_reducer.const_var.main_extraItems_arr_Llean_Compare[newParams.lean_p_e_i].percentage_of_cost/100:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}else{var finalCertPrice=_reducer.const_var.main_extraItems_arr_Llean_Compare[newParams.lean_p_e_i].percentage_of_cost?CalCulateRoofBasePrice*_reducer.const_var.main_extraItems_arr_Llean_Compare[newParams.lean_p_e_i].percentage_of_cost/100:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}//console.log(b.certificate_price,"b.certificate_price",b.certificate_price * certVal);
}else{var finalCertPrice=_reducer.const_var.main_extraItems_arr_Llean_Compare[newParams.lean_p_e_i].cost?_reducer.const_var.main_extraItems_arr_Llean_Compare[newParams.lean_p_e_i].cost:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}}}if(newParams.lean_p_e_i=="other"){b.certificate={'gauge':0,'certified':1,'has_double_leg':0,'has_ladder_leg':0,'has_other_leg':0,'height':0,'id':-1,'cost':0,'is_default':"no",'length':0,'map_id':0,'name':"Other"};b.certificate_other_name=newParams.lean_p_e_i_other!=''?newParams.lean_p_e_i_other:'Other';b.certificate_price=0;t_c_b=parseFloat(t_c_b)+parseFloat(b.certificate_price);}if(newParams.continous_left_lean==true){b.continous_lean=true;}else{b.continous_lean=false;}b.pricing_data=data;b.t_c_b=parseFloat(t_c_b);_reducer.const_var.leantoCompare.push(b);}else{removeDataFromArrayCompare(1);}setComparePricingData(iiD);};exports.cPforLLeanOnlyComparision=cPforLLeanOnlyComparision;var CheckLegsByResponseForCompare=function CheckLegsByResponseForCompare(newParams){var j=0;// console.log(const_var.ConditionArrCompare,"const_var.ConditionArrCompare[newParams.p_b_t]",newParams.p_b_t)
if(_reducer.const_var.ConditionArrCompare[newParams.p_b_t].length>0&&_reducer.const_var.ConditionArrCompare[newParams.p_b_t][newParams.p_r_s]!=undefined){for(var i=0;i<=_reducer.const_var.ConditionArrCompare[newParams.p_b_t][newParams.p_r_s].length-1;i++){_reducer.const_var.ConditionArrCompare[newParams.p_b_t][newParams.p_r_s][i].min_width=_reducer.const_var.ConditionArrCompare[newParams.p_b_t][newParams.p_r_s][i].min_width==''||_reducer.const_var.ConditionArrCompare[newParams.p_b_t][newParams.p_r_s][i].min_width==null?0:_reducer.const_var.ConditionArrCompare[newParams.p_b_t][newParams.p_r_s][i].min_width;_reducer.const_var.ConditionArrCompare[newParams.p_b_t][newParams.p_r_s][i].min_height=_reducer.const_var.ConditionArrCompare[newParams.p_b_t][newParams.p_r_s][i].min_height==''||_reducer.const_var.ConditionArrCompare[newParams.p_b_t][newParams.p_r_s][i].min_height==null?0:_reducer.const_var.ConditionArrCompare[newParams.p_b_t][newParams.p_r_s][i].min_height;if(_reducer.const_var.ConditionArrCompare[newParams.p_b_t][newParams.p_r_s][i].min_width==0&&_reducer.const_var.ConditionArrCompare[newParams.p_b_t][newParams.p_r_s][i].min_height<=newParams.p_h&&_reducer.const_var.ConditionArrCompare[newParams.p_b_t][newParams.p_r_s][i].max_height>=newParams.p_h){if(_reducer.const_var.ConditionArrCompare[newParams.p_b_t][newParams.p_r_s][i].is_default=="Y"){newParams.p_e_l=true;}else{newParams.p_e_l=false;}newParams.hasDoublelegName=_reducer.const_var.ConditionArrCompare[newParams.p_b_t][newParams.p_r_s][i].name;newParams.legstype=_reducer.const_var.ConditionArrCompare[newParams.p_b_t][newParams.p_r_s][i].legs_type=="reinforced"?"double":_reducer.const_var.ConditionArrCompare[newParams.p_b_t][newParams.p_r_s][i].legs_type;}else if(_reducer.const_var.ConditionArrCompare[newParams.p_b_t][newParams.p_r_s][i].min_height==0&&_reducer.const_var.ConditionArrCompare[newParams.p_b_t][newParams.p_r_s][i].min_width<=newParams.p_w&&_reducer.const_var.ConditionArrCompare[newParams.p_b_t][newParams.p_r_s][i].max_width>=newParams.p_w){if(_reducer.const_var.ConditionArrCompare[newParams.p_b_t][newParams.p_r_s][i].is_default=="Y"){newParams.p_e_l=true;}else{newParams.p_e_l=false;}newParams.hasDoublelegName=_reducer.const_var.ConditionArrCompare[newParams.p_b_t][newParams.p_r_s][i].name;newParams.legstype=_reducer.const_var.ConditionArrCompare[newParams.p_b_t][newParams.p_r_s][i].legs_type=="reinforced"?"double":_reducer.const_var.ConditionArrCompare[newParams.p_b_t][newParams.p_r_s][i].legs_type;}else{j=j+1;if(j==_reducer.const_var.ConditionArrCompare[newParams.p_b_t][newParams.p_r_s].length){newParams.hasDoublelegName='';newParams.p_e_l=false;newParams.legstype="single";}}}}else{newParams.p_e_l=false;newParams.hasDoublelegName='';newParams.legstype="single";}newParams.p_e_l=newParams.p_e_l;newParams.legstype=newParams.legstype;};exports.CheckLegsByResponseForCompare=CheckLegsByResponseForCompare;var setComparePricingData=function setComparePricingData(iiD,chkflag){var newParams=_reducer.const_var.ComparisionDataArray[iiD].paramsData;var pricing_data=_reducer.const_var.ComparisionDataArray[iiD].pricing_data;CheckLegsByResponseForCompare(newParams);_reducer.const_var.newTaxCalcuArray=[];_reducer.const_var.sendTaxarray=[];var CalculatesurchargeFees=0;var data=pricing_data;var b_f_o_J={};var t_c_b=0;var t_c=0;var post_data={};post_data['building']={};var a_p_d_a=data;var a,b={};var extra_items=[];var extra_price_cal=[];var activeLean="";var CalCulateRoofBasePrice=0;var CalCulateRoofUtilityEndPrice=0;var CalCulateRoofEndClosePrice=0;var CalCulateRoofEndGablePrice=0;var BuildingPriceArrarNew={};var heightFullData="";_reducer.const_var.b_r_p_a_Compare={};_reducer.const_var.order_extra_items_Compare=JSON.parse(JSON.stringify(_reducer.const_var.order_extra_items));a={'state_name':_reducer.const_var.stateNameAcordingAPI[newParams.p_s_n].name,'state_list':newParams.p_s_n,'state':newParams.p_s_n,'manufacturer_name':_reducer.const_var.stateManufacturerAcordingAPIDiscount['manuName'][newParams.m_s_n],'manufacturer':newParams.m_s_n,"building_type":newParams.p_b_t,"building_type_name":newParams.building_type_name,"display_building_type_name":newParams.building_type_name,"checkeditName":newParams.checkeditName,"other_building_type_name":newParams.other_building_type_name,"roof_style":newParams.p_r_s,"roof_style_name":_reducer.const_var.TypeEnumID[newParams.p_r_s],"installation_surface":ConvStr(_reducer.const_var.installationValue[newParams.p_i_s]),"width":newParams.p_b_t=="2"?newParams.p_w+24:newParams.p_w,"length":newParams.p_d,"height":newParams.p_h,"frame_length":newParams.frame_length,"gauge":_reducer.const_var.g_v,"front_wall":newParams.p_f_w=="Extended Gable"?'extended_gable':ConvStr(newParams.p_f_w),"back_wall":newParams.p_b_w=="Extended Gable"?'extended_gable':ConvStr(newParams.p_b_w),"left_wall":ConvStr(newParams.p_l_w),"right_wall":ConvStr(newParams.p_r_w),"back_wall_price":0,"front_wall_price":0,"left_wall_price":0,"right_wall_price":0,"front_wall_vertical":newParams.p_v_w,"back_wall_vertical":newParams.p_v_w,"left_wall_vertical":newParams.p_v_w,"right_wall_vertical":newParams.p_v_w,"vertical_walls":newParams.p_v_w,"heavy_snow":_reducer.const_var.CheckSnowLoadValue==35?0:1,"certificate":_reducer.const_var.c_f_aCer[newParams.p_e_i],"singleSlope":newParams.singleSlope,"certificate_name":_reducer.const_var.c_f_aCer[newParams.p_e_i]!=undefined?_reducer.const_var.c_f_aCer[newParams.p_e_i].name:''};if(data.roof_pitch!=undefined&&data.roof_pitch.length>0){_reducer.const_var.b_r_p_a_Compare=[];_reducer.const_var.b_r_p_l_to_a_Compare=[];for(var i=0;i<=data.roof_pitch.length-1;i++){var repl=data.roof_pitch[i].roof_pitch.split("/");_reducer.const_var.b_r_p_a_Compare[data.roof_pitch[i].roof_pitch.replace("/","")]=data.roof_pitch[i];if(data.roof_pitch[i].is_default=="yes"&&data.roof_pitch[i].roof_pitch!=_reducer.const_var.post_data.building.roof_pitch){newParams.b_r_p=data.roof_pitch[i].roof_pitch.replace("/","");newParams.p_r_p=data.roof_pitch[i].roof_pitch.split("/")[0];}else if(data.roof_pitch[i].roof_pitch==_reducer.const_var.post_data.building.roof_pitch){newParams.b_r_p=data.roof_pitch[i].roof_pitch.replace("/","");}}}_reducer.const_var.insulationJsonCompare=[];_reducer.const_var.insulationPriceJsonCompare=[];if(data.insulation.length>0){_reducer.const_var.insulationJsonCompare[0]='Select';for(var i=0;i<data.insulation.length;i++){_reducer.const_var.insulationJsonCompare[data.insulation[i].insulation_id]=data.insulation[i].name;_reducer.const_var.insulationPriceJsonCompare[data.insulation[i].insulation_id]=data.insulation[i];}}if(data.side[0].side_close_cost==0){newParams.p_v_w=true;a.vertical_walls=newParams.p_v_w;}//a.certificate = const_var.main_extraItems_arr_Compare.filter(data=>data.certificate_id==newParams.p_e_i &&((data.gauge==0 || newParams.gauge_val == data.gauge)))[0];
//console.log(const_var.main_extraItems_arr_Compare,certificateArray)
data=a_p_d_a;if(newParams.p_u_c==true){data.side=data.side;data.panel=data.panel;data.end=data.end;heightFullData=data.full_length_side!=undefined?data.full_length_side:data.side;}else{data.side=data.full_length_side!=undefined?data.full_length_side:data.side;data.panel=data.full_length_panel!=undefined?data.full_length_panel:data.panel;data.end=data.central_end!=undefined&&data.central_end.length>0?data.central_end:data.end;heightFullData=data.full_length_side!=undefined?data.full_length_side:data.side;if(newParams.add_left_lean==true&&_reducer.const_var.leanGetDataLeftComparision!=''&&_reducer.const_var.leanGetDataLeftComparision.central_side!=undefined&&_reducer.const_var.leanGetDataLeftComparision.central_side.length>0){data.side=_reducer.const_var.leanGetDataLeftComparision.central_side;heightFullData=_reducer.const_var.leanGetDataLeftComparision.central_side_full_length!=undefined?_reducer.const_var.leanGetDataLeftComparision.central_side_full_length:data.side;}if(newParams.add_left_lean==true&&_reducer.const_var.leanGetDataLeftComparision!=''&&_reducer.const_var.leanGetDataLeftComparision.central_end!=undefined&&_reducer.const_var.leanGetDataLeftComparision.central_end.length>0){data.end=_reducer.const_var.leanGetDataLeftComparision.central_end;}if(newParams.add_right_lean==true&&_reducer.const_var.leanGetDataRightComparision&&_reducer.const_var.leanGetDataRightComparision.central_side!=undefined&&_reducer.const_var.leanGetDataRightComparision.central_side.length>0){data.side=_reducer.const_var.leanGetDataRightComparision.central_side;heightFullData=_reducer.const_var.leanGetDataRightComparision.central_side_full_length!=undefined?_reducer.const_var.leanGetDataRightComparision.central_side_full_length:data.side;}if(newParams.add_right_lean==true&&_reducer.const_var.leanGetDataRightComparision&&_reducer.const_var.leanGetDataRightComparision.central_end!=undefined&&_reducer.const_var.leanGetDataRightComparision.central_end.length>0){data.end=_reducer.const_var.leanGetDataRightComparision.central_end;}}var LeftWallSidePrice=data.side;if(newParams.singleSlope==true){LeftWallSidePrice=data.side_slope_height!=undefined&&data.side_slope_height.length>0?data.side_slope_height:data.side;}if(data.connection_fees!=undefined&&data.connection_fees.length>0){if(newParams.add_right_lean==true&&_reducer.const_var.leanGetDataRightComparision!=""&&newParams.add_left_lean==true&&_reducer.const_var.leanGetDataLeftComparision!=""){a.connection_fee_side=_reducer.const_var.leanGetDataRightComparision.connection_fees.length>0?_reducer.const_var.leanGetDataRightComparision.connection_fees[0].cost+_reducer.const_var.leanGetDataLeftComparision.connection_fees[0].cost:0;}else if(newParams.add_right_lean==false&&newParams.add_left_lean==true&&_reducer.const_var.leanGetDataLeftComparision!=""){a.connection_fee_side=_reducer.const_var.leanGetDataLeftComparision.connection_fees.length>0?_reducer.const_var.leanGetDataLeftComparision.connection_fees[0].cost:0;}else if(newParams.add_right_lean==true&&_reducer.const_var.leanGetDataRightComparision!=""&&newParams.add_left_lean==false){a.connection_fee_side=_reducer.const_var.leanGetDataRightComparision.connection_fees.length>0?_reducer.const_var.leanGetDataRightComparision.connection_fees[0].cost:0;}else{a.connection_fee_side=data.connection_fees[0].cost;}}else{a.connection_fee_side=0;}if(data.connection_fees!=undefined&&data.connection_fees.length>0){//b.connection_fee_side = (newParams.b_h_t2 )?(data.connection_fees[0].cost * 2):(data.connection_fees[0].cost);
if(newParams.add_right_lean==true&&_reducer.const_var.leanGetDataRightComparision!=""&&newParams.add_left_lean==true&&_reducer.const_var.leanGetDataLeftComparision!=""){a.connection_fee_end=data.connection_fees[0].end_cost+_reducer.const_var.leanGetDataRightComparision.connection_fees[0].end_cost+_reducer.const_var.leanGetDataLeftComparision.connection_fees[0].end_cost;}else if(newParams.add_right_lean==false&&newParams.add_left_lean==true&&_reducer.const_var.leanGetDataLeftComparision!=""){a.connection_fee_end=data.connection_fees[0].end_cost+_reducer.const_var.leanGetDataLeftComparision.connection_fees[0].end_cost;}else if(newParams.add_right_lean==true&&_reducer.const_var.leanGetDataRightComparision!=""&&newParams.add_left_lean==false){a.connection_fee_end=data.connection_fees[0].end_cost+_reducer.const_var.leanGetDataRightComparision.connection_fees[0].end_cost;}else{a.connection_fee_end=data.connection_fees[0].end_cost;}}else{a.connection_fee_end=0;}post_data['building']=_objectSpread({},a,{},b);t_c=0;var vertiP=0;var vertiP2=0;var mapVal=_reducer.const_var.map[newParams.p_r_s];var utilityLen=newParams.p_u_c==true?Number(newParams.p_u_t):newParams.p_d;if(data.base.length>0){var chkGauge=data.base.filter(function(data){return data.gauge==_reducer.const_var.g_v;});for(var i=0;i<data.base.length;i++){if(_reducer.const_var.g_v==data.base[i].gauge){post_data['building'].roof_style_price=data.base[i][mapVal];t_c=parseFloat(t_c)+parseFloat(post_data['building'].roof_style_price);CalCulateRoofBasePrice=post_data['building'].roof_style_price;post_data['building'].gauge=data.base[i].gauge;}else if(chkGauge==0){post_data['building'].roof_style_price=data.base[i][mapVal];t_c=parseFloat(t_c)+parseFloat(post_data['building'].roof_style_price);CalCulateRoofBasePrice=post_data['building'].roof_style_price;post_data['building'].gauge=data.base[i].gauge;}}}else{post_data['building'].roof_style_price=0;t_c=parseFloat(t_c)+parseFloat(post_data['building'].roof_style_price);CalCulateRoofBasePrice=post_data['building'].roof_style_price;}_reducer.const_var.ComparisionDataArray[iiD].paramsData.gauge_val=post_data['building'].gauge;post_data['building'].certificateArray=[{value:0,label:"Select"}];_reducer.const_var.main_extraItems_arr_Compare=[];if(data.certificate!=undefined&&data.certificate.length>0){newParams.p_e_i="Select";//newParams.certificateArray['Select'] = 0;
for(var i=0;i<=data.certificate.length-1;i++){if(_reducer.params.p_e_l==true){if(data.certificate[i].has_other_leg==1){_reducer.const_var.main_extraItems_arr_Compare[data.certificate[i].certificate_id]=data.certificate[i];if(data.certificate[i].gauge==0||post_data['building'].gauge==data.certificate[i].gauge){post_data['building'].certificateArray.push({value:data.certificate[i].certificate_id,label:data.certificate[i].name});}if(data.certificate[i].is_default=="yes"&&(data.certificate[i].gauge==0||post_data['building'].gauge==data.certificate[i].gauge)){newParams.p_e_i=newParams.p_e_i=="Select"?data.certificate[i].certificate_id:newParams.p_e_i;}}}else{if(data.certificate[i].has_other_leg==0){_reducer.const_var.main_extraItems_arr_Compare[data.certificate[i].certificate_id]=data.certificate[i];if(data.certificate[i].gauge==0||post_data['building'].gauge==data.certificate[i].gauge){post_data['building'].certificateArray.push({value:data.certificate[i].certificate_id,label:data.certificate[i].name});}if(data.certificate[i].is_default=="yes"&&(data.certificate[i].gauge==0||post_data['building'].gauge==data.certificate[i].gauge)){newParams.p_e_i=newParams.p_e_i=="Select"?data.certificate[i].certificate_id:newParams.p_e_i;}}}}}if(chkflag!=undefined){newParams.p_e_i=chkflag;// const_var.main_extraItems_arr_Compare.filter(data=>{console.log(data,data.certificate_id,"==",newParams.p_e_i)})
post_data['building'].certificate=_reducer.const_var.main_extraItems_arr_Compare.filter(function(data){return data.certificate_id==newParams.p_e_i&&(data.gauge==0||post_data['building'].gauge==data.gauge);})[0];}else{post_data['building'].certificate='';}post_data['building'].newCertificate=newParams.p_e_i=="Select"?0:newParams.p_e_i;if(post_data['building'].connection_fee_side!=undefined){t_c=parseFloat(t_c)+parseFloat(post_data['building'].connection_fee_side);}if(post_data['building'].connection_fee_end!=undefined){t_c=parseFloat(t_c)+parseFloat(post_data['building'].connection_fee_end);}if(newParams.p_l_w=="Close"){post_data['building'].left_wall_price=newParams.p_v_w==true?LeftWallSidePrice[0].vertical_side_cost+LeftWallSidePrice[0].side_close_cost:LeftWallSidePrice[0].side_close_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].left_wall_price);}if(newParams.p_l_w=="Half_Close"){post_data['building'].left_wall_price=newParams.p_v_w==true?(LeftWallSidePrice[0].half_vertical_side_cost+LeftWallSidePrice[0].half_side_close_cost).toFixed(2):LeftWallSidePrice[0].half_side_close_cost.toFixed(2);t_c=parseFloat(t_c)+parseFloat(post_data['building'].left_wall_price);}if(newParams.p_l_w=="One_Fourth_Close"){post_data['building'].left_wall_price=newParams.p_v_w==true?(LeftWallSidePrice[0].one_fourth_vertical_side_cost+LeftWallSidePrice[0].one_fourth_side_close_cost).toFixed(2):LeftWallSidePrice[0].one_fourth_side_close_cost.toFixed(2);t_c=parseFloat(t_c)+parseFloat(post_data['building'].left_wall_price);}if(newParams.p_l_w=="Three_Fourth_Close"){post_data['building'].left_wall_price=newParams.p_v_w==true?(LeftWallSidePrice[0].three_fourth_vertical_side_cost+LeftWallSidePrice[0].three_fourth_side_close_cost).toFixed(2):LeftWallSidePrice[0].three_fourth_side_close_cost.toFixed(2);t_c=parseFloat(t_c)+parseFloat(post_data['building'].left_wall_price);}if(newParams.p_l_w!=="Close"&&newParams.p_l_w!=="Open"&&newParams.p_l_w!=="Half_Close"&&newParams.p_l_w!=="One_Fourth_Close"&&newParams.p_l_w!=="Three_Fourth_Close"){post_data['building'].left_wall_price=newParams.p_v_w==true?data.panel[0].vertical_panel_cost*newParams.p_l_w:data.panel[0].cost*newParams.p_l_w;t_c=parseFloat(t_c)+parseFloat(post_data['building'].left_wall_price);}if(newParams.p_r_w=="Close"){post_data['building'].right_wall_price=newParams.p_v_w==true?data.side[0].vertical_side_cost+data.side[0].side_close_cost:data.side[0].side_close_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].right_wall_price);}if(newParams.p_r_w=="Half_Close"){post_data['building'].right_wall_price=newParams.p_v_w==true?data.side[0].half_vertical_side_cost+data.side[0].half_side_close_cost:data.side[0].half_side_close_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].right_wall_price);}if(newParams.p_r_w=="One_Fourth_Close"){post_data['building'].right_wall_price=newParams.p_v_w==true?data.side[0].one_fourth_vertical_side_cost+data.side[0].one_fourth_side_close_cost:data.side[0].one_fourth_side_close_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].right_wall_price);}if(newParams.p_r_w=="Three_Fourth_Close"){post_data['building'].right_wall_price=newParams.p_v_w==true?data.side[0].three_fourth_vertical_side_cost+data.side[0].three_fourth_side_close_cost:data.side[0].three_fourth_side_close_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].right_wall_price);}if(newParams.p_r_w!=="Close"&&newParams.p_r_w!=="Open"&&newParams.p_r_w!=="Half_Close"&&newParams.p_r_w!=="One_Fourth_Close"&&newParams.p_r_w!=="Three_Fourth_Close"){post_data['building'].right_wall_price=newParams.p_v_w==true?data.panel[0].vertical_panel_cost*newParams.p_r_w:data.panel[0].cost*newParams.p_r_w;t_c=parseFloat(t_c)+parseFloat(post_data['building'].right_wall_price);}if(newParams.p_f_w=="Close"){post_data['building'].front_wall_price=newParams.p_v_w==true?data.end[0].vertical_ends_cost+data.end[0].end_close_cost:data.end[0].end_close_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].front_wall_price);CalCulateRoofEndClosePrice=post_data['building'].front_wall_price;}if(newParams.p_f_w=="Half_Close"){post_data['building'].front_wall_price=newParams.p_v_w==true?data.end[0].half_vertical_ends_cost+data.end[0].half_end_close_cost:data.end[0].half_end_close_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].front_wall_price);CalCulateRoofEndClosePrice=post_data['building'].front_wall_price;}if(newParams.p_f_w=="One_Fourth_Close"){post_data['building'].front_wall_price=newParams.p_v_w==true?data.end[0].one_fourth_vertical_ends_cost+data.end[0].one_fourth_end_close_cost:data.end[0].one_fourth_end_close_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].front_wall_price);CalCulateRoofEndClosePrice=post_data['building'].front_wall_price;}if(newParams.p_f_w=="Three_Fourth_Close"){post_data['building'].front_wall_price=newParams.p_v_w==true?data.end[0].three_fourth_vertical_ends_cost+data.end[0].three_fourth_end_close_cost:data.end[0].three_fourth_end_close_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].front_wall_price);CalCulateRoofEndClosePrice=post_data['building'].front_wall_price;}if(newParams.p_f_w!=="Close"&&newParams.p_f_w!=="Open"&&newParams.p_f_w!=="Half_Close"&&newParams.p_f_w!=="One_Fourth_Close"&&newParams.p_f_w!=="Three_Fourth_Close"){if(newParams.p_f_w=="Gable"){if(newParams.p_v_w==true){if(_reducer.const_var.main_extraItems_arr_Compare[newParams.p_e_i]!=undefined&&_reducer.const_var.main_extraItems_arr_Compare[newParams.p_e_i].certified==1){//t_c = (data.gable_end[0].certified!=0)?t_c + (data.gable_end[0].vertical_certified) + data.gable_end[0].certified :t_c + (data.gable_end[0].vertical) + data.gable_end[0].uncertified;
vertiP=vertiP+data.gable_end[0].vertical_certified+data.gable_end[0].certified;}else{//t_c = t_c + (data.gable_end[0].vertical) + (data.gable_end[0].uncertified);
vertiP=vertiP+data.gable_end[0].vertical+data.gable_end[0].uncertified;}}else{if(_reducer.const_var.main_extraItems_arr_Compare[newParams.p_e_i]!=undefined&&_reducer.const_var.main_extraItems_arr_Compare[newParams.p_e_i].certified==1){//t_c = (data.gable_end[0].certified!=0)?t_c + data.gable_end[0].certified :t_c + data.gable_end[0].uncertified;
vertiP=vertiP+data.gable_end[0].certified;}else{//t_c = t_c + data.gable_end[0].uncertified;
vertiP=vertiP+data.gable_end[0].uncertified;}}}else{if(newParams.p_v_w==true){//t_c = t_c + (data.gable_end[0].vertical_extended) + (data.gable_end[0].extended);
vertiP=vertiP+data.gable_end[0].vertical_extended+data.gable_end[0].extended;}else{//t_c = t_c+ (data.gable_end[0].extended);
vertiP=vertiP+data.gable_end[0].extended;}}post_data['building'].front_wall_price=vertiP;t_c=parseFloat(t_c)+parseFloat(post_data['building'].front_wall_price);//t_c = (const_var.c_f_a[newParams.p_e_i]==0)?t_c + 0:(data.gableCost[0].certified_cost) + t_c;
CalCulateRoofEndGablePrice=post_data['building'].front_wall_price;}if(newParams.p_b_w=="Close"){if(newParams.p_u_c!=true){post_data['building'].back_wall_price=newParams.p_v_w==true?data.end[0].vertical_ends_cost+data.end[0].end_close_cost:data.end[0].end_close_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].back_wall_price);CalCulateRoofEndClosePrice=CalCulateRoofEndClosePrice+post_data['building'].back_wall_price;}else{post_data['building'].back_wall_price=0;t_c=parseFloat(t_c)+parseFloat(post_data['building'].back_wall_price);CalCulateRoofEndClosePrice=CalCulateRoofEndClosePrice+post_data['building'].back_wall_price;}}if(newParams.p_b_w=="Half_Close"){post_data['building'].back_wall_price=newParams.p_v_w==true?data.end[0].half_vertical_ends_cost+data.end[0].half_end_close_cost:data.end[0].half_end_close_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].back_wall_price);CalCulateRoofEndClosePrice=post_data['building'].back_wall_price;}if(newParams.p_b_w=="One_Fourth_Close"){post_data['building'].back_wall_price=newParams.p_v_w==true?data.end[0].one_fourth_vertical_ends_cost+data.end[0].one_fourth_end_close_cost:data.end[0].one_fourth_end_close_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].back_wall_price);CalCulateRoofEndClosePrice=post_data['building'].back_wall_price;}if(newParams.p_b_w=="Three_Fourth_Close"){post_data['building'].back_wall_price=newParams.p_v_w==true?data.end[0].three_fourth_vertical_ends_cost+data.end[0].three_fourth_end_close_cost:data.end[0].three_fourth_end_close_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].back_wall_price);CalCulateRoofEndClosePrice=post_data['building'].back_wall_price;}if(newParams.p_b_w!=="Close"&&newParams.p_b_w!=="Open"&&newParams.p_b_w!=="Half_Close"&&newParams.p_b_w!=="One_Fourth_Close"&&newParams.p_b_w!=="Three_Fourth_Close"){if(newParams.p_b_w=="Gable"){if(newParams.p_v_w==true){if(_reducer.const_var.main_extraItems_arr_Compare[newParams.p_e_i]!=undefined&&_reducer.const_var.main_extraItems_arr_Compare[newParams.p_e_i].certified==1){//t_c = (data.gable_end[0].certified!=0)?t_c + (data.gable_end[0].vertical_certified) + data.gable_end[0].certified :t_c + (data.gable_end[0].vertical) + data.gable_end[0].uncertified;
vertiP2=vertiP2+data.gable_end[0].vertical_certified+data.gable_end[0].certified;}else{//t_c = t_c + (data.gable_end[0].vertical) + (data.gable_end[0].uncertified);
vertiP2=vertiP2+data.gable_end[0].vertical+data.gable_end[0].uncertified;}}else{if(_reducer.const_var.main_extraItems_arr_Compare[newParams.p_e_i]!=undefined&&_reducer.const_var.main_extraItems_arr_Compare[newParams.p_e_i].certified==1){//t_c = (data.gable_end[0].certified!=0)?t_c + data.gable_end[0].certified :t_c + data.gable_end[0].uncertified;
vertiP2=vertiP2+data.gable_end[0].certified;}else{//t_c = t_c + data.gable_end[0].uncertified;
vertiP2=vertiP2+data.gable_end[0].uncertified;}}}else{if(newParams.p_v_w==true){//t_c = t_c + (data.gable_end[0].vertical_extended) + (data.gable_end[0].extended);
vertiP2=vertiP2+data.gable_end[0].vertical_extended+data.gable_end[0].extended;}else{//t_c = t_c+ (data.gable_end[0].extended);
vertiP2=vertiP2+data.gable_end[0].extended;}}post_data['building'].back_wall_price=vertiP2;t_c=parseFloat(t_c)+parseFloat(post_data['building'].back_wall_price);CalCulateRoofEndGablePrice=CalCulateRoofEndGablePrice+post_data['building'].back_wall_price;}if(newParams.p_c_p_l==true){post_data['building'].left_wall_cut_panel_price=data.panel[0].cut_panel_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].left_wall_cut_panel_price);post_data['building'].left_wall_cutpanel=true;// t_c = parseFloat(t_c) + parseFloat((data.panel[0].cut_panel_cost));
// post_data['building'].left_wall_price = post_data['building'].left_wall_price + (data.panel[0].cut_panel_cost);
// post_data['building'].left_wall_cutpanel = true;
}else{post_data['building'].left_wall_cut_panel_price=0;t_c=parseFloat(t_c)+parseFloat(post_data['building'].left_wall_cut_panel_price);}if(newParams.p_c_p_r==true){post_data['building'].right_wall_cut_panel_price=data.panel[0].cut_panel_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].right_wall_cut_panel_price);post_data['building'].right_wall_cutpanel=true;// t_c = parseFloat(t_c) + parseFloat((data.panel[0].cut_panel_cost));
// post_data['building'].right_wall_price = post_data['building'].right_wall_price + (data.panel[0].cut_panel_cost);
// post_data['building'].right_wall_cutpanel = true;
}else{post_data['building'].right_wall_cut_panel_price=0;t_c=parseFloat(t_c)+parseFloat(post_data['building'].right_wall_cut_panel_price);}//t_c = t_c + (data.side[0].leg_height_cost); 
if(newParams.p_u_c==true&&data.utility_side.length>0){post_data['building'].utility_price=newParams.p_v_w==true?data.utility_side[0].vertical_side_cost*2+data.end[0].vertical_ends_cost*2+data.utility_side[0].side_close_cost*2+data.end[0].end_close_cost*2:data.utility_side[0].side_close_cost*2+data.end[0].end_close_cost*2;t_c=parseFloat(t_c)+parseFloat(post_data['building'].utility_price);post_data['building'].utility_length=newParams.p_u_t;post_data['building'].has_utility=true;post_data['building'].utility_vertical=newParams.p_v_w?true:false;post_data['building'].utility_on_centers=_reducer.const_var.DistanceArrCompare[newParams.p_b_t][newParams.p_r_s]==undefined?5:_reducer.const_var.DistanceArrCompare[newParams.p_b_t][newParams.p_r_s];if(_reducer.const_var.DistanceArrCompare[newParams.p_b_t][newParams.p_r_s]==5){var b_u_D_p_a=_reducer.const_var.b_u_D_p_a5;}else{var b_u_D_p_a=_reducer.const_var.b_u_D_p_a4;}post_data['building'].utility_length_list=b_u_D_p_a;CalCulateRoofUtilityEndPrice=post_data['building'].utility_price;}else{post_data['building'].has_utility=false;}if(newParams.b_r_p!="Select"){if(_reducer.const_var.b_r_p_a_Compare.length>0){if(_reducer.const_var.b_r_p_a_Compare[newParams.b_r_p].cost_type=="%"){var splitVal=_reducer.const_var.b_r_p_a_Compare[newParams.b_r_p].percentage_of!=undefined&&_reducer.const_var.b_r_p_a_Compare[newParams.b_r_p].percentage_of!=0?_reducer.const_var.b_r_p_a_Compare[newParams.b_r_p].percentage_of.split(","):0;var splval=0;if(splitVal!=0){if(splitVal.includes("1")!=false){splval=splval+CalCulateRoofBasePrice;}if(splitVal.includes("2")!=false){splval=splval+CalCulateRoofEndClosePrice;}if(splitVal.includes("3")!=false){splval=splval+CalCulateRoofEndGablePrice;}if(CalCulateRoofUtilityEndPrice!=0){splval=splval+CalCulateRoofUtilityEndPrice;}}else{splval=splval+CalCulateRoofBasePrice;}var finalCertPrice=splval*_reducer.const_var.b_r_p_a_Compare[newParams.b_r_p].cost/100;t_c=parseFloat(t_c)+parseFloat(finalCertPrice);post_data['building'].roof_pitch=_reducer.const_var.b_r_p_a_Compare[newParams.b_r_p].roof_pitch;post_data['building'].roof_pitch_name=_reducer.const_var.b_r_p_a_Compare[newParams.b_r_p].roof_pitch;post_data['building'].roof_pitch_price=finalCertPrice;}else{post_data['building'].roof_pitch_price=_reducer.const_var.b_r_p_a_Compare[newParams.b_r_p].cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].roof_pitch_price);post_data['building'].roof_pitch=_reducer.const_var.b_r_p_a_Compare[newParams.b_r_p].roof_pitch;post_data['building'].roof_pitch_name=_reducer.const_var.b_r_p_a_Compare[newParams.b_r_p].roof_pitch;}}}else{post_data['building'].roof_pitch="312";post_data['building'].roof_pitch_name="312";post_data['building'].roof_pitch_price=0;}post_data['building'].has_double_leg=newParams.p_e_l;post_data['building'].legstype=newParams.legstype;post_data['building'].distance_on_center=_reducer.const_var.DistanceArrCompare[newParams.p_b_t][newParams.p_r_s]==undefined?5:_reducer.const_var.DistanceArrCompare[newParams.p_b_t][newParams.p_r_s];post_data['building'].hasDoublelegName=newParams.hasDoublelegName!=undefined?newParams.hasDoublelegName:'';//t_c = (const_var.g_v=="12")?(data.gaugeHeight.length>0)?t_c +data.gaugeHeight[0].cost:t_c + 0 :t_c + 0 ;
if(_reducer.const_var.g_v==14){if(heightFullData[0].double_leg_baserail_cost!=0&&newParams.p_e_l==true){post_data['building'].height_price=heightFullData[0].double_leg_baserail_cost!=0?heightFullData[0].double_leg_baserail_cost:heightFullData[0].leg_height_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].height_price);post_data['building'].has_double_leg_price=post_data['building'].height_price;}else{post_data['building'].height_price=heightFullData[0].leg_height_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].height_price);//post_data['building'].height_price = data.side[0].leg_height_cost;
post_data['building'].has_double_leg_price=post_data['building'].height_price;}}if(_reducer.const_var.g_v==12){if(newParams.p_e_l==true){post_data['building'].height_price=heightFullData[0].double_leg_baserail_cost_12!=0?heightFullData[0].double_leg_baserail_cost_12:heightFullData[0].double_leg_baserail_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].height_price);//post_data['building'].height_price =  (data.side[0].double_leg_baserail_cost_12!=0)?(data.side[0].double_leg_baserail_cost_12):(data.side[0].double_leg_baserail_cost);;
post_data['building'].has_double_leg_price=post_data['building'].height_price;}else{post_data['building'].height_price=heightFullData[0].leg_height_cost_12!=0?heightFullData[0].leg_height_cost_12:heightFullData[0].leg_height_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].height_price);//post_data['building'].height_price = (data.side[0].leg_height_cost_12!=0)?(data.side[0].leg_height_cost_12):(data.side[0].leg_height_cost);
post_data['building'].has_double_leg_price=post_data['building'].height_price;}}t_c=parseFloat(t_c_b)+parseFloat(t_c);if(newParams.p_i_o!=0){if(newParams.p_f_i==true){var finalprice=0;var finalprice1=0;//t_c = t_c + parseInt(const_var.insulationPriceJson[newParams.p_i_o].full_building_insulation_cost); 
finalprice=_reducer.const_var.insulationPriceJsonCompare[newParams.p_i_o]!=undefined?parseInt(_reducer.const_var.insulationPriceJsonCompare[newParams.p_i_o].full_building_insulation_cost):0;if(newParams.add_right_lean==true&&_reducer.const_var.leanGetDataRightComparision!=""){// if(newParams.add_storage_check_right==true || (newParams.p_b_c_b_r_f=="Close" &&newParams.p_b_c_b_r_b=="Close" && newParams.p_b_c_b_r=="Close"))
// {
//t_c = t_c + parseInt(const_var.insulationArrayForLeantoRight[newParams.p_i_o].full_building_insulation_cost); 
if(_reducer.const_var.insulationArrayForLeantoRightCompare[newParams.p_i_o]!=undefined){finalprice=finalprice+parseInt(_reducer.const_var.insulationArrayForLeantoRightCompare[newParams.p_i_o].full_building_insulation_cost);}else{finalprice=finalprice+parseInt(0);}finalprice1=finalprice1+finalprice;//}
}if(newParams.add_left_lean==true&&_reducer.const_var.leanGetDataLeftComparision!=""){// if(newParams.add_storage_check==true || (newParams.p_b_c_b_l_f=="Close" &&newParams.p_b_c_b_l_b=="Close" && newParams.p_b_c_b_l=="Close"))
// {
//t_c = t_c + parseInt(const_var.insulationArrayForLeantoLeft[newParams.p_i_o].full_building_insulation_cost); 
if(_reducer.const_var.insulationArrayForLeantoLeftCompare[newParams.p_i_o]!=undefined){finalprice=finalprice+parseInt(_reducer.const_var.insulationArrayForLeantoLeftCompare[newParams.p_i_o].full_building_insulation_cost);}else{finalprice=finalprice+parseInt(0);}finalprice1=finalprice1+finalprice;//}
}post_data['building'].insulation="full";//post_data['building'].insulation_price = finalprice;
post_data['building'].insulation_price=finalprice;t_c=parseFloat(t_c)+parseFloat(post_data['building'].insulation_price);post_data['building'].insulation_type=_reducer.const_var.insulationPriceJsonCompare[newParams.p_i_o]!=undefined?_reducer.const_var.insulationPriceJsonCompare[newParams.p_i_o]:_reducer.const_var.insulationPriceJsonCompare[0];//console.log(post_data['building'].insulation_price,finalprice1,"Roof Full",VUEData.insulation_price,finalprice);
}if(newParams.p_r_o==true){var finalprice=0;//t_c = t_c + parseInt(const_var.insulationPriceJsonCompare[newParams.p_i_o].roof_insulation_cost); 
finalprice=_reducer.const_var.insulationPriceJsonCompare[newParams.p_i_o]!=undefined?parseInt(_reducer.const_var.insulationPriceJsonCompare[newParams.p_i_o].roof_insulation_cost):0;finalprice1=_reducer.const_var.insulationPriceJsonCompare[newParams.p_i_o]!=undefined?parseInt(_reducer.const_var.insulationPriceJsonCompare[newParams.p_i_o].roof_insulation_cost):0;var finalprice1=0;if(newParams.add_right_lean==true&&_reducer.const_var.leanGetDataRightComparision!=""){// if(newParams.add_storage_check_right==true || (newParams.p_b_c_b_r_f=="Close" &&newParams.p_b_c_b_r_b=="Close" && newParams.p_b_c_b_r=="Close"))
// {
//t_c = t_c + parseInt(const_var.insulationArrayForLeantoRight[newParams.p_i_o].roof_insulation_cost); 
if(_reducer.const_var.insulationArrayForLeantoRight[newParams.p_i_o]!=undefined){finalprice=finalprice+parseInt(_reducer.const_var.insulationArrayForLeantoRight[newParams.p_i_o].roof_insulation_cost);}else{finalprice=finalprice+parseInt(0);}finalprice1=finalprice1+finalprice;//}
}if(newParams.add_left_lean==true&&_reducer.const_var.leanGetDataLeftComparision!=""){// if(newParams.add_storage_check==true || (newParams.p_b_c_b_l_f=="Close" &&newParams.p_b_c_b_l_b=="Close" && newParams.p_b_c_b_l=="Close"))
// {
//t_c = t_c + parseInt(const_var.insulationArrayForLeantoLeft[newParams.p_i_o].roof_insulation_cost); 
if(_reducer.const_var.insulationArrayForLeantoLeft[newParams.p_i_o]!=undefined){finalprice=finalprice+parseInt(_reducer.const_var.insulationArrayForLeantoLeft[newParams.p_i_o].roof_insulation_cost);finalprice1=finalprice1+parseInt(_reducer.const_var.insulationArrayForLeantoLeft[newParams.p_i_o].roof_insulation_cost);}else{finalprice=finalprice+parseInt(0);finalprice1=finalprice1+parseInt(0);}//}
}post_data['building'].insulation="roof_only";//post_data['building'].insulation_price = finalprice;
post_data['building'].insulation_price=finalprice;t_c=parseFloat(t_c)+parseFloat(post_data['building'].insulation_price);post_data['building'].insulation_type=_reducer.const_var.insulationPriceJsonCompare[newParams.p_i_o]!=undefined?_reducer.const_var.insulationPriceJsonCompare[newParams.p_i_o]:_reducer.const_var.insulationPriceJsonCompare[0];//console.log(post_data['building'].insulation_price,finalprice1,"Roof only",VUEData.insulation_price,finalprice);
}}else{post_data['building'].insulation_price=0;}if(_reducer.const_var.inputs!=undefined&&_reducer.const_var.inputs.length>0){_reducer.const_var.inputs.map(function(val,index){if(val!=null){if(val.additional_quantity!=0&&val.additional_quantity!=null){if(val.additional_name!=null&&val.additional_quantity!=null){extra_items.push({'item_name':val.additional_name,'item_quantity':parseInt(val.additional_quantity),'item_price':0});t_c=parseFloat(t_c)+0;}}}});post_data['building'].inputs=_reducer.const_var.inputs;}if(_reducer.const_var.Componentinputs!=undefined&&_reducer.const_var.Componentinputs.length>0){_reducer.const_var.Componentinputs.map(function(val,index){if(val!=null){if(val.additional_name!=null&&val.additional_quantity!=null){if(val.additional_quantity!=0){extra_items.push({'item_name':val.additional_name,'item_quantity':parseInt(val.additional_quantity),'item_price':0});t_c=parseFloat(t_c)+0;}}}});post_data['building'].Componentinputs=_reducer.const_var.Componentinputs;}if(_reducer.const_var.ExtraItemsFeaturesArray!=undefined&&_reducer.const_var.ExtraItemsFeaturesArray.length>0){var newCost=0;_reducer.const_var.ExtraItemsFeaturesArray.map(function(val,index){newCost=val.cost;if(data.extra_items.length>0){if(data.extra_items[0].checkbox.length>0){data.extra_items[0].checkbox.map(function(value,key){if(value.name==val.name){newCost=value.cost;}});}else{newCost=0;}}if(val!=null&&val.is_checked==true){var leantoExtraItemCheckBoxCost=0;if(newParams.add_left_lean&&_reducer.const_var.leanGetDataLeftComparision){_reducer.const_var.leanGetDataLeftComparision.extra_items[0].checkbox.map(function(item){if(item.name==val.name){leantoExtraItemCheckBoxCost=leantoExtraItemCheckBoxCost+item.cost;}});}if(newParams.add_right_lean&&_reducer.const_var.leanGetDataRightComparision){_reducer.const_var.leanGetDataRightComparision.extra_items[0].checkbox.map(function(item){if(item.name==val.name){leantoExtraItemCheckBoxCost=leantoExtraItemCheckBoxCost+item.cost;}});}t_c=parseFloat(t_c)+parseFloat(newCost)+parseFloat(leantoExtraItemCheckBoxCost);extra_items.push({'is_edit':false,'item_name':val.label,'other_item_name':val.name,'item_quantity':parseInt(val.quantity),'item_price':parseFloat(newCost)+parseFloat(leantoExtraItemCheckBoxCost)});}});post_data['building'].ExtraItemsFeaturesArray=_reducer.const_var.ExtraItemsFeaturesArray;}if(_reducer.const_var.ExtraItemsFeaturesQuantityArray!=undefined&&_reducer.const_var.ExtraItemsFeaturesQuantityArray.length>0){var _newCost=[];var newCost1=0;_reducer.const_var.ExtraItemsFeaturesQuantityArray.map(function(val,index){_newCost[index]=val.cost;if(data.extra_items.length>0){if(data.extra_items[0].checkbox_quantity.length>0){var _filterData=data.extra_items[0].checkbox_quantity.filter(function(data){return data.label==val.label;});if(_filterData.length>0){newCost1=_filterData[0].cost;}else{newCost1=0;}}else{_newCost[index]=0;newCost1=0;}if(val!=null&&val.is_checked==true){var leantoExtraItemCheckBoxQuantityCost=0;if(newParams.add_left_lean&&_reducer.const_var.leanGetDataLeftComparision){_reducer.const_var.leanGetDataLeftComparision.extra_items[0].checkbox_quantity.map(function(item){if(item.name==val.name){leantoExtraItemCheckBoxQuantityCost=leantoExtraItemCheckBoxQuantityCost+item.cost;}});}if(newParams.add_right_lean&&_reducer.const_var.leanGetDataRightComparision){_reducer.const_var.leanGetDataRightComparision.extra_items[0].checkbox_quantity.map(function(item){if(item.name==val.name){leantoExtraItemCheckBoxQuantityCost=leantoExtraItemCheckBoxQuantityCost+item.cost;}});}t_c=parseFloat(t_c)+parseFloat(val.quantity*newCost1)+parseFloat(val.quantity*leantoExtraItemCheckBoxQuantityCost);extra_items.push({'is_edit':false,'item_name':val.label,'other_item_name':val.name,'item_quantity':parseInt(val.quantity),'item_price':parseInt(val.quantity*newCost1)+parseInt(val.quantity*leantoExtraItemCheckBoxQuantityCost)});}}});post_data['building'].ExtraItemsFeaturesQuantityArray=_reducer.const_var.ExtraItemsFeaturesQuantityArray;}if(newParams.p_j_t_end==true&&data.jtrim.length>0){var isJtrimEnd=false;var isJtrimEndPriceCenter=false;var isJtrimEndPriceLeftLean=false;var isJtrimEndPriceRightLean=false;var centerBuildingNumber=1;var leftBuildingNumber=1;var rightBuildingNumber=1;if(newParams.p_f_w!=="Close"&&newParams.p_f_w!=="Open"&&newParams.p_f_w!=="Half_Close"&&newParams.p_f_w!=="One_Fourth_Close"&&newParams.p_f_w!=="Three_Fourth_Close"){isJtrimEnd=true;isJtrimEndPriceCenter=true;centerBuildingNumber=newParams.p_b_w!=="Close"&&newParams.p_b_w!=="Open"&&newParams.p_b_w!=="Half_Close"&&newParams.p_b_w!=="One_Fourth_Close"&&newParams.p_b_w!=="Three_Fourth_Close"?2:1;}else{centerBuildingNumber=1;}if(newParams.p_b_w!=="Close"&&newParams.p_b_w!=="Open"&&newParams.p_b_w!=="Half_Close"&&newParams.p_b_w!=="One_Fourth_Close"&&newParams.p_b_w!=="Three_Fourth_Close"){isJtrimEnd=true;isJtrimEndPriceCenter=true;centerBuildingNumber=newParams.p_f_w!=="Close"&&newParams.p_f_w!=="Open"&&newParams.p_f_w!=="Half_Close"&&newParams.p_f_w!=="One_Fourth_Close"&&newParams.p_f_w!=="Three_Fourth_Close"?2:1;}else{centerBuildingNumber=1;}if(newParams.p_b_c_b_l_f=="Gable"){isJtrimEnd=true;isJtrimEndPriceLeftLean=true;leftBuildingNumber=newParams.p_b_c_b_l_b=="Gable"?2:1;}else{leftBuildingNumber=1;}if(newParams.p_b_c_b_l_b=="Gable"){isJtrimEnd=true;isJtrimEndPriceLeftLean=true;leftBuildingNumber=newParams.p_b_c_b_l_f=="Gable"?2:1;}else{leftBuildingNumber=1;}if(newParams.p_b_c_b_r_f=="Gable"){isJtrimEnd=true;isJtrimEndPriceRightLean=true;rightBuildingNumber=newParams.p_b_c_b_r_b=="Gable"?2:1;}else{rightBuildingNumber=1;}if(newParams.p_b_c_b_r_b=="Gable"){isJtrimEnd=true;isJtrimEndPriceRightLean=true;rightBuildingNumber=_reducer.params.p_b_c_b_r_f=="Gable"?2:1;}else{rightBuildingNumber=1;}var jtrimPrice=0;var centerJtrim=data.jtrim.find(function(data){return data.type=="end";});if(newParams.p_j_t_end==true){var rightJtrim=_reducer.const_var.leanGetDataRightComparision!=""&&_reducer.const_var.leanGetDataRightComparision.jtrim.length>0?_reducer.const_var.leanGetDataRightComparision.jtrim.find(function(data){return data.type=="end";}):undefined;var leftJtrim=_reducer.const_var.leanGetDataLeftComparision!=""&&_reducer.const_var.leanGetDataLeftComparision.jtrim.length>0?_reducer.const_var.leanGetDataLeftComparision.jtrim.find(function(data){return data.type=="end";}):undefined;if(rightJtrim!=undefined&&newParams.add_right_lean==true&&_reducer.const_var.leanGetDataRightComparision!=""&&_reducer.const_var.leanGetDataRightComparision.jtrim.length>0&&isJtrimEndPriceRightLean==true&&leftJtrim!=undefined&&newParams.add_left_lean==true&&_reducer.const_var.leanGetDataLeftComparision!=""&&_reducer.const_var.leanGetDataLeftComparision.jtrim.length>0&&isJtrimEndPriceLeftLean==true){if(isJtrimEndPriceCenter==true){jtrimPrice=parseFloat(jtrimPrice)+parseFloat(centerJtrim.cost)*parseFloat(centerBuildingNumber)+parseFloat(leftJtrim.cost)*parseFloat(leftBuildingNumber)+parseFloat(rightJtrim.cost)*parseFloat(rightBuildingNumber);}else{jtrimPrice=parseFloat(jtrimPrice)+parseFloat(leftJtrim.cost)*parseFloat(leftBuildingNumber)+parseFloat(rightJtrim.cost)*parseFloat(rightBuildingNumber);}}else if(rightJtrim!=undefined&&newParams.add_right_lean==true&&_reducer.const_var.leanGetDataRightComparision!=""&&_reducer.const_var.leanGetDataRightComparision.jtrim.length>0&&isJtrimEndPriceRightLean==true){if(isJtrimEndPriceCenter==true){jtrimPrice=parseFloat(jtrimPrice)+parseFloat(centerJtrim.cost)*parseFloat(centerBuildingNumber)+parseFloat(rightJtrim.cost)*parseFloat(rightBuildingNumber);}else{jtrimPrice=parseFloat(jtrimPrice)+parseFloat(rightJtrim.cost)*parseFloat(rightBuildingNumber);}}else if(leftJtrim!=undefined&&newParams.add_left_lean==true&&_reducer.const_var.leanGetDataLeftComparision!=""&&_reducer.const_var.leanGetDataLeftComparision.jtrim.length>0&&isJtrimEndPriceLeftLean==true){if(isJtrimEndPriceCenter==true){jtrimPrice=parseFloat(jtrimPrice)+parseFloat(centerJtrim.cost)*parseFloat(centerBuildingNumber)+parseFloat(leftJtrim.cost)*parseFloat(leftBuildingNumber);}else{jtrimPrice=parseFloat(jtrimPrice)+parseFloat(leftJtrim.cost)*parseFloat(leftBuildingNumber);}}else{if(isJtrimEndPriceCenter==true){jtrimPrice=parseFloat(jtrimPrice)+parseFloat(centerJtrim.cost)*parseFloat(centerBuildingNumber);}else{jtrimPrice=parseFloat(jtrimPrice)+0;}}extra_items.push({'item_name':'End Jtrim','item_quantity':newParams.p_j_t_end==true?1:0,'item_price':jtrimPrice});t_c=parseFloat(t_c)+parseFloat(jtrimPrice);}}if(newParams.p_j_t==true&&data.jtrim.length>0){var isJtrim=false;var isJtrimPriceCenter=false;var isJtrimPriceLeftLean=false;var isJtrimPriceRightLean=false;var _centerBuildingNumber=1;if(newParams.p_l_w!=="Close"&&newParams.p_l_w!=="Open"&&newParams.p_l_w!=="Half_Close"&&newParams.p_l_w!=="One_Fourth_Close"&&newParams.p_l_w!=="Three_Fourth_Close"){isJtrim=true;isJtrimPriceCenter=true;_centerBuildingNumber=newParams.p_r_w!=="Close"&&newParams.p_r_w!=="Open"&&newParams.p_r_w!=="Half_Close"&&newParams.p_r_w!=="One_Fourth_Close"&&newParams.p_r_w!=="Three_Fourth_Close"?2:1;}else{_centerBuildingNumber=1;}if(newParams.p_r_w!=="Close"&&newParams.p_r_w!=="Open"&&newParams.p_r_w!=="Half_Close"&&newParams.p_r_w!=="One_Fourth_Close"&&newParams.p_r_w!=="Three_Fourth_Close"){isJtrim=true;isJtrimPriceCenter=true;_centerBuildingNumber=newParams.p_l_w!=="Close"&&newParams.p_l_w!=="Open"&&newParams.p_l_w!=="Half_Close"&&newParams.p_l_w!=="One_Fourth_Close"&&newParams.p_l_w!=="Three_Fourth_Close"?2:1;}else{_centerBuildingNumber=1;}if(newParams.p_c_p_l==true&&newParams.p_l_w=="Open"){isJtrim=true;isJtrimPriceCenter=true;_centerBuildingNumber=newParams.p_c_p_r==true||newParams.p_r_w!=="Close"&&newParams.p_r_w!=="Open"&&newParams.p_r_w!=="Half_Close"&&newParams.p_r_w!=="One_Fourth_Close"&&newParams.p_r_w!=="Three_Fourth_Close"?2:_centerBuildingNumber;}if(newParams.p_c_p_r==true&&newParams.p_r_w=="Open"){isJtrim=true;isJtrimPriceCenter=true;_centerBuildingNumber=newParams.p_c_p_l==true||newParams.p_l_w!=="Close"&&newParams.p_l_w!=="Open"&&newParams.p_l_w!=="Half_Close"&&newParams.p_l_w!=="One_Fourth_Close"&&newParams.p_l_w!=="Three_Fourth_Close"?2:_centerBuildingNumber;}if(newParams.p_b_c_b_l!=="Close"&&newParams.p_b_c_b_l!=="Open"&&newParams.b_h_t2&&newParams.p_b_c_b_l!="Half_Close"&&newParams.p_b_c_b_l!="One_Fourth_Close"&&newParams.p_b_c_b_l!="Three_Fourth_Close"){isJtrim=true;isJtrimPriceLeftLean=true;}if(newParams.p_b_c_b_r!=="Close"&&newParams.p_b_c_b_r!=="Open"&&newParams.p_b_c_b_r!="Half_Close"&&newParams.p_b_c_b_r!="One_Fourth_Close"&&newParams.p_b_c_b_r!="Three_Fourth_Close"){isJtrim=true;isJtrimPriceRightLean=true;}if(isJtrim!=true){newParams.p_j_t=false;}var jtrimPrice=0;var JtrimVal=0;if(newParams.p_j_t==true){JtrimVal=1;}if(newParams.p_j_t==true){if(newParams.add_right_lean==true&&_reducer.const_var.leanGetDataRightComparision!=""&&_reducer.const_var.leanGetDataRightComparision.jtrim.length>0&&isJtrimPriceRightLean==true&&newParams.add_left_lean==true&&_reducer.const_var.leanGetDataLeftComparision!=""&&_reducer.const_var.leanGetDataLeftComparision.jtrim.length>0&&isJtrimPriceLeftLean==true){if(isJtrimPriceCenter==true){jtrimPrice=parseFloat(jtrimPrice)+parseFloat(data.jtrim[0].cost)*parseFloat(_centerBuildingNumber)+parseFloat(_reducer.const_var.leanGetDataLeftComparision.jtrim[0].cost)+parseFloat(_reducer.const_var.leanGetDataRightComparision.jtrim[0].cost);}else{jtrimPrice=parseFloat(jtrimPrice)+parseFloat(_reducer.const_var.leanGetDataLeftComparision.jtrim[0].cost)+parseFloat(_reducer.const_var.leanGetDataRightComparision.jtrim[0].cost);}}else if(newParams.add_right_lean==true&&_reducer.const_var.leanGetDataRightComparision!=""&&_reducer.const_var.leanGetDataRightComparision.jtrim.length>0&&isJtrimPriceRightLean==true){if(isJtrimPriceCenter==true){jtrimPrice=parseFloat(jtrimPrice)+parseFloat(data.jtrim[0].cost)*parseFloat(_centerBuildingNumber)+parseFloat(_reducer.const_var.leanGetDataRightComparision.jtrim[0].cost);}else{jtrimPrice=parseFloat(jtrimPrice)+parseFloat(_reducer.const_var.leanGetDataRightComparision.jtrim[0].cost);}}else if(newParams.add_left_lean==true&&_reducer.const_var.leanGetDataLeftComparision!=""&&_reducer.const_var.leanGetDataLeftComparision.jtrim.length>0&&isJtrimPriceLeftLean==true){if(isJtrimPriceCenter==true){jtrimPrice=parseFloat(jtrimPrice)+parseFloat(data.jtrim[0].cost)*parseFloat(_centerBuildingNumber)+parseFloat(_reducer.const_var.leanGetDataLeftComparision.jtrim[0].cost);}else{jtrimPrice=parseFloat(jtrimPrice)+parseFloat(_reducer.const_var.leanGetDataLeftComparision.jtrim[0].cost);}}else{if(isJtrimPriceCenter==true){jtrimPrice=parseFloat(jtrimPrice)+parseFloat(data.jtrim[0].cost)*parseFloat(_centerBuildingNumber);}else{jtrimPrice=parseFloat(jtrimPrice)+0;}}extra_items.push({'item_name':'Jtrim','item_quantity':newParams.p_j_t==true?1:0,'item_price':jtrimPrice});t_c=parseFloat(t_c)+parseFloat(jtrimPrice);}}if(newParams.p_e_b!=0){var bowsPrice=data.bows[0].cost*newParams.p_e_b;extra_items.push({'item_name':'Extra Bows','item_quantity':parseInt(newParams.p_e_b),'item_price':bowsPrice});t_c=parseFloat(t_c)+parseFloat(bowsPrice);}// if(newParams.fourth_center_cost==true)
// {
//     var extPrice = (UpdatePriceRecord==true && const_var.UpdatedPriceData['elements']!=undefined && (const_var.UpdatedPriceData.common_length_changed!=true))?const_var.UpdatedPriceData['elements']['Four Feet Center'].item_price:data.addons[0].fourth_center_cost; 
//     extra_items.push({'item_name':'Four Feet Center','item_quantity':(newParams.fourth_center_cost==true)?1:0,'item_price':extPrice});
//     t_c = t_c + extPrice;
// }
if(newParams.risk_cost==true){var extPrice=data.addons[0].risk_cost;extra_items.push({'item_name':'Risk Cost','item_quantity':newParams.risk_cost==true?1:0,'item_price':extPrice});t_c=t_c+extPrice;}if(newParams.p_s_c_b==true){var extPrice=data.side_cross_bracing[0].cost;extra_items.push({'item_name':'Side Cross Bracing','item_quantity':newParams.p_s_c_b==true?1:0,'item_price':extPrice});t_c=parseFloat(t_c)+parseFloat(extPrice);}if(newParams.p_e_c_b==true){if(data.addons_width&&data.addons_width.length>0&&data.addons_width[0].end_cross_bracing!=undefined&&data.addons_width[0].end_cross_bracing!=0){var extPrice=data.addons_width[0].end_cross_bracing;extra_items.push({'item_name':'End Cross Bracing','item_quantity':newParams.p_e_c_b==true?1:0,'item_price':extPrice});t_c=parseFloat(t_c)+parseFloat(extPrice);}if(data.end_cross_bracing!=undefined&&data.end_cross_bracing.length>0){var extPrice=data.end_cross_bracing[0].cost;extra_items.push({'item_name':'End Cross Bracing','item_quantity':newParams.p_e_c_b==true?1:0,'item_price':extPrice});t_c=parseFloat(t_c)+parseFloat(extPrice);}}if(newParams.p_g_c==true){var extPrice=data.addons[0].ground_certificate;extra_items.push({'item_name':'Ground Certification','item_quantity':newParams.p_g_c==true?1:0,'item_price':extPrice});t_c=t_c+extPrice;}if(newParams.p_o_p==true){var extPrice=data.addons[0].overhang;extra_items.push({'item_name':'Overhang','item_quantity':newParams.p_o_p==true?1:0,'item_price':extPrice});t_c=t_c+extPrice;}if(newParams.p_p_b!=0){var extPrice=data.addons_width[0].peak_braces*parseInt(newParams.p_p_b);extra_items.push({'item_name':'Peak Braces','item_quantity':parseInt(newParams.p_p_b),'item_price':extPrice});t_c=t_c+extPrice;}if(newParams.cert_pac_cost==true){var extPrice=data.addons[0].cert_pac_cost;extra_items.push({'item_name':'Certificate Cost','item_quantity':newParams.cert_pac_cost==true?1:0,'item_price':extPrice});t_c=t_c+extPrice;}if(newParams.p_e_t!=0){var extPrice=data.trusses[0].cost*newParams.p_e_t;extra_items.push({'item_name':'Extra Truss','item_quantity':newParams.p_e_t,'item_price':extPrice});t_c=t_c+extPrice;}if(newParams.p_t_u!=0){var extPrice=newParams.p_t_u;extra_items.push({'item_name':'Truss Upgrade','item_quantity':1,'item_price':newParams.p_t_u!=0?newParams.p_t_u:0});t_c=t_c+extPrice;}if(newParams.p_b_p==true){var extPrice=data.braces[0].cost;extra_items.push({'item_name':'Bracing Price','item_quantity':newParams.p_b_p==true?1:0,'item_price':extPrice});t_c=t_c+extPrice;}if(newParams.p_b_p_feet!="Select"){var extPrice=newParams.p_b_p_feet*newParams.p_b_p_feetVal;extra_items.push({'item_name':'Addition Bracing Price','item_quantity':newParams.p_b_p_feetVal,'item_price':extPrice});t_c=t_c+extPrice;}if(data.delux_two_tone.length>0&&Math.abs(data.delux_two_tone[0].cost)==0&&newParams.p_w_c_n==true){var waniscotPrice=0;var conditionPrice="";var leanwaniscotPriceL="";var leanwaniscotPriceR="";if(newParams.add_right_lean==true&&_reducer.const_var.leanGetDataRightComparision!=""){leanwaniscotPriceR=_reducer.const_var.leanGetDataRightComparision.delux_two_tone[0];}if(newParams.add_left_lean==true&&_reducer.const_var.leanGetDataLeftComparision!=""){leanwaniscotPriceL=_reducer.const_var.leanGetDataLeftComparision.delux_two_tone[0];}if(data.delux_two_tone.length>0){conditionPrice=data.delux_two_tone[0];}else{conditionPrice=data.delux_two_tone[0];}if(newParams.add_left_lean==true){if(newParams.p_b_c_b_l_f=="Close"&&newParams.p_w_c_n==true){waniscotPrice=newParams.p_v_w==true?waniscotPrice+Math.abs(leanwaniscotPriceL.on_end_vertical):waniscotPrice+Math.abs(leanwaniscotPriceL.on_end_horizontal);}if(newParams.p_b_c_b_l_b=="Close"&&newParams.p_w_c_n==true){waniscotPrice=newParams.p_v_w==true?waniscotPrice+Math.abs(leanwaniscotPriceL.on_end_vertical):waniscotPrice+Math.abs(leanwaniscotPriceL.on_end_horizontal);}if(newParams.p_b_c_b_l=="Close"&&newParams.p_w_c_n==true){waniscotPrice=newParams.p_v_w==true?waniscotPrice+Math.abs(leanwaniscotPriceL.on_side_vertical):waniscotPrice+Math.abs(leanwaniscotPriceL.on_side_horizontal);}if(newParams.add_storage_check==true&&newParams.p_w_c_n==true){waniscotPrice=newParams.p_v_w==true?waniscotPrice+(Math.abs(leanwaniscotPriceL.on_side_vertical)+Math.abs(leanwaniscotPriceL.on_end_vertical*2)):waniscotPrice+(Math.abs(leanwaniscotPriceL.on_side_horizontal)+Math.abs(leanwaniscotPriceL.on_end_horizontal*2));}}if(newParams.add_right_lean==true){if(newParams.p_b_c_b_r_f=="Close"&&newParams.p_w_c_n==true){waniscotPrice=newParams.p_v_w==true?waniscotPrice+Math.abs(leanwaniscotPriceR.on_end_vertical):waniscotPrice+Math.abs(leanwaniscotPriceR.on_end_horizontal);}if(newParams.p_b_c_b_r_b=="Close"&&newParams.p_w_c_n==true){waniscotPrice=newParams.p_v_w==true?waniscotPrice+Math.abs(leanwaniscotPriceR.on_end_vertical):waniscotPrice+Math.abs(leanwaniscotPriceR.on_end_horizontal);}if(newParams.p_b_c_b_r=="Close"&&newParams.p_w_c_n==true){waniscotPrice=newParams.p_v_w==true?waniscotPrice+Math.abs(leanwaniscotPriceR.on_side_vertical):waniscotPrice+Math.abs(leanwaniscotPriceR.on_side_horizontal);}if(newParams.add_storage_check_right==true&&newParams.p_w_c_n==true){waniscotPrice=newParams.p_v_w==true?waniscotPrice+(Math.abs(leanwaniscotPriceR.on_side_vertical)+Math.abs(leanwaniscotPriceR.on_end_vertical*2)):waniscotPrice+(Math.abs(leanwaniscotPriceR.on_side_horizontal)+Math.abs(leanwaniscotPriceR.on_end_horizontal*2));}}if(data.delux_two_tone.length>0){conditionPrice=data.delux_two_tone[0];}else{conditionPrice=data.delux_two_tone[0];}if(newParams.p_b_w=="Close"&&newParams.p_w_c_n==true){waniscotPrice=newParams.p_v_w==true?waniscotPrice+Math.abs(conditionPrice.on_end_vertical):waniscotPrice+Math.abs(conditionPrice.on_end_horizontal);}if(newParams.p_f_w=="Close"&&newParams.p_w_c_n==true){waniscotPrice=newParams.p_v_w==true?waniscotPrice+Math.abs(conditionPrice.on_end_vertical):waniscotPrice+Math.abs(conditionPrice.on_end_horizontal);}if(newParams.p_r_w=="Close"&&newParams.p_w_c_n==true){waniscotPrice=newParams.p_v_w==true?waniscotPrice+Math.abs(conditionPrice.on_side_vertical):waniscotPrice+Math.abs(conditionPrice.on_side_horizontal);}if(newParams.p_l_w=="Close"&&newParams.p_w_c_n==true){waniscotPrice=newParams.p_v_w==true?waniscotPrice+Math.abs(conditionPrice.on_side_vertical):waniscotPrice+Math.abs(conditionPrice.on_side_horizontal);}if(newParams.p_u_c==true){waniscotPrice=newParams.p_v_w==true?waniscotPrice+Math.abs(conditionPrice.on_side_vertical*2):waniscotPrice+Math.abs(conditionPrice.on_side_horizontal*2);waniscotPrice=newParams.p_v_w==true?waniscotPrice+Math.abs(conditionPrice.on_end_vertical*2):waniscotPrice+Math.abs(conditionPrice.on_end_horizontal*2);}post_data['building'].wainscot_price=waniscotPrice;t_c=parseFloat(t_c)+parseFloat(post_data['building'].wainscot_price);}else{t_c=newParams.p_w_c_n==true&&newParams.p_v_w==true&&(newParams.p_b_w=="Close"&&newParams.p_l_w=="Close"&&newParams.p_r_w=="Close"&&newParams.p_f_w=="Close"||newParams.p_u_c==true)?data.delux_two_tone.length>0&&data.delux_two_tone!=undefined?parseFloat(t_c)+parseFloat(data.delux_two_tone[0].cost):parseFloat(t_c)+0:parseFloat(t_c)+0;post_data['building'].wainscot_price=newParams.p_w_c_n==true&&newParams.p_v_w==true&&(newParams.p_b_w=="Close"&&newParams.p_l_w=="Close"&&newParams.p_r_w=="Close"&&newParams.p_f_w=="Close"||newParams.p_u_c==true)?data.delux_two_tone.length>0&&data.delux_two_tone!=undefined?data.delux_two_tone[0].cost:0:0;}if(newParams.p_w_c_n){post_data['building'].wainscot_type="full-building";post_data['building'].wainscot_side="both";post_data['building'].wainscot_end="both";post_data['building'].wainscot=_reducer.const_var.c_m_a_Colors[newParams.p_w_c_c_id];}var WallColorObj=_reducer.const_var.ComparisionDataArray[iiD].building_data.color.filter(function(data){return data.name==_reducer.params.p_w_c_name;})[0]!=undefined?_reducer.const_var.ComparisionDataArray[iiD].building_data.color.filter(function(data){return data.name==_reducer.params.p_w_c_name;})[0]:_reducer.const_var.ComparisionDataArray[iiD].building_data.color[0];var RoofColorObj=_reducer.const_var.ComparisionDataArray[iiD].building_data.color.filter(function(data){return data.name==_reducer.params.p_r_c_name;})[0]!=undefined?_reducer.const_var.ComparisionDataArray[iiD].building_data.color.filter(function(data){return data.name==_reducer.params.p_r_c_name;})[0]:_reducer.const_var.ComparisionDataArray[iiD].building_data.color[0];var TrimColorObj=_reducer.const_var.ComparisionDataArray[iiD].building_data.color.filter(function(data){return data.name==_reducer.params.p_t_c_name;})[0]!=undefined?_reducer.const_var.ComparisionDataArray[iiD].building_data.color.filter(function(data){return data.name==_reducer.params.p_t_c_name;})[0]:_reducer.const_var.ComparisionDataArray[iiD].building_data.color[0];var WainscotColorObj=_reducer.const_var.ComparisionDataArray[iiD].building_data.color.filter(function(data){return data.name==_reducer.params.p_w_c_c_name;})[0]!=undefined?_reducer.const_var.ComparisionDataArray[iiD].building_data.color.filter(function(data){return data.name==_reducer.params.p_w_c_c_name;})[0]:_reducer.const_var.ComparisionDataArray[iiD].building_data.color[0];newParams.p_r_c_id=RoofColorObj.id;newParams.p_w_c_id=WallColorObj.id;newParams.p_t_c_id=TrimColorObj.id;newParams.p_w_c_c_id=WainscotColorObj.id;post_data['building'].wall_color=WallColorObj;post_data['building'].roof_color=RoofColorObj;post_data['building'].trim_color=TrimColorObj;post_data['building'].wainscot=WainscotColorObj;post_data['building'].garageDoorColor=_reducer.const_var.garageDoorColor[newParams.g_d_c_id];post_data['building'].roof_color_price=0;post_data['building'].wall_color_price=0;post_data['building'].trim_color_price=0;post_data['building'].wainscot_color_price=0;//post_data['building'].garageDoor_color_price = 0;
var newEntryPoint=JSON.parse(JSON.stringify(_reducer.const_var.post_data['building'].entry_points));if(_reducer.const_var.post_data['building'].entry_points.length>0){_reducer.const_var.post_data['building'].entry_points.map(function(value,key){if(value.entry_type=="garage_door"){newEntryPoint[key].name=_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['selectedIndex'][key].name.replace("x","X");newEntryPoint[key].size=_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['Garage']['Object'][newEntryPoint[key].name];newEntryPoint[key].entry_price=_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['selectedIndex'][key].cost;newEntryPoint[key].entry_price=value.entry_location=="lside"||value.entry_location=="rside"?_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['selectedIndex'][key].side_cost+_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['selectedIndex'][key].cost:_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['selectedIndex'][key].cost;if(value.entry_certified==true&&_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['Garage']['Certified_Cost'][newEntryPoint[key].name]!=undefined){newEntryPoint[key].entry_price=newEntryPoint[key].entry_price+_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['Garage']['Certified_Cost'][newEntryPoint[key].name];newEntryPoint[key].entry_certified_price=_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['Garage']['Certified_Cost'][newEntryPoint[key].name];}t_c=parseFloat(t_c)+parseFloat(newEntryPoint[key].entry_price);}if(value.entry_type=="garage_door_frameout"){newEntryPoint[key].name=_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['selectedIndex'][key][1];newEntryPoint[key].entry_doorNewType=_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['selectedIndex'][key][0];newEntryPoint[key].entry_dimension_height=_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['selectedIndex'][key][0].split("X")[1];newEntryPoint[key].entry_dimension_width=_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['selectedIndex'][key][0].split("X")[0];newEntryPoint[key].size=_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['CustomFrameout']['Object'][newEntryPoint[key].name];newEntryPoint[key].entry_price=value.entry_location=="lside"||value.entry_location=="rside"?_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['CustomFrameout']['SidePrice'][_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['selectedIndex'][key][1]]:_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['CustomFrameout']['EndPrice'][_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['selectedIndex'][key][1]];t_c=parseFloat(t_c)+parseFloat(newEntryPoint[key].entry_price);}if(value.entry_type=="walkin"){newEntryPoint[key].name=_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['selectedIndex'][key].name.replace("x","X");newEntryPoint[key].size=_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['Walk']['Object'][newEntryPoint[key].name];newEntryPoint[key].entry_price=_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['selectedIndex'][key].cost;t_c=parseFloat(t_c)+parseFloat(newEntryPoint[key].entry_price);}if(value.entry_type=="walkin_frameout"){newEntryPoint[key].name=_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['selectedIndex'][key].name.replace("x","X");newEntryPoint[key].size=_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['WalkFrameout']['Object'][newEntryPoint[key].name];newEntryPoint[key].entry_price=value.entry_location=="lside"||value.entry_location=="rside"?_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['selectedIndex'][key].frameout_cost_side:_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['selectedIndex'][key].frameout_cost_end;t_c=parseFloat(t_c)+parseFloat(newEntryPoint[key].entry_price);}if(value.entry_type=="window"){newEntryPoint[key].name=_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['selectedIndex'][key].name.replace("x","X");newEntryPoint[key].size=_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['Windows']['Object'][newEntryPoint[key].name];newEntryPoint[key].entry_price=_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['selectedIndex'][key].cost;t_c=parseFloat(t_c)+parseFloat(newEntryPoint[key].entry_price);}if(value.entry_type=="window_frameout"){newEntryPoint[key].name=_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['selectedIndex'][key].name.replace("x","X");newEntryPoint[key].size=_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['WindowsFrameout']['Object'][newEntryPoint[key].name];//newEntryPoint[key].entry_price = const_var.CustomDoorArrForOtherBtype[iiD]['selectedIndex'][key].cost;
newEntryPoint[key].entry_price=value.entry_location=="lside"||value.entry_location=="rside"?_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['selectedIndex'][key].frameout_cost_side:_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['selectedIndex'][key].frameout_cost_end;t_c=parseFloat(t_c)+parseFloat(newEntryPoint[key].entry_price);}if(value.entry_chain_hoist!=undefined&&value.entry_chain_hoist==true){newEntryPoint[key].entry_chain_hoist_price=_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['Garage']['Chain_Hoist'][newEntryPoint[key].name];t_c=parseFloat(t_c)+parseFloat(value.entry_chain_hoist_price);}if(value.entry_is_header_seal!=undefined&&value.entry_is_header_seal==true){newEntryPoint[key].entry_header_seal_price=_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['Garage']['Header_Seal'][newEntryPoint[key].name];t_c=parseFloat(t_c)+parseFloat(value.entry_header_seal_price);}if(value.entry_automatic_openers!=undefined&&value.entry_automatic_openers==true){newEntryPoint[key].entry_automatic_openers_price=_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['Garage']['Automatic_Openers_Cost'][newEntryPoint[key].name];t_c=parseFloat(t_c)+parseFloat(value.entry_automatic_openers_price);}if(value.entry_trim_kit!=undefined&&value.entry_trim_kit==true){if(value.entry_type=="garage_door"){newEntryPoint[key].entry_trim_kit_price=_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['Garage']['TrimKit'][newEntryPoint[key].name];}if(value.entry_type=="garage_door_frameout"){newEntryPoint[key].entry_trim_kit_price=_reducer.const_var.CustomDoorArrForOtherBtype[iiD]['CustomFrameout']['TrimKit'][newEntryPoint[key].name];}t_c=parseFloat(t_c)+parseFloat(value.entry_trim_kit_price);}//  if(value.entry_garageDoor_color_price!=undefined && value.entry_garageDoor_color_price == true)
// {
//     newEntryPoint[key].entry_garageDoor_color_price = const_var.CustomDoorArrForOtherBtype[iiD]["Garage"]["garageDoor_color"][newEntryPoint[key].name];
//     t_c = parseFloat(t_c) + parseFloat(value.entry_garageDoor_color_price);
// }
if(value.entry_garageDoor_color_price!=undefined&&value.entry_garageDoor_color_price!=0){newEntryPoint[key].entry_garageDoor_color_price=0;t_c=parseFloat(t_c)+parseFloat(value.entry_trim_kit_price);}});}post_data['building'].newEntryPoint=newEntryPoint;t_c=newParams.p_t_u!=0?parseFloat(t_c)+Number(newParams.p_t_u):parseFloat(t_c)+parseFloat(0);var calCulatePriceByDis="";if(newParams.p_e_i!="other"&&_reducer.const_var.main_extraItems_arr_Compare[newParams.p_e_i]!=undefined){if(newParams.p_i_s=="1"){if(_reducer.const_var.main_extraItems_arr_Compare[newParams.p_e_i].percentage_of_cost!=0){if(_reducer.const_var.main_extraItems_arr_Compare[newParams.p_e_i].percentage_of!=undefined&&_reducer.const_var.main_extraItems_arr_Compare[newParams.p_e_i].percentage_of=="building_amount"){var finalCertPrice=_reducer.const_var.main_extraItems_arr_Compare[newParams.p_e_i].percentage_of_cost?t_c*_reducer.const_var.main_extraItems_arr_Compare[newParams.p_e_i].percentage_of_cost/100:0;t_c=parseFloat(t_c)+parseFloat(finalCertPrice);post_data['building'].certificate_price=finalCertPrice;}else{var finalCertPrice=_reducer.const_var.main_extraItems_arr_Compare[newParams.p_e_i].percentage_of_cost?post_data['building'].roof_style_price*_reducer.const_var.main_extraItems_arr_Compare[newParams.p_e_i].percentage_of_cost/100:0;t_c=parseFloat(t_c)+parseFloat(finalCertPrice);post_data['building'].certificate_price=finalCertPrice;}}else{var finalCertPrice=_reducer.const_var.main_extraItems_arr_Compare[newParams.p_e_i].certification_concrete_cost?_reducer.const_var.main_extraItems_arr_Compare[newParams.p_e_i].certification_concrete_cost:0;t_c=parseFloat(t_c)+parseFloat(finalCertPrice);post_data['building'].certificate_price=finalCertPrice;}}else{if(_reducer.const_var.main_extraItems_arr_Compare[newParams.p_e_i].percentage_of_cost!=0){if(_reducer.const_var.main_extraItems_arr_Compare[newParams.p_e_i].percentage_of!=undefined&&_reducer.const_var.main_extraItems_arr_Compare[newParams.p_e_i].percentage_of=="building_amount"){var finalCertPrice=_reducer.const_var.main_extraItems_arr_Compare[newParams.p_e_i].percentage_of_cost?t_c*_reducer.const_var.main_extraItems_arr_Compare[newParams.p_e_i].percentage_of_cost/100:0;t_c=parseFloat(t_c)+parseFloat(finalCertPrice);post_data['building'].certificate_price=finalCertPrice;}else{var finalCertPrice=_reducer.const_var.main_extraItems_arr_Compare[newParams.p_e_i].percentage_of_cost?post_data['building'].roof_style_price*_reducer.const_var.main_extraItems_arr_Compare[newParams.p_e_i].percentage_of_cost/100:0;t_c=parseFloat(t_c)+parseFloat(finalCertPrice);post_data['building'].certificate_price=finalCertPrice;}//console.log(post_data['building'].certificate_price,"post_data['building'].certificate_price",post_data['building'].certificate_price * certVal);
}else{var finalCertPrice=_reducer.const_var.makeCertificateArrayLeft[_reducer.params.lean_p_e_i].cost?_reducer.const_var.makeCertificateArrayLeft[_reducer.params.lean_p_e_i].cost:0;t_c=parseFloat(t_c)+parseFloat(finalCertPrice);post_data['building'].certificate_price=finalCertPrice;}}}if(newParams.p_e_i=="other"){post_data['building'].certificate={'gauge':0,'certified':1,'has_double_leg':0,'has_ladder_leg':0,'has_other_leg':0,'height':0,'id':-1,'cost':0,'is_default':"no",'length':0,'map_id':0,'name':"Other"};post_data['building'].certificate_other_name=newParams.p_e_i_other!=''?newParams.p_e_i_other:'Other';post_data['building'].certificate_price=0;t_c=parseFloat(t_c)+parseFloat(post_data['building'].certificate_price);}post_data['building'].leanto=JSON.parse(JSON.stringify(_reducer.const_var.leantoCompare));var leantoPriceCalculation={};if(post_data['building'].leanto.length>0){if(post_data['building'].leanto.length>1){leantoPriceCalculation.totalLeanPrice=parseFloat(post_data['building'].leanto[0].t_c_b)+parseFloat(post_data['building'].leanto[1].t_c_b);leantoPriceCalculation.totalBasePrice=parseFloat(post_data['building'].leanto[0].basic_price)+parseFloat(post_data['building'].leanto[1].basic_price);leantoPriceCalculation.totalWallPrice=parseFloat(post_data['building'].leanto[0].front_wall_price)+parseFloat(post_data['building'].leanto[0].back_wall_price)+parseFloat(post_data['building'].leanto[0].side_wall_price)+parseFloat(post_data['building'].leanto[1].front_wall_price)+parseFloat(post_data['building'].leanto[1].back_wall_price)+parseFloat(post_data['building'].leanto[1].side_wall_price);if(post_data['building'].leanto[0].utility_price!=undefined&&post_data['building'].leanto[0].utility_price!=0){leantoPriceCalculation.totalWallPrice=parseFloat(leantoPriceCalculation.totalWallPrice)+parseFloat(post_data['building'].leanto[0].utility_price);}if(post_data['building'].leanto[1].utility_price!=undefined&&post_data['building'].leanto[1].utility_price!=0){leantoPriceCalculation.totalWallPrice=parseFloat(leantoPriceCalculation.totalWallPrice)+parseFloat(post_data['building'].leanto[1].utility_price);}leantoPriceCalculation.totalHeightPrice=parseFloat(post_data['building'].leanto[0].height_price)+parseFloat(post_data['building'].leanto[1].height_price);}else{leantoPriceCalculation.totalLeanPrice=parseFloat(post_data['building'].leanto[0].t_c_b);leantoPriceCalculation.totalBasePrice=parseFloat(post_data['building'].leanto[0].basic_price);leantoPriceCalculation.totalWallPrice=parseFloat(post_data['building'].leanto[0].front_wall_price)+parseFloat(post_data['building'].leanto[0].back_wall_price)+parseFloat(post_data['building'].leanto[0].side_wall_price);if(post_data['building'].leanto[0].utility_price!=undefined&&post_data['building'].leanto[0].utility_price!=0){leantoPriceCalculation.totalWallPrice=parseFloat(leantoPriceCalculation.totalWallPrice)+parseFloat(post_data['building'].leanto[0].utility_price);}leantoPriceCalculation.totalHeightPrice=parseFloat(post_data['building'].leanto[0].height_price);}if(isNaN(parseFloat(leantoPriceCalculation.totalBasePrice))==true){leantoPriceCalculation.totalBasePrice=0;}}else{leantoPriceCalculation.totalLeanPrice=0;leantoPriceCalculation.totalBasePrice=0;leantoPriceCalculation.totalWallPrice=0;leantoPriceCalculation.totalHeightPrice=0;}if(_reducer.const_var.additionalFeaturesArray!=undefined&&_reducer.const_var.additionalFeaturesArray.length>0){if(isNaN(parseFloat(leantoPriceCalculation.totalWallPrice))==true){leantoPriceCalculation.totalWallPrice=0;}if(isNaN(parseFloat(leantoPriceCalculation.totalBasePrice))==true){leantoPriceCalculation.totalBasePrice=0;}if(isNaN(parseFloat(leantoPriceCalculation.totalLeanPrice))==true){leantoPriceCalculation.totalLeanPrice=0;}if(isNaN(parseFloat(leantoPriceCalculation.totalHeightPrice))==true){leantoPriceCalculation.totalHeightPrice=0;}var _newCost2=0;var AdditionalObj="";_reducer.const_var.additionalFeaturesArray.map(function(val,index){_newCost2=val.cost;if(val==null){return;}AdditionalObj=val;if(data.additional_features.length>0){data.additional_features.map(function(value,key){if(value.additional_feature==val.additional_feature){_newCost2=value.cost;AdditionalObj=value;}});}else{_newCost2=0;AdditionalObj=val;}if(val.is_checked==true){if(AdditionalObj.cost_type=="%"){var splitVal=0;if(AdditionalObj.percentage_of!=undefined&&AdditionalObj.percentage_of!=""){splitVal=AdditionalObj.percentage_of.split(",");}else{splitVal=AdditionalObj.percentage_of.split(",");}var splval=0;if(splitVal!=0){if(splitVal.includes("1")!=false){splval=parseFloat(splval)+parseFloat(t_c)+parseFloat(leantoPriceCalculation.totalLeanPrice);}if(splitVal.includes("2")!=false){splval=parseFloat(splval)+parseFloat(post_data['building'].roof_style_price)+parseFloat(leantoPriceCalculation.totalBasePrice);}if(splitVal.includes("3")!=false){if(newParams.p_u_c==true){splval=parseFloat(splval)+parseFloat(post_data['building'].utility_price)+parseFloat(post_data['building'].front_wall_price)+parseFloat(post_data['building'].left_wall_price)+parseFloat(post_data['building'].right_wall_price)+parseFloat(post_data['building'].back_wall_price)+parseFloat(leantoPriceCalculation.totalWallPrice);}else{splval=parseFloat(splval)+parseFloat(post_data['building'].front_wall_price)+parseFloat(post_data['building'].left_wall_price)+parseFloat(post_data['building'].right_wall_price)+parseFloat(post_data['building'].back_wall_price)+parseFloat(leantoPriceCalculation.totalWallPrice);}}if(splitVal.includes("4")!=false){splval=parseFloat(splval)+parseFloat(post_data['building'].height_price)+parseFloat(leantoPriceCalculation.totalHeightPrice);}}else{splval=parseFloat(splval)+parseFloat(t_c);}t_c=parseFloat(t_c)+parseFloat(splval*_newCost2/100);extra_items.push({'item_name':val.additional_feature,'item_quantity':val.is_checked==true?1:0,'item_price':parseInt(splval*_newCost2/100)});}else{t_c=parseFloat(t_c)+parseFloat(_newCost2);extra_items.push({'item_name':val.additional_feature,'item_quantity':val.is_checked==true?1:0,'item_price':parseInt(_newCost2)});}}});post_data['building'].additionalFeaturesArray=_reducer.const_var.additionalFeaturesArray;}post_data['building'].price=parseFloat(t_c);post_data['building'].order_total=parseFloat(t_c);post_data['building'].grand_total=parseFloat(t_c);var leantoRoofColorPrice=0;var leantoWallColorPrice=0;var leantoTrimColorPrice=0;if(post_data['building'].leanto.length>1){var leftleanPrice=post_data['building'].leanto[0].t_c_b==undefined?_reducer.const_var.leanto[0].t_c_b:post_data['building'].leanto[0].t_c_b;if(_reducer.const_var.c_m_a_Colors[newParams.p_r_c_id]!=undefined&&_reducer.const_var.c_m_a_Colors[newParams.p_r_c_id].cost!=0){leantoRoofColorPrice=parseFloat(post_data['building'].leanto[0].basic_price)*parseFloat(_reducer.const_var.c_m_a_Colors[newParams.p_r_c_id].cost)/100;}if(_reducer.const_var.c_m_a_Colors[newParams.p_w_c_id]!=undefined&&_reducer.const_var.c_m_a_Colors[newParams.p_w_c_id].cost!=0){if(post_data['building'].leanto[0].utility_price!=undefined){leantoWallColorPrice=parseFloat(post_data['building'].leanto[0].front_wall_price)+parseFloat(post_data['building'].leanto[0].utility_price)+parseFloat(post_data['building'].leanto[0].side_wall_price);}else{leantoWallColorPrice=parseFloat(post_data['building'].leanto[0].front_wall_price)+parseFloat(post_data['building'].leanto[0].back_wall_price)+parseFloat(post_data['building'].leanto[0].side_wall_price);}}if(_reducer.const_var.c_m_a_Colors[newParams.p_r_c_id]!=undefined&&_reducer.const_var.c_m_a_Colors[newParams.p_t_c_id].cost!=0){leantoTrimColorPrice=parseFloat(post_data['building'].leanto[0].height_price);}var rightleanPrice=0;if(_reducer.const_var.leanto[1]!=undefined){rightleanPrice=post_data['building'].leanto[1].t_c_b==undefined?_reducer.const_var.leanto[1].t_c_b:post_data['building'].leanto[1].t_c_b;if(_reducer.const_var.c_m_a_Colors[newParams.p_r_c_id]!=undefined&&_reducer.const_var.c_m_a_Colors[newParams.p_r_c_id].cost!=0){leantoRoofColorPrice=parseFloat(leantoRoofColorPrice)+parseFloat(post_data['building'].leanto[0].basic_price)*parseFloat(_reducer.const_var.c_m_a_Colors[newParams.p_r_c_id].cost)/100;}if(_reducer.const_var.c_m_a_Colors[newParams.p_w_c_id]!=undefined&&_reducer.const_var.c_m_a_Colors[newParams.p_w_c_id].cost!=0){if(post_data['building'].leanto[1].utility_price!=undefined){leantoWallColorPrice=parseFloat(leantoWallColorPrice)+parseFloat(post_data['building'].leanto[1].front_wall_price)+parseFloat(post_data['building'].leanto[1].utility_price)+parseFloat(post_data['building'].leanto[1].side_wall_price);}else{leantoWallColorPrice=parseFloat(leantoWallColorPrice)+parseFloat(post_data['building'].leanto[1].front_wall_price)+parseFloat(post_data['building'].leanto[1].back_wall_price)+parseFloat(post_data['building'].leanto[1].side_wall_price);}}if(_reducer.const_var.c_m_a_Colors[newParams.p_r_c_id]!=undefined&&_reducer.const_var.c_m_a_Colors[newParams.p_t_c_id].cost!=0){leantoTrimColorPrice=parseFloat(leantoTrimColorPrice)+parseFloat(post_data['building'].leanto[0].height_price);}}post_data['building'].order_total=post_data['building'].order_total+leftleanPrice;post_data['building'].order_total=post_data['building'].order_total+rightleanPrice;}else{if(post_data['building'].leanto!=undefined&&post_data['building'].leanto.length>0){var leftleanPrice=0;if(_reducer.const_var.leanto[0]!=undefined){leftleanPrice=post_data['building'].leanto[0].t_c_b==undefined?_reducer.const_var.leanto[0].t_c_b:post_data['building'].leanto[0].t_c_b;if(_reducer.const_var.c_m_a_Colors[newParams.p_r_c_id]!=undefined&&_reducer.const_var.c_m_a_Colors[newParams.p_r_c_id].cost!=0){leantoRoofColorPrice=parseFloat(post_data['building'].leanto[0].basic_price)*parseFloat(_reducer.const_var.c_m_a_Colors[newParams.p_r_c_id].cost)/100;}if(_reducer.const_var.c_m_a_Colors[newParams.p_w_c_id]!=undefined&&_reducer.const_var.c_m_a_Colors[newParams.p_w_c_id].cost!=0){if(newParams.add_storage_check==true){leantoWallColorPrice=parseFloat(post_data['building'].leanto[0].front_wall_price)+parseFloat(post_data['building'].leanto[0].utility_price)+parseFloat(post_data['building'].leanto[0].side_wall_price);}else{leantoWallColorPrice=parseFloat(post_data['building'].leanto[0].front_wall_price)+parseFloat(post_data['building'].leanto[0].back_wall_price)+parseFloat(post_data['building'].leanto[0].side_wall_price);}}if(_reducer.const_var.c_m_a_Colors[newParams.p_r_c_id]!=undefined&&_reducer.const_var.c_m_a_Colors[newParams.p_t_c_id].cost!=0){leantoTrimColorPrice=parseFloat(post_data['building'].leanto[0].height_price);}}post_data['building'].order_total=post_data['building'].order_total+leftleanPrice;}else{post_data['building'].order_total=post_data['building'].order_total;}}if(RoofColorObj.cost!=0){post_data['building'].roof_color_price=parseFloat(leantoRoofColorPrice)+parseFloat(post_data['building'].roof_style_price)*parseFloat(RoofColorObj.cost)/100;post_data['building'].order_total=parseFloat(post_data['building'].order_total)+parseFloat(post_data['building'].roof_color_price);post_data['building'].roof_color.roof_color_price=post_data['building'].roof_color_price;}if(WallColorObj.cost!=0){var wallPriceCal=0;if(post_data['building'].utility_price!=undefined&&_reducer.params.p_u_c==true){wallPriceCal=parseFloat(post_data['building'].front_wall_price)+parseFloat(post_data['building'].left_wall_price)+parseFloat(post_data['building'].right_wall_price)+parseFloat(post_data['building'].utility_price);}else{wallPriceCal=parseFloat(post_data['building'].front_wall_price)+parseFloat(post_data['building'].back_wall_price)+parseFloat(post_data['building'].left_wall_price)+parseFloat(post_data['building'].right_wall_price);}post_data['building'].wall_color_price=parseFloat(leantoWallColorPrice)+parseFloat(wallPriceCal)*parseFloat(WallColorObj.cost)/100;post_data['building'].order_total=parseFloat(post_data['building'].order_total)+parseFloat(post_data['building'].wall_color_price);post_data['building'].wall_color.wall_color_price=post_data['building'].wall_color_price;}if(TrimColorObj.cost!=0){var leantrimPrice=(parseFloat(leantoTrimColorPrice)+parseFloat(leantoRoofColorPrice))*TrimColorObj.cost/100;post_data['building'].trim_color_price=parseFloat(leantrimPrice)+(parseFloat(post_data['building'].roof_style_price)+parseFloat(post_data['building'].height_price))*TrimColorObj.cost/100;post_data['building'].order_total=parseFloat(post_data['building'].order_total)+parseFloat(post_data['building'].trim_color_price);post_data['building'].trim_color.trim_color_price=post_data['building'].trim_color_price;}// if(const_var.garageDoorColor[newParams.g_d_c_id].cost!=0)
// {
//     let garageDoorColorPrice = parseFloat(post_data['building'].garageDoor_color_price);
//     post_data['building'].garageDoor_color_price = parseFloat(const_var.UpdatedPriceData.garageDoor_color_price):((parseFloat(garageDoorColorPrice)* parseFloat(const_var.garageDoorColor[newParams.g_d_c_id].cost))/100);
//     post_data['building'].order_total = parseFloat(post_data['building'].order_total) + parseFloat(post_data['building'].garageDoor_color_price);
//     post_data['building'].garageDoorColor.garageDoor_color_price = parseFloat(post_data['building'].garageDoor_color_price);
// }
if(newParams.p_w_c_n==true&&WainscotColorObj.cost!=0){if(post_data['building'].wainscot_price==0){post_data['building'].wainscot_color_price=data.panel[0].cost*WainscotColorObj.cost/100;}else{post_data['building'].wainscot_color_price=parseFloat(post_data['building'].wainscot_price)*WainscotColorObj.cost/100;}// post_data['building'].wainscot_color_price = (UpdatePriceRecord==true && const_var.UpdatedPriceData.color_price_changed!=true)?const_var.UpdatedPriceData.wainscot_color_price:(parseFloat(post_data['building'].wainscot_price)  * const_var.c_m_a_Colors[newParams.p_w_c_c_id].cost)/100;
post_data['building'].order_total=parseFloat(post_data['building'].order_total)+parseFloat(post_data['building'].wainscot_color_price);post_data['building'].wainscot.wainscot_color_price=post_data['building'].wainscot_color_price;}post_data['building'].order_total=post_data['building'].order_total;post_data['building'].sub_order_total=post_data['building'].order_total;BuildingPriceArrarNew['order_total']=post_data['building'].order_total;BuildingPriceArrarNew['sub_order_total']=post_data['building'].order_total;if(CalculatesurchargeFees==undefined){CalculatesurchargeFees=0;}else{CalculatesurchargeFees=parseFloat(_reducer.const_var.order_extra_items_Compare['surchargeFees']);}// if(const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n]==undefined)
// {
//     const_var.order_extra_items['surchargeFees'] = 0;
// }
//console.log(const_var.stateManufacturerAcordingAPIDiscount['surcharge'],const_var.stateManufacturerAcordingAPIDiscount['surchargeArray'],"const_var.stateManufacturerAcordingAPIDiscount['surcharge']");
// console.log(const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n],"const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n]")
if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge']!=undefined&&_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n]==undefined){//console.log()
if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surchargeArray'][newParams.m_s_n]!=undefined){_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n]=_reducer.const_var.stateManufacturerAcordingAPIDiscount['surchargeArray']!=undefined&&_reducer.const_var.stateManufacturerAcordingAPIDiscount['surchargeArray'][newParams.m_s_n].length>0?_reducer.const_var.stateManufacturerAcordingAPIDiscount['surchargeArray'][newParams.m_s_n]:_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n];}else{_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge']=[];}}var filterData="";if(_reducer.const_var.crmSetting.is_Edit!=true&&_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge']!=undefined&&_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n]!=undefined&&Object.keys(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n]).length>0){if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n].is_edit==undefined&&_reducer.const_var.stateManufacturerAcordingAPIDiscount['surchargeArray'][newParams.m_s_n].length>0){filterData=_reducer.const_var.stateManufacturerAcordingAPIDiscount['surchargeArray'][newParams.m_s_n].filter(function(data){return post_data['building'].order_total>=data.price_from&&post_data['building'].order_total<=data.price_to;});var len=filterData.length-1;_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n]=filterData[len]!=undefined?filterData[len]:_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n];if(filterData.length==0){_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n]=filterData.length==0?undefined:_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n];}}else{_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n]=filterData.length==0?undefined:_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n];}}//console.log(filterData,"filterData",const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n],const_var.stateManufacturerAcordingAPIDiscount['surcharge'])
post_data['building'].surcharge_amount=_reducer.const_var.order_extra_items_Compare['surchargeFees'];if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge']!=undefined&&_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n]!=undefined&&_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n]!=0&&Object.keys(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n]).length>0){if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n].taxable==1&&_reducer.const_var.crmSetting.is_Edit==false){if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n].is_edit==undefined){_reducer.const_var.order_extra_items_Compare['surchargeFees']=0;if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n].amount_type=='per'){if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n].percentage_of=="building_amount"){CalculatesurchargeFees=parseFloat(parseFloat(BuildingPriceArrarNew['order_total'])*parseFloat(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n].amount)/100).toFixed(2);}else{if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n].percentage_of=="basic_price"){CalculatesurchargeFees=parseFloat((parseFloat(post_data['building'].roof_style_price)+parseFloat(leantoPriceCalculation.totalBasePrice))*parseFloat(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n].amount)/100).toFixed(2);}else{CalculatesurchargeFees=parseFloat(parseFloat(BuildingPriceArrarNew['sub_order_total'])*parseFloat(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n].amount)/100).toFixed(2);}//console.log(CalculatesurchargeFees,"CalculatesurchargeFees",const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n].amount,BuildingPriceArrarNew['sub_order_total']);
}}else{CalculatesurchargeFees=parseFloat(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n].amount);}}else{CalculatesurchargeFees=parseFloat(CalculatesurchargeFees);}post_data['building'].surcharge_taxable=_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n].taxable;post_data['building'].surcharge_amount=CalculatesurchargeFees;BuildingPriceArrarNew['surcharge_amount']=parseFloat(post_data['building'].surcharge_amount);post_data['building'].order_total=parseFloat(post_data['building'].order_total)+parseFloat(post_data['building'].surcharge_amount);BuildingPriceArrarNew['order_total']=parseFloat(BuildingPriceArrarNew['order_total'])+parseFloat(post_data['building'].surcharge_amount);if(_reducer.const_var.order_extra_items_Compare['surchargeFees']==0){_reducer.const_var.order_extra_items_Compare['surchargeFees']=parseFloat(CalculatesurchargeFees);}}else{if(_reducer.const_var.crmSetting.is_Edit==true){if(_reducer.const_var.UpdatedPriceData.surcharge_taxable==1){CalculatesurchargeFees=parseFloat(CalculatesurchargeFees);post_data['building'].surcharge_taxable=_reducer.const_var.UpdatedPriceData.surcharge_taxable;post_data['building'].surcharge_amount=CalculatesurchargeFees;BuildingPriceArrarNew['surcharge_amount']=parseFloat(post_data['building'].surcharge_amount);post_data['building'].order_total=parseFloat(post_data['building'].order_total)+parseFloat(post_data['building'].surcharge_amount);BuildingPriceArrarNew['order_total']=parseFloat(BuildingPriceArrarNew['order_total'])+parseFloat(post_data['building'].surcharge_amount);}}}}post_data['building'].sub_order_total=parseFloat(post_data['building'].order_total);BuildingPriceArrarNew['sub_order_total']=parseFloat(post_data['building'].order_total);// if(const_var.order_extra_items['surchargeFees']==undefined)
// {
//     const_var.order_extra_items['surchargeFees'] = 0;
// }
// post_data['building'].surcharge_amount = const_var.order_extra_items['surchargeFees']; 
if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][newParams.m_s_n]!=undefined&&_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][newParams.m_s_n].length>0&&_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][newParams.m_s_n].manufacturer_discount!=''){for(var i=0;i<_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][newParams.m_s_n].length;i++){if(post_data['building'].order_total>=parseInt(_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][newParams.m_s_n][i].from)&&post_data['building'].order_total<=parseInt(_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][newParams.m_s_n][i].to)){var percentage=_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][newParams.m_s_n][i].manufacturer_discount;post_data['building'].discount_rate=percentage;post_data['building'].discount_type=_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][newParams.m_s_n][i].manufacturer_discount_in=="%"?"per":'amt';_reducer.const_var.UpdatedPriceData.discount_type=post_data['building'].discount_type;post_data['building'].discount_amount=post_data['building'].discount_type=="per"?(post_data['building'].order_total*percentage/100).toFixed(2):percentage;//post_data['building'].order_total = post_data['building'].order_total - post_data['building'].discount_amount;
BuildingPriceArrarNew['sub_order_total']=BuildingPriceArrarNew['order_total']-post_data['building'].discount_amount;BuildingPriceArrarNew['discount_order_total']=parseFloat(post_data['building'].discount_amount);post_data['building'].sub_order_total=post_data['building'].sub_order_total-post_data['building'].discount_amount;}else{if(post_data['building'].order_total>parseInt(_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][newParams.m_s_n][i].from)&&post_data['building'].order_total>parseInt(_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][newParams.m_s_n][i].to)){var _percentage=0;post_data['building'].discount_rate=_percentage;post_data['building'].discount_type=_reducer.const_var.UpdatedPriceData.discount_type!=undefined?_reducer.const_var.UpdatedPriceData.discount_type:"per";post_data['building'].discount_amount=post_data['building'].discount_type=="per"?(post_data['building'].order_total*_percentage/100).toFixed(2):_percentage;//post_data['building'].order_total = post_data['building'].order_total - post_data['building'].discount_amount;
BuildingPriceArrarNew['sub_order_total']=BuildingPriceArrarNew['order_total']-post_data['building'].discount_amount;BuildingPriceArrarNew['discount_order_total']=parseFloat(post_data['building'].discount_amount);post_data['building'].sub_order_total=post_data['building'].sub_order_total-post_data['building'].discount_amount;}}}}else{var _percentage2=0;post_data['building'].discount_rate=_percentage2;post_data['building'].discount_type=_reducer.const_var.UpdatedPriceData.discount_type!=undefined?_reducer.const_var.UpdatedPriceData.discount_type:"per";post_data['building'].discount_amount=post_data['building'].discount_type=="per"?(post_data['building'].order_total*_percentage2/100).toFixed(2):_percentage2;//post_data['building'].order_total = post_data['building'].order_total - post_data['building'].discount_amount;
BuildingPriceArrarNew['sub_order_total']=BuildingPriceArrarNew['order_total']-post_data['building'].discount_amount;BuildingPriceArrarNew['discount_order_total']=parseFloat(post_data['building'].discount_amount);post_data['building'].sub_order_total=post_data['building'].sub_order_total-post_data['building'].discount_amount;}BuildingPriceArrarNew['new_sub_order_total']=0;var calVar=10;if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['commissions'][newParams.m_s_n]!=undefined&&_reducer.const_var.stateManufacturerAcordingAPIDiscount['commissions'][newParams.m_s_n].length>0){for(var i=0;i<_reducer.const_var.stateManufacturerAcordingAPIDiscount['commissions'][newParams.m_s_n].length;i++){if(post_data['building'].order_total>=parseInt(_reducer.const_var.stateManufacturerAcordingAPIDiscount['commissions'][newParams.m_s_n][i].from)&&post_data['building'].order_total<=parseInt(_reducer.const_var.stateManufacturerAcordingAPIDiscount['commissions'][newParams.m_s_n][i].to)){calVar=_reducer.const_var.stateManufacturerAcordingAPIDiscount['commissions'][newParams.m_s_n][i].percentage;_reducer.const_var.downPersentage=_reducer.const_var.stateManufacturerAcordingAPIDiscount['commissions'][newParams.m_s_n][i].percentage;post_data['building'].down_payment_total=(post_data['building'].sub_order_total*_reducer.const_var.downPersentage/100).toFixed(2);post_data['building'].down_payment_rate=_reducer.const_var.downPersentage;post_data['building'].down_payment_type="per";post_data['building'].down_payment_discount_type=_reducer.const_var.UpdatedPriceData.down_payment_discount_type!=undefined?_reducer.const_var.UpdatedPriceData.down_payment_discount_type:"per";post_data['building'].discount_type=_reducer.const_var.UpdatedPriceData.discount_type!=undefined?_reducer.const_var.UpdatedPriceData.discount_type:"per";post_data['building'].dealer_deposit=post_data['building'].sub_order_total*_reducer.const_var.downPersentage/100;BuildingPriceArrarNew['down_payment_total']=parseFloat(BuildingPriceArrarNew['sub_order_total'])*parseFloat(_reducer.const_var.downPersentage)/100;BuildingPriceArrarNew['dealer_deposit']=parseFloat(BuildingPriceArrarNew['sub_order_total'])*parseFloat(_reducer.const_var.downPersentage)/100;BuildingPriceArrarNew['new_sub_order_total']=parseFloat(BuildingPriceArrarNew['sub_order_total'])-parseFloat(BuildingPriceArrarNew['down_payment_total']);}else{_reducer.const_var.downPersentage=calVar;post_data['building'].down_payment_total=(post_data['building'].sub_order_total*_reducer.const_var.downPersentage/100).toFixed(2);post_data['building'].down_payment_rate=_reducer.const_var.downPersentage;post_data['building'].down_payment_type="per";post_data['building'].down_payment_discount_type=_reducer.const_var.UpdatedPriceData.down_payment_discount_type!=undefined?_reducer.const_var.UpdatedPriceData.down_payment_discount_type:"per";post_data['building'].discount_type=_reducer.const_var.UpdatedPriceData.discount_type!=undefined?_reducer.const_var.UpdatedPriceData.discount_type:"per";post_data['building'].dealer_deposit=post_data['building'].sub_order_total*_reducer.const_var.downPersentage/100;BuildingPriceArrarNew['down_payment_total']=parseFloat(BuildingPriceArrarNew['sub_order_total'])*parseFloat(_reducer.const_var.downPersentage)/100;BuildingPriceArrarNew['dealer_deposit']=parseFloat(BuildingPriceArrarNew['sub_order_total'])*parseFloat(_reducer.const_var.downPersentage)/100;BuildingPriceArrarNew['new_sub_order_total']=parseFloat(BuildingPriceArrarNew['sub_order_total'])-parseFloat(BuildingPriceArrarNew['down_payment_total']);}}}else{_reducer.const_var.downPersentage=10;post_data['building'].down_payment_total=(post_data['building'].sub_order_total*_reducer.const_var.downPersentage/100).toFixed(2);post_data['building'].down_payment_rate=_reducer.const_var.downPersentage;post_data['building'].down_payment_type="per";post_data['building'].down_payment_discount_type=_reducer.const_var.UpdatedPriceData.down_payment_discount_type!=undefined?_reducer.const_var.UpdatedPriceData.down_payment_discount_type:"per";post_data['building'].discount_type=_reducer.const_var.UpdatedPriceData.discount_type!=undefined?_reducer.const_var.UpdatedPriceData.discount_type:"per";post_data['building'].dealer_deposit=post_data['building'].sub_order_total*_reducer.const_var.downPersentage/100;BuildingPriceArrarNew['down_payment_total']=parseFloat(BuildingPriceArrarNew['sub_order_total'])*parseFloat(_reducer.const_var.downPersentage)/100;BuildingPriceArrarNew['dealer_deposit']=parseFloat(BuildingPriceArrarNew['sub_order_total'])*parseFloat(_reducer.const_var.downPersentage)/100;BuildingPriceArrarNew['new_sub_order_total']=parseFloat(BuildingPriceArrarNew['sub_order_total'])-parseFloat(BuildingPriceArrarNew['down_payment_total']);}BuildingPriceArrarNew['new_down_payment_total']=parseFloat(post_data['building'].down_payment_total);if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][newParams.m_s_n]!=undefined&&_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][newParams.m_s_n].length>0&&_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][newParams.m_s_n].dealer_discount!=''){for(var i=0;i<_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][newParams.m_s_n].length;i++){if(post_data['building'].order_total>=parseInt(_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][newParams.m_s_n][i].from)&&post_data['building'].order_total<=parseInt(_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][newParams.m_s_n][i].to)){var _percentage3=_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][newParams.m_s_n][i].dealer_discount;post_data['building'].down_payment_discount_rate=_percentage3;post_data['building'].down_payment_discount_type=_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][newParams.m_s_n][i].dealer_discount_in=="%"?"per":'amt';_reducer.const_var.UpdatedPriceData.down_payment_discount_type=post_data['building'].down_payment_discount_type;post_data['building'].down_payment_discount_total=post_data['building'].down_payment_discount_type=="amt"?parseFloat(_percentage3):(parseFloat(post_data['building'].down_payment_total)*parseFloat(_percentage3)/100).toFixed(2);BuildingPriceArrarNew['down_payment_discount_total']=post_data['building'].down_payment_discount_type=="amt"?parseFloat(_percentage3):parseFloat(parseFloat(BuildingPriceArrarNew['down_payment_total'])*parseFloat(_percentage3))/100;BuildingPriceArrarNew['new_down_payment_total']=parseFloat(BuildingPriceArrarNew['down_payment_total'])-parseFloat(BuildingPriceArrarNew['down_payment_discount_total']);//post_data['building'].down_payment_total = (parseInt(post_data['building'].down_payment_total) - parseInt(post_data['building'].down_payment_discount_total));
//post_data['building'].order_total = post_data['building'].order_total - post_data['building'].down_payment_discount_total;
}else{if(post_data['building'].order_total>parseInt(_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][newParams.m_s_n][i].from)&&post_data['building'].order_total>parseInt(_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][newParams.m_s_n][i].to)){var _percentage4=0;post_data['building'].down_payment_discount_rate=_percentage4;post_data['building'].down_payment_discount_type=_reducer.const_var.UpdatedPriceData.down_payment_discount_type!=undefined?_reducer.const_var.UpdatedPriceData.down_payment_discount_type:"per";post_data['building'].down_payment_discount_total=post_data['building'].down_payment_discount_type=="amt"?parseFloat(_percentage4):(parseFloat(post_data['building'].down_payment_total)*parseFloat(_percentage4)/100).toFixed(2);BuildingPriceArrarNew['down_payment_discount_total']=post_data['building'].down_payment_discount_type=="amt"?parseFloat(_percentage4):parseFloat(parseFloat(BuildingPriceArrarNew['down_payment_total'])*parseFloat(_percentage4))/100;BuildingPriceArrarNew['new_down_payment_total']=parseFloat(BuildingPriceArrarNew['down_payment_total'])-parseFloat(BuildingPriceArrarNew['down_payment_discount_total']);}}}}else{var _percentage5=0;post_data['building'].down_payment_discount_rate=_percentage5;post_data['building'].down_payment_discount_type=_reducer.const_var.UpdatedPriceData.down_payment_discount_type!=undefined?_reducer.const_var.UpdatedPriceData.down_payment_discount_type:"per";post_data['building'].down_payment_discount_total=post_data['building'].down_payment_discount_type=="amt"?parseFloat(_percentage5):(parseFloat(post_data['building'].down_payment_total)*parseFloat(_percentage5)/100).toFixed(2);BuildingPriceArrarNew['down_payment_discount_total']=post_data['building'].down_payment_discount_type=="amt"?parseFloat(_percentage5):parseFloat(parseFloat(BuildingPriceArrarNew['down_payment_total'])*parseFloat(_percentage5))/100;BuildingPriceArrarNew['new_down_payment_total']=parseFloat(BuildingPriceArrarNew['down_payment_total'])-parseFloat(BuildingPriceArrarNew['down_payment_discount_total']);}if(post_data['building'].discount_type==undefined){post_data['building'].discount_type=_reducer.const_var.UpdatedPriceData.discount_type!=undefined?_reducer.const_var.UpdatedPriceData.discount_type:"per";}if(post_data['building'].down_payment_discount_type==undefined){post_data['building'].down_payment_discount_type=_reducer.const_var.UpdatedPriceData.down_payment_discount_type!=undefined?_reducer.const_var.UpdatedPriceData.down_payment_discount_type:"per";}if(_reducer.const_var.tax.type=="%"){_reducer.const_var.tax.type="per";}if(_reducer.const_var.tax.type=="$"){_reducer.const_var.tax.type="amt";}post_data['building'].grand_total=parseFloat(post_data['building'].order_total);// if(post_data['building'].down_payment_discount_total!=undefined && post_data['building'].down_payment_discount_total!=0)
// {
//     post_data['building'].grand_total = parseInt(post_data['building'].grand_total) - parseInt(post_data['building'].down_payment_discount_total);
// }
var newTaxArray=[];var taxCalculation=0;if(_reducer.const_var.tax.percentage!=0&&_reducer.const_var.tax.percentage!=undefined){taxCalculation=_reducer.const_var.tax.type=="per"?(taxCalculation+post_data['building'].sub_order_total*_reducer.const_var.tax.percentage/100).toFixed(2):parseFloat(taxCalculation+_reducer.const_var.tax.percentage);_reducer.const_var.tax.amount=taxCalculation;_reducer.const_var.tax.name=_reducer.const_var.tax.name==""||_reducer.const_var.tax.name==undefined?'sales_tax':_reducer.const_var.tax.name;//newTaxArray[const_var.MoreTaxinputs.length] = const_var.tax;
post_data['building'].parentTax=_reducer.const_var.tax;_reducer.const_var.sendTaxarray.push(_reducer.const_var.tax);//const_var.newTaxCalcuArray[const_var.tax.name] = const_var.tax.amount;
// const_var.newTaxCalcuArray.push(const_var.tax);
}var moretaxCalculation=0;if(_reducer.const_var.MoreTaxinputs!=undefined&&_reducer.const_var.MoreTaxinputs.length>0){_reducer.const_var.MoreTaxinputs.map(function(val,index){_reducer.const_var.MoreTaxinputs[index].amount=val.type=="per"?(post_data['building'].sub_order_total*val.percentage/100).toFixed(2):val.percentage;//post_data['building'].tax_amount = moretaxCalculation;
_reducer.const_var.MoreTaxinputs[index].more_tax_amount=val.type=="per"?(post_data['building'].sub_order_total*val.percentage/100).toFixed(2):val.percentage;moretaxCalculation=parseFloat(moretaxCalculation)+parseFloat(_reducer.const_var.MoreTaxinputs[index].amount);_reducer.const_var.MoreTaxinputs[index].name=_reducer.const_var.MoreTaxinputs[index].name==""||_reducer.const_var.MoreTaxinputs[index].name==undefined?"sales_tax":_reducer.const_var.MoreTaxinputs[index].name;_reducer.const_var.sendTaxarray.push(_reducer.const_var.MoreTaxinputs[index]);});post_data['building'].MoreTaxinputs=_reducer.const_var.MoreTaxinputs;//const_var.newTaxCalcuArray.push(const_var.MoreTaxinputs);
}post_data['building'].all_tax_amount=_reducer.const_var.tax.type=="per"?parseFloat(taxCalculation)+parseFloat(moretaxCalculation):parseFloat(taxCalculation)+parseFloat(moretaxCalculation);//console.log(const_var.newTaxCalcuArray,"const_var.newTaxCalcuArray")
post_data['building'].tax_amount=_reducer.const_var.tax.type=="per"?parseFloat(taxCalculation):parseFloat(taxCalculation);post_data['building'].tax_zipcode=newParams.tax_zipcode;post_data['building'].tax_exempt=newParams.tax_exempt==false?0:1;post_data['building'].tax=_reducer.const_var.sendTaxarray;//{...newTaxArray,...const_var.MoreTaxinputs};
post_data['building'].grand_total=post_data['building'].grand_total+parseFloat(taxCalculation)+parseFloat(moretaxCalculation);if(_reducer.const_var.card_processing_fee!=undefined&&Object.keys(_reducer.const_var.card_processing_fee).length>0&&_reducer.const_var.card_processing_fee.is_edit==undefined&&_reducer.const_var.crmSetting.is_Edit!=true){if(_reducer.const_var.card_processing_fee.percentage_of=="base_price"){if(_reducer.const_var.card_processing_fee.type=="%"){_reducer.const_var.order_extra_items_Compare['processing_fee']=(post_data['building'].roof_style_price*_reducer.const_var.card_processing_fee.fee/100).toFixed(2);}else{_reducer.const_var.order_extra_items_Compare['processing_fee']=parseFloat(_reducer.const_var.card_processing_fee.fee).toFixed(2);}}if(_reducer.const_var.card_processing_fee.percentage_of=="building_amount"){if(_reducer.const_var.card_processing_fee.type=="%"){_reducer.const_var.order_extra_items_Compare['processing_fee']=(post_data['building'].order_total*_reducer.const_var.card_processing_fee.fee/100).toFixed(2);}else{_reducer.const_var.order_extra_items_Compare['processing_fee']=parseFloat(_reducer.const_var.card_processing_fee.fee).toFixed(2);}}if(_reducer.const_var.card_processing_fee.percentage_of=="dealer_deposit"){if(_reducer.const_var.card_processing_fee.type=="%"){_reducer.const_var.order_extra_items_Compare['processing_fee']=(post_data['building'].dealer_deposit*_reducer.const_var.card_processing_fee.fee/100).toFixed(2);}else{_reducer.const_var.order_extra_items_Compare['processing_fee']=parseFloat(_reducer.const_var.card_processing_fee.fee).toFixed(2);}}}if(_reducer.const_var.stateManufacturerAcordingAPI[_reducer.params.p_s_n]!=undefined&&_reducer.const_var.stateManufacturerAcordingAPI[_reducer.params.p_s_n].length>0){_reducer.const_var.stateManufacturerAcordingAPI[_reducer.params.p_s_n].map(function(val,key){if(val.id==newParams.m_s_n){_reducer.const_var.order_extra_items_Compare['document_fee']=val.document_fee!=null?val.document_fee:0;_reducer.const_var.order_extra_items_Compare['order_processing_fee']=val.order_processing_fee!=null?val.order_processing_fee:0;}});}BuildingPriceArrarNew['additional_charges']=0;if(_reducer.const_var.order_extra_items_Compare!=undefined){post_data['building'].grand_total=parseFloat(post_data['building'].grand_total)+parseFloat(_reducer.const_var.order_extra_items_Compare['equipment_rental']);post_data['building'].grand_total=parseFloat(post_data['building'].grand_total)+parseFloat(_reducer.const_var.order_extra_items_Compare['document_fee']);post_data['building'].grand_total=parseFloat(post_data['building'].grand_total)+parseFloat(_reducer.const_var.order_extra_items_Compare['order_processing_fee']);post_data['building'].grand_total=parseFloat(post_data['building'].grand_total)+parseFloat(_reducer.const_var.order_extra_items_Compare['delivery_fee']);post_data['building'].grand_total=parseFloat(post_data['building'].grand_total)+parseFloat(_reducer.const_var.order_extra_items_Compare['engineer_drawings']);post_data['building'].grand_total=parseFloat(post_data['building'].grand_total)+parseFloat(_reducer.const_var.order_extra_items_Compare['freight']);post_data['building'].grand_total=parseFloat(post_data['building'].grand_total)+parseFloat(_reducer.const_var.order_extra_items_Compare['extra_labour']);post_data['building'].grand_total=parseFloat(post_data['building'].grand_total)+parseFloat(_reducer.const_var.order_extra_items_Compare['grvy_value']);post_data['building'].grand_total=parseFloat(post_data['building'].grand_total)+parseFloat(_reducer.const_var.order_extra_items_Compare['concrete_work']);post_data['building'].grand_total=parseFloat(post_data['building'].grand_total)+parseFloat(_reducer.const_var.order_extra_items_Compare['ground_work']);post_data['building'].grvy_value=parseFloat(_reducer.const_var.order_extra_items_Compare['grvy_value']);_reducer.const_var.order_extra_items_Compare['order_processing_fee']=_reducer.const_var.order_extra_items_Compare['order_processing_fee']==undefined?0:_reducer.const_var.order_extra_items_Compare['order_processing_fee'];BuildingPriceArrarNew['grvy_value']=post_data['building'].grvy_value;BuildingPriceArrarNew['additional_charges']=parseFloat(BuildingPriceArrarNew['additional_charges'])+parseFloat(_reducer.const_var.order_extra_items_Compare['equipment_rental'])+parseFloat(_reducer.const_var.order_extra_items_Compare['concrete_work'])+parseFloat(_reducer.const_var.order_extra_items_Compare['ground_work'])+parseFloat(_reducer.const_var.order_extra_items_Compare['document_fee'])+parseFloat(_reducer.const_var.order_extra_items_Compare['order_processing_fee'])+parseFloat(_reducer.const_var.order_extra_items_Compare['delivery_fee'])+parseFloat(_reducer.const_var.order_extra_items_Compare['engineer_drawings'])+parseFloat(_reducer.const_var.order_extra_items_Compare['freight'])+parseFloat(_reducer.const_var.order_extra_items_Compare['extra_labour']);if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge']!=undefined&&_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n]!=undefined&&Object.keys(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n]).length>0){if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n].taxable==0&&_reducer.const_var.crmSetting.is_Edit==false){if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n].is_edit==undefined){_reducer.const_var.order_extra_items_Compare['surchargeFees']=0;if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n].amount_type=='per'){if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n].percentage_of=="building_amount"){CalculatesurchargeFees=parseFloat(parseFloat(BuildingPriceArrarNew['order_total'])*parseFloat(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n].amount)/100).toFixed(2);}else{if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n].percentage_of=="basic_price"){CalculatesurchargeFees=parseFloat((parseFloat(post_data['building'].roof_style_price)+parseFloat(leantoPriceCalculation.totalBasePrice))*parseFloat(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n].amount)/100).toFixed(2);}else{CalculatesurchargeFees=parseFloat(parseFloat(BuildingPriceArrarNew['sub_order_total'])*parseFloat(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n].amount)/100).toFixed(2);}//console.log(CalculatesurchargeFees,"CalculatesurchargeFees",const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n].amount,BuildingPriceArrarNew['sub_order_total']);
}}else{CalculatesurchargeFees=parseFloat(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n].amount);}}else{CalculatesurchargeFees=CalculatesurchargeFees;}post_data['building'].surcharge_taxable=_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n].taxable;post_data['building'].surcharge_amount=CalculatesurchargeFees;post_data['building'].grand_total=parseFloat(post_data['building'].grand_total)+parseFloat(CalculatesurchargeFees);BuildingPriceArrarNew['additional_charges']=parseFloat(BuildingPriceArrarNew['additional_charges'])+parseFloat(CalculatesurchargeFees);if(_reducer.const_var.order_extra_items_Compare['surchargeFees']==0){_reducer.const_var.order_extra_items_Compare['surchargeFees']=parseFloat(CalculatesurchargeFees);}}}else{CalculatesurchargeFees=0;// console.log(post_data['building'].surcharge_amount,"post_data['building'].surcharge_amount")
BuildingPriceArrarNew['additional_charges']=parseFloat(BuildingPriceArrarNew['additional_charges'])+parseFloat(CalculatesurchargeFees);}if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge']!=undefined&&_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][newParams.m_s_n]==undefined){CalculatesurchargeFees=post_data['building'].surcharge_amount!=0?post_data['building'].surcharge_amount:parseFloat(CalculatesurchargeFees);post_data['building'].surcharge_taxable=0;post_data['building'].surcharge_amount=CalculatesurchargeFees;post_data['building'].grand_total=parseFloat(post_data['building'].grand_total)+parseFloat(CalculatesurchargeFees);BuildingPriceArrarNew['additional_charges']=parseFloat(BuildingPriceArrarNew['additional_charges'])+parseFloat(CalculatesurchargeFees);}if(_reducer.const_var.order_extra_items_Compare['dont_show_processing_fee_pdf']!=undefined&&_reducer.const_var.order_extra_items_Compare['dont_show_processing_fee_pdf']=="1"){BuildingPriceArrarNew['new_down_payment_total']=BuildingPriceArrarNew['new_down_payment_total']+parseFloat(_reducer.const_var.order_extra_items_Compare['processing_fee']);BuildingPriceArrarNew['new_sub_order_total']=BuildingPriceArrarNew['new_sub_order_total']+parseFloat(_reducer.const_var.order_extra_items_Compare['processing_fee']);BuildingPriceArrarNew['processing_fee']=parseFloat(_reducer.const_var.order_extra_items_Compare['processing_fee']);post_data['building'].grand_total=parseFloat(post_data['building'].grand_total)+parseFloat(_reducer.const_var.order_extra_items_Compare['processing_fee']);}if(post_data['building'].discount_amount!=undefined&&post_data['building'].discount_amount!=0){post_data['building'].has_grvy=1;}else{post_data['building'].has_grvy=0;}BuildingPriceArrarNew['has_grvy']=post_data['building'].has_grvy;_reducer.const_var.order_extra_items_Compare.has_grvy=post_data['building'].has_grvy;post_data['building'].order_extra_items=_reducer.const_var.order_extra_items_Compare;}post_data['building'].due_upon_installation=parseFloat(BuildingPriceArrarNew['new_sub_order_total'])+parseFloat(BuildingPriceArrarNew['additional_charges'])+parseFloat(post_data['building'].all_tax_amount);BuildingPriceArrarNew['grand_total']=post_data['building'].grand_total+post_data['building'].tax_amount;post_data['building'].grand_total=post_data['building'].due_upon_installation+BuildingPriceArrarNew['new_down_payment_total']+BuildingPriceArrarNew['grvy_value'];post_data['building'].dealer_deposit=BuildingPriceArrarNew['new_down_payment_total']+BuildingPriceArrarNew['grvy_value'];post_data['building']['extra_items']=extra_items;post_data['building']['entry_points']=newEntryPoint;post_data['building']['hide_price_calculation']=_reducer.const_var.hide_price_calculation;post_data['building'].BuildingPriceArrarNew=JSON.parse(JSON.stringify(BuildingPriceArrarNew));_reducer.const_var.MainBuilingImage=_reducer.const_var.renderer.domElement.toDataURL("image/jpeg");var newJsonData={};newJsonData['building']=_objectSpread({},_reducer.const_var.order_extra_items_Compare,{},post_data['building']);newJsonData.building_total=t_c;_reducer.const_var.ComparisionDataArray[iiD].post_data=newJsonData;_reducer.const_var.ComparisionDataArray[iiD].post_data=_objectSpread({},_reducer.const_var.ComparisionDataArray[iiD].post_data,{},_reducer.const_var.LeadCustomerData);filtterArrayElements();};exports.setComparePricingData=setComparePricingData;var cP=function cP(chk){_reducer.const_var.newTaxCalcuArray=[];_reducer.const_var.sendTaxarray=[];var CalculatesurchargeFees=0;var CheckCut=chk;var data=_reducer.const_var.a_p_d_a;var b_f_o_J={};var t_c_b=0;var t_c=0;var post_data={};post_data['building']={};var a_p_d_a=data;_reducer.params.p_w=parseInt(_reducer.params.p_w);_reducer.params.p_d=parseInt(_reducer.params.p_d);_reducer.params.p_h=parseInt(_reducer.params.p_h);var a,b={};var extra_items=[];var extra_price_cal=[];var activeLean="";var CalCulateRoofBasePrice=0;var CalCulateRoofUtilityEndPrice=0;var CalCulateRoofEndClosePrice=0;var CalCulateRoofEndGablePrice=0;var UpdatePriceRecord=false;var VUEData=_reducer.const_var.CallApionAction==false?_reducer.const_var.defaultProData:'';if(_reducer.const_var.UpdatedPriceData.length>0){UpdatePriceRecord=true;}if(_reducer.const_var.loginSession==false){_reducer.const_var.UpdatedPriceData.down_payment_rate=undefined;}var heightFullData="";a={'state_name':_reducer.const_var.stateNameAcordingAPI[_reducer.params.p_s_n].name,'state_list':_reducer.params.p_s_n,'state':_reducer.params.p_s_n,'manufacturer_name':_reducer.const_var.stateManufacturerAcordingAPIDiscount['manuName'][_reducer.params.m_s_n],'manufacturer':_reducer.params.m_s_n,"building_type":_reducer.params.p_b_t,"building_type_name":_reducer.params.building_type_name,"display_building_type_name":_reducer.params.building_type_name,"checkeditName":_reducer.params.checkeditName,"other_building_type_name":_reducer.params.other_building_type_name,"roof_style":_reducer.params.p_r_s,"roof_style_name":_reducer.const_var.TypeEnumID[_reducer.params.p_r_s],"installation_surface":ConvStr(_reducer.const_var.installationValue[_reducer.params.p_i_s]),"width":_reducer.params.p_b_t=="2"?_reducer.params.p_w+24:_reducer.params.p_w,"length":_reducer.params.p_d,"height":_reducer.params.p_h,"roof_length":_reducer.params.frame_length,"gauge":_reducer.const_var.g_v,"front_wall":_reducer.params.p_f_w=="Extended Gable"?'extended_gable':ConvStr(_reducer.params.p_f_w),"back_wall":_reducer.params.p_b_w=="Extended Gable"?'extended_gable':ConvStr(_reducer.params.p_b_w),"left_wall":ConvStr(_reducer.params.p_l_w),"right_wall":ConvStr(_reducer.params.p_r_w),"back_wall_price":0,"front_wall_price":0,"left_wall_price":0,"right_wall_price":0,"front_wall_vertical":_reducer.params.p_v_w,"back_wall_vertical":_reducer.params.p_v_w,"left_wall_vertical":_reducer.params.p_v_w,"right_wall_vertical":_reducer.params.p_v_w,"vertical_walls":_reducer.params.p_v_w,"heavy_snow":_reducer.const_var.CheckSnowLoadValue==35?0:1,"certificate":_reducer.const_var.c_f_aCer[_reducer.params.p_e_i],"singleSlope":_reducer.params.singleSlope,"certificate_name":_reducer.const_var.c_f_aCer[_reducer.params.p_e_i]!=undefined?_reducer.const_var.c_f_aCer[_reducer.params.p_e_i].name:''};data=a_p_d_a;if(_reducer.params.p_u_c==true){data.side=data.side;data.panel=data.panel;data.end=data.end;heightFullData=data.full_length_side!=undefined?data.full_length_side:data.side;}else{data.side=data.full_length_side!=undefined?data.full_length_side:data.side;data.panel=data.full_length_panel!=undefined?data.full_length_panel:data.panel;data.end=data.central_end!=undefined&&data.central_end.length>0?data.central_end:data.end;heightFullData=data.full_length_side!=undefined?data.full_length_side:data.side;if(_reducer.params.add_left_lean==true&&_reducer.const_var.leanGetDataLeft.central_side!=undefined&&_reducer.const_var.leanGetDataLeft.central_side.length>0){data.side=_reducer.const_var.leanGetDataLeft.central_side;heightFullData=_reducer.const_var.leanGetDataLeft.central_side_full_length!=undefined?_reducer.const_var.leanGetDataLeft.central_side_full_length:data.side;}if(_reducer.params.add_front_lean==true&&_reducer.const_var.leanGetDataFront.central_side!=undefined&&_reducer.const_var.leanGetDataFront.central_side.length>0){data.side=_reducer.const_var.leanGetDataFront.central_side;heightFullData=_reducer.const_var.leanGetDataFront.central_side_full_length!=undefined?_reducer.const_var.leanGetDataFront.central_side_full_length:data.side;}if(_reducer.params.add_left_lean==true&&_reducer.const_var.leanGetDataLeft.central_end!=undefined&&_reducer.const_var.leanGetDataLeft.central_end.length>0){data.end=_reducer.const_var.leanGetDataLeft.central_end;}if(_reducer.params.add_front_lean==true&&_reducer.const_var.leanGetDataFront.central_end!=undefined&&_reducer.const_var.leanGetDataFront.central_end.length>0){data.end=_reducer.const_var.leanGetDataFront.central_end;}if(_reducer.params.add_right_lean==true&&_reducer.const_var.leanGetDataRight.central_side!=undefined&&_reducer.const_var.leanGetDataRight.central_side.length>0){data.side=_reducer.const_var.leanGetDataRight.central_side;heightFullData=_reducer.const_var.leanGetDataRight.central_side_full_length!=undefined?_reducer.const_var.leanGetDataRight.central_side_full_length:data.side;}if(_reducer.params.add_right_lean==true&&_reducer.const_var.leanGetDataRight.central_end!=undefined&&_reducer.const_var.leanGetDataRight.central_end.length>0){data.end=_reducer.const_var.leanGetDataRight.central_end;}if(_reducer.params.add_back_lean==true&&_reducer.const_var.leanGetDataBack.central_side!=undefined&&_reducer.const_var.leanGetDataBack.central_side.length>0){data.side=_reducer.const_var.leanGetDataBack.central_side;heightFullData=_reducer.const_var.leanGetDataBack.central_side_full_length!=undefined?_reducer.const_var.leanGetDataBack.central_side_full_length:data.side;}if(_reducer.params.add_back_lean==true&&_reducer.const_var.leanGetDataBack.central_end!=undefined&&_reducer.const_var.leanGetDataBack.central_end.length>0){data.end=_reducer.const_var.leanGetDataBack.central_end;}}var LeftWallSidePrice=data.side;if(_reducer.params.singleSlope==true){LeftWallSidePrice=data.side_slope_height!=undefined&&data.side_slope_height.length>0?data.side_slope_height:data.side;}var connection_feesCost=0;var connection_feesEnd=0;if(data.connection_fees!=undefined&&data.connection_fees.length>0){if(_reducer.params.add_right_lean==true&&_reducer.const_var.leanGetDataRight!=""&&_reducer.const_var.leanGetDataRight!=undefined){connection_feesCost=_reducer.const_var.UpdatedPriceData.connection_fee_side_changed!=true?_reducer.const_var.UpdatedPriceData.connection_fee_side:_reducer.const_var.leanGetDataRight.connection_fees[0].cost+connection_feesCost;a.connection_fee_side=connection_feesCost;}if(_reducer.params.add_left_lean==true&&_reducer.const_var.leanGetDataLeft!=""&&_reducer.const_var.leanGetDataLeft!=undefined){connection_feesCost=_reducer.const_var.UpdatedPriceData.connection_fee_side_changed!=true?_reducer.const_var.UpdatedPriceData.connection_fee_side:_reducer.const_var.leanGetDataLeft.connection_fees[0].cost+connection_feesCost;a.connection_fee_side=connection_feesCost;}if(_reducer.params.add_front_lean==true&&_reducer.const_var.leanGetDataFront!=""&&_reducer.const_var.leanGetDataFront!=undefined){connection_feesCost=_reducer.const_var.UpdatedPriceData.connection_fee_side_changed!=true?_reducer.const_var.UpdatedPriceData.connection_fee_side:_reducer.const_var.leanGetDataFront.connection_fees[0].cost+connection_feesCost;a.connection_fee_side=connection_feesCost;}if(_reducer.params.add_back_lean==true&&_reducer.const_var.leanGetDataBack!=""&&_reducer.const_var.leanGetDataBack!=undefined){connection_feesCost=_reducer.const_var.UpdatedPriceData.connection_fee_side_changed!=true?_reducer.const_var.UpdatedPriceData.connection_fee_side:_reducer.const_var.leanGetDataBack.connection_fees[0].cost+connection_feesCost;a.connection_fee_side=connection_feesCost;}}else{a.connection_fee_side=0;}if(data.connection_fees!=undefined&&data.connection_fees.length>0){if(_reducer.params.add_right_lean==true&&_reducer.const_var.leanGetDataRight!=""){connection_feesEnd=_reducer.const_var.UpdatedPriceData.connection_fee_end_changed!=true?_reducer.const_var.UpdatedPriceData.connection_fee_end:data.connection_fees[0].end_cost+_reducer.const_var.leanGetDataRight.connection_fees[0].end_cost+connection_feesEnd;a.connection_fee_end=connection_feesEnd;}if(_reducer.params.add_left_lean==true&&_reducer.const_var.leanGetDataLeft!=""){connection_feesEnd=_reducer.const_var.UpdatedPriceData.connection_fee_end_changed!=true?_reducer.const_var.UpdatedPriceData.connection_fee_end:data.connection_fees[0].end_cost+_reducer.const_var.leanGetDataLeft.connection_fees[0].end_cost+connection_feesEnd;a.connection_fee_end=connection_feesEnd;}if(_reducer.params.add_front_lean==true&&_reducer.const_var.leanGetDataFront!=""){connection_feesEnd=_reducer.const_var.UpdatedPriceData.connection_fee_end_changed!=true?_reducer.const_var.UpdatedPriceData.connection_fee_end:data.connection_fees[0].end_cost+_reducer.const_var.leanGetDataFront.connection_fees[0].end_cost+connection_feesEnd;a.connection_fee_end=connection_feesEnd;}if(_reducer.params.add_back_lean==true&&_reducer.const_var.leanGetDataBack!=""){connection_feesEnd=_reducer.const_var.UpdatedPriceData.connection_fee_end_changed!=true?_reducer.const_var.UpdatedPriceData.connection_fee_end:data.connection_fees[0].end_cost+_reducer.const_var.leanGetDataBack.connection_fees[0].end_cost+connection_feesEnd;a.connection_fee_end=connection_feesEnd;}//b.connection_fee_side = (params.b_h_t2 )?(data.connection_fees[0].cost * 2):(data.connection_fees[0].cost);
if(_reducer.params.add_right_lean==false&&_reducer.params.add_left_lean==false&&_reducer.params.add_front_lean==false&&_reducer.params.add_back_lean==false){connection_feesEnd=_reducer.const_var.UpdatedPriceData.connection_fee_end_changed!=true?_reducer.const_var.UpdatedPriceData.connection_fee_end:data.connection_fees[0].end_cost;a.connection_fee_end=connection_feesEnd;}}else{a.connection_fee_end=0;}post_data['building']=_objectSpread({},a,{},b);t_c=0;var vertiP=0;var vertiP2=0;var mapVal=_reducer.const_var.map[_reducer.params.p_r_s];var utilityLen=_reducer.params.p_u_c==true?Number(_reducer.params.p_u_t):_reducer.params.p_d;if(data.base.length>0){for(var i=0;i<data.base.length;i++){if(_reducer.const_var.g_v==data.base[i].gauge){post_data['building'].roof_style_price=_reducer.const_var.UpdatedPriceData.roof_style_price_changed!=true?_reducer.const_var.UpdatedPriceData.roof_style_price:data.base[i][mapVal];t_c=parseFloat(t_c)+parseFloat(post_data['building'].roof_style_price);CalCulateRoofBasePrice=post_data['building'].roof_style_price;}}}else{post_data['building'].roof_style_price=_reducer.const_var.UpdatedPriceData.roof_style_price_changed!=true?_reducer.const_var.UpdatedPriceData.roof_style_price:0;t_c=parseFloat(t_c)+parseFloat(post_data['building'].roof_style_price);CalCulateRoofBasePrice=post_data['building'].roof_style_price;}if(post_data['building'].connection_fee_side!=undefined){t_c=parseFloat(t_c)+parseFloat(post_data['building'].connection_fee_side);}if(post_data['building'].connection_fee_end!=undefined){t_c=parseFloat(t_c)+parseFloat(post_data['building'].connection_fee_end);}if(_reducer.params.add_left_front_lean_porch==true&&data.connection_fees!=undefined&&data.connection_fees.length>0){post_data['building'].connection_fee_left_front=data.connection_fees[0].wrap_around_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].connection_fee_left_front);}if(_reducer.params.add_right_front_lean_porch==true&&data.connection_fees!=undefined&&data.connection_fees.length>0){post_data['building'].connection_fee_right_front=data.connection_fees[0].wrap_around_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].connection_fee_right_front);}if(_reducer.params.add_right_back_lean_porch==true&&data.connection_fees!=undefined&&data.connection_fees.length>0){post_data['building'].connection_fee_right_back=data.connection_fees[0].wrap_around_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].connection_fee_right_back);}if(_reducer.params.add_left_back_lean_porch==true&&data.connection_fees!=undefined&&data.connection_fees.length>0){post_data['building'].connection_fee_left_back=data.connection_fees[0].wrap_around_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].connection_fee_left_back);}if(_reducer.params.p_l_w=="Close"){if(_reducer.params.cB_addStorage_check_left!=true){post_data['building'].left_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_wall_price_changed!=true?_reducer.const_var.UpdatedPriceData.left_wall_price:_reducer.params.p_v_w==true?LeftWallSidePrice[0].vertical_side_cost+LeftWallSidePrice[0].side_close_cost:LeftWallSidePrice[0].side_close_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].left_wall_price);}else{post_data['building'].left_wall_price=0;t_c=parseFloat(t_c)+parseFloat(post_data['building'].left_wall_price);}}if(_reducer.params.p_l_w=="Half_Close"){post_data['building'].left_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_wall_price_changed!=true?_reducer.const_var.UpdatedPriceData.left_wall_price:_reducer.params.p_v_w==true?(LeftWallSidePrice[0].half_vertical_side_cost+LeftWallSidePrice[0].half_side_close_cost).toFixed(2):LeftWallSidePrice[0].half_side_close_cost.toFixed(2);t_c=parseFloat(t_c)+parseFloat(post_data['building'].left_wall_price);}if(_reducer.params.p_l_w=="One_Fourth_Close"){post_data['building'].left_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_wall_price_changed!=true?_reducer.const_var.UpdatedPriceData.left_wall_price:_reducer.params.p_v_w==true?(LeftWallSidePrice[0].one_fourth_vertical_side_cost+LeftWallSidePrice[0].one_fourth_side_close_cost).toFixed(2):LeftWallSidePrice[0].one_fourth_side_close_cost.toFixed(2);t_c=parseFloat(t_c)+parseFloat(post_data['building'].left_wall_price);}if(_reducer.params.p_l_w=="Three_Fourth_Close"){post_data['building'].left_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_wall_price_changed!=true?_reducer.const_var.UpdatedPriceData.left_wall_price:_reducer.params.p_v_w==true?(LeftWallSidePrice[0].three_fourth_vertical_side_cost+LeftWallSidePrice[0].three_fourth_side_close_cost).toFixed(2):LeftWallSidePrice[0].three_fourth_side_close_cost.toFixed(2);t_c=parseFloat(t_c)+parseFloat(post_data['building'].left_wall_price);}if(_reducer.params.p_l_w!=="Close"&&_reducer.params.p_l_w!=="Open"&&_reducer.params.p_l_w!=="Half_Close"&&_reducer.params.p_l_w!=="One_Fourth_Close"&&_reducer.params.p_l_w!=="Three_Fourth_Close"){post_data['building'].left_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_wall_price_changed!=true?_reducer.const_var.UpdatedPriceData.left_wall_price:_reducer.params.p_v_w==true?data.panel[0].vertical_panel_cost*_reducer.params.p_l_w:data.panel[0].cost*_reducer.params.p_l_w;t_c=parseFloat(t_c)+parseFloat(post_data['building'].left_wall_price);}if(_reducer.params.p_r_w=="Close"){if(_reducer.params.cB_addStorage_check_right!=true){post_data['building'].right_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_wall_price_changed!=true?_reducer.const_var.UpdatedPriceData.right_wall_price:_reducer.params.p_v_w==true?data.side[0].vertical_side_cost+data.side[0].side_close_cost:data.side[0].side_close_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].right_wall_price);}else{post_data['building'].right_wall_price=0;t_c=parseFloat(t_c)+parseFloat(post_data['building'].right_wall_price);}}if(_reducer.params.p_r_w=="Half_Close"){post_data['building'].right_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_wall_price_changed!=true?_reducer.const_var.UpdatedPriceData.right_wall_price:_reducer.params.p_v_w==true?data.side[0].half_vertical_side_cost+data.side[0].half_side_close_cost:data.side[0].half_side_close_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].right_wall_price);}if(_reducer.params.p_r_w=="One_Fourth_Close"){post_data['building'].right_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_wall_price_changed!=true?_reducer.const_var.UpdatedPriceData.right_wall_price:_reducer.params.p_v_w==true?data.side[0].one_fourth_vertical_side_cost+data.side[0].one_fourth_side_close_cost:data.side[0].one_fourth_side_close_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].right_wall_price);}if(_reducer.params.p_r_w=="Three_Fourth_Close"){post_data['building'].right_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_wall_price_changed!=true?_reducer.const_var.UpdatedPriceData.right_wall_price:_reducer.params.p_v_w==true?data.side[0].three_fourth_vertical_side_cost+data.side[0].three_fourth_side_close_cost:data.side[0].three_fourth_side_close_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].right_wall_price);}if(_reducer.params.p_r_w!=="Close"&&_reducer.params.p_r_w!=="Open"&&_reducer.params.p_r_w!=="Half_Close"&&_reducer.params.p_r_w!=="One_Fourth_Close"&&_reducer.params.p_r_w!=="Three_Fourth_Close"){post_data['building'].right_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_wall_price_changed!=true?_reducer.const_var.UpdatedPriceData.right_wall_price:_reducer.params.p_v_w==true?data.panel[0].vertical_panel_cost*_reducer.params.p_r_w:data.panel[0].cost*_reducer.params.p_r_w;t_c=parseFloat(t_c)+parseFloat(post_data['building'].right_wall_price);}if(_reducer.params.p_f_w=="Close"){post_data['building'].front_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_wall_price_changed!=true?_reducer.const_var.UpdatedPriceData.front_wall_price:_reducer.params.p_v_w==true?data.end[0].vertical_ends_cost+data.end[0].end_close_cost:data.end[0].end_close_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].front_wall_price);CalCulateRoofEndClosePrice=post_data['building'].front_wall_price;}if(_reducer.params.p_f_w=="Half_Close"){post_data['building'].front_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_wall_price_changed!=true?_reducer.const_var.UpdatedPriceData.front_wall_price:_reducer.params.p_v_w==true?data.end[0].half_vertical_ends_cost+data.end[0].half_end_close_cost:data.end[0].half_end_close_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].front_wall_price);CalCulateRoofEndClosePrice=post_data['building'].front_wall_price;}if(_reducer.params.p_f_w=="One_Fourth_Close"){post_data['building'].front_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_wall_price_changed!=true?_reducer.const_var.UpdatedPriceData.front_wall_price:_reducer.params.p_v_w==true?data.end[0].one_fourth_vertical_ends_cost+data.end[0].one_fourth_end_close_cost:data.end[0].one_fourth_end_close_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].front_wall_price);CalCulateRoofEndClosePrice=post_data['building'].front_wall_price;}if(_reducer.params.p_f_w=="Three_Fourth_Close"){post_data['building'].front_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_wall_price_changed!=true?_reducer.const_var.UpdatedPriceData.front_wall_price:_reducer.params.p_v_w==true?data.end[0].three_fourth_vertical_ends_cost+data.end[0].three_fourth_end_close_cost:data.end[0].three_fourth_end_close_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].front_wall_price);CalCulateRoofEndClosePrice=post_data['building'].front_wall_price;}if(_reducer.params.p_f_w!=="Close"&&_reducer.params.p_f_w!=="Open"&&_reducer.params.p_f_w!=="Half_Close"&&_reducer.params.p_f_w!=="One_Fourth_Close"&&_reducer.params.p_f_w!=="Three_Fourth_Close"){if(_reducer.params.p_f_w=="Gable"){if(_reducer.params.p_v_w==true){if(_reducer.const_var.c_f_a_sCer[_reducer.params.p_e_i]==1){//t_c = (data.gable_end[0].certified!=0)?t_c + (data.gable_end[0].vertical_certified) + data.gable_end[0].certified :t_c + (data.gable_end[0].vertical) + data.gable_end[0].uncertified;
vertiP=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_wall_price_changed!=true?_reducer.const_var.UpdatedPriceData.front_wall_price:vertiP+data.gable_end[0].vertical_certified+data.gable_end[0].certified;}else{//t_c = t_c + (data.gable_end[0].vertical) + (data.gable_end[0].uncertified);
vertiP=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_wall_price_changed!=true?_reducer.const_var.UpdatedPriceData.front_wall_price:vertiP+data.gable_end[0].vertical+data.gable_end[0].uncertified;}}else{if(_reducer.const_var.c_f_a_sCer[_reducer.params.p_e_i]==1){//t_c = (data.gable_end[0].certified!=0)?t_c + data.gable_end[0].certified :t_c + data.gable_end[0].uncertified;
vertiP=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_wall_price_changed!=true?_reducer.const_var.UpdatedPriceData.front_wall_price:vertiP+data.gable_end[0].certified;}else{//t_c = t_c + data.gable_end[0].uncertified;
vertiP=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_wall_price_changed!=true?_reducer.const_var.UpdatedPriceData.front_wall_price:vertiP+data.gable_end[0].uncertified;}}}else{if(_reducer.params.p_v_w==true){//t_c = t_c + (data.gable_end[0].vertical_extended) + (data.gable_end[0].extended);
vertiP=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_wall_price_changed!=true?_reducer.const_var.UpdatedPriceData.front_wall_price:vertiP+data.gable_end[0].vertical_extended+data.gable_end[0].extended;}else{//t_c = t_c+ (data.gable_end[0].extended);
vertiP=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_wall_price_changed!=true?_reducer.const_var.UpdatedPriceData.front_wall_price:vertiP+data.gable_end[0].extended;}}post_data['building'].front_wall_price=vertiP;t_c=parseFloat(t_c)+parseFloat(post_data['building'].front_wall_price);//t_c = (const_var.c_f_a[params.p_e_i]==0)?t_c + 0:(data.gableCost[0].certified_cost) + t_c;
CalCulateRoofEndGablePrice=post_data['building'].front_wall_price;}if(_reducer.params.p_b_w=="Close"){if(_reducer.params.p_u_c!=true){post_data['building'].back_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_wall_price_changed!=true?_reducer.const_var.UpdatedPriceData.back_wall_price:_reducer.params.p_v_w==true?data.end[0].vertical_ends_cost+data.end[0].end_close_cost:data.end[0].end_close_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].back_wall_price);CalCulateRoofEndClosePrice=CalCulateRoofEndClosePrice+post_data['building'].back_wall_price;}else{post_data['building'].back_wall_price=0;t_c=parseFloat(t_c)+parseFloat(post_data['building'].back_wall_price);CalCulateRoofEndClosePrice=CalCulateRoofEndClosePrice+post_data['building'].back_wall_price;}}if(_reducer.params.p_b_w=="Half_Close"){post_data['building'].back_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_wall_price_changed!=true?_reducer.const_var.UpdatedPriceData.back_wall_price:_reducer.params.p_v_w==true?data.end[0].half_vertical_ends_cost+data.end[0].half_end_close_cost:data.end[0].half_end_close_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].back_wall_price);CalCulateRoofEndClosePrice=post_data['building'].back_wall_price;}if(_reducer.params.p_b_w=="One_Fourth_Close"){post_data['building'].back_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_wall_price_changed!=true?_reducer.const_var.UpdatedPriceData.back_wall_price:_reducer.params.p_v_w==true?data.end[0].one_fourth_vertical_ends_cost+data.end[0].one_fourth_end_close_cost:data.end[0].one_fourth_end_close_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].back_wall_price);CalCulateRoofEndClosePrice=post_data['building'].back_wall_price;}if(_reducer.params.p_b_w=="Three_Fourth_Close"){post_data['building'].back_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_wall_price_changed!=true?_reducer.const_var.UpdatedPriceData.back_wall_price:_reducer.params.p_v_w==true?data.end[0].three_fourth_vertical_ends_cost+data.end[0].three_fourth_end_close_cost:data.end[0].three_fourth_end_close_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].back_wall_price);CalCulateRoofEndClosePrice=post_data['building'].back_wall_price;}if(_reducer.params.p_b_w!=="Close"&&_reducer.params.p_b_w!=="Open"&&_reducer.params.p_b_w!=="Half_Close"&&_reducer.params.p_b_w!=="One_Fourth_Close"&&_reducer.params.p_b_w!=="Three_Fourth_Close"){if(_reducer.params.p_b_w=="Gable"){if(_reducer.params.p_v_w==true){if(_reducer.const_var.c_f_a_sCer[_reducer.params.p_e_i]==1){//t_c = (data.gable_end[0].certified!=0)?t_c + (data.gable_end[0].vertical_certified) + data.gable_end[0].certified :t_c + (data.gable_end[0].vertical) + data.gable_end[0].uncertified;
vertiP2=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_wall_price_changed!=true?_reducer.const_var.UpdatedPriceData.back_wall_price:vertiP2+data.gable_end[0].vertical_certified+data.gable_end[0].certified;}else{//t_c = t_c + (data.gable_end[0].vertical) + (data.gable_end[0].uncertified);
vertiP2=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_wall_price_changed!=true?_reducer.const_var.UpdatedPriceData.back_wall_price:vertiP2+data.gable_end[0].vertical+data.gable_end[0].uncertified;}}else{if(_reducer.const_var.c_f_a_sCer[_reducer.params.p_e_i]==1){//t_c = (data.gable_end[0].certified!=0)?t_c + data.gable_end[0].certified :t_c + data.gable_end[0].uncertified;
vertiP2=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_wall_price_changed!=true?_reducer.const_var.UpdatedPriceData.back_wall_price:vertiP2+data.gable_end[0].certified;}else{//t_c = t_c + data.gable_end[0].uncertified;
vertiP2=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_wall_price_changed!=true?_reducer.const_var.UpdatedPriceData.back_wall_price:vertiP2+data.gable_end[0].uncertified;}}}else{if(_reducer.params.p_v_w==true){//t_c = t_c + (data.gable_end[0].vertical_extended) + (data.gable_end[0].extended);
vertiP2=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_wall_price_changed!=true?_reducer.const_var.UpdatedPriceData.back_wall_price:vertiP2+data.gable_end[0].vertical_extended+data.gable_end[0].extended;}else{//t_c = t_c+ (data.gable_end[0].extended);
vertiP2=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_wall_price_changed!=true?_reducer.const_var.UpdatedPriceData.back_wall_price:vertiP2+data.gable_end[0].extended;}}post_data['building'].back_wall_price=vertiP2;t_c=parseFloat(t_c)+parseFloat(post_data['building'].back_wall_price);CalCulateRoofEndGablePrice=CalCulateRoofEndGablePrice+post_data['building'].back_wall_price;}if(_reducer.params.p_c_p_l==true){post_data['building'].left_wall_cut_panel_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_wall_cut_panel_price_changed!=true?_reducer.const_var.UpdatedPriceData.left_wall_cut_panel_price:data.panel[0].cut_panel_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].left_wall_cut_panel_price);post_data['building'].left_wall_cutpanel=true;// t_c = parseFloat(t_c) + parseFloat((data.panel[0].cut_panel_cost));
// post_data['building'].left_wall_price = post_data['building'].left_wall_price + (data.panel[0].cut_panel_cost);
// post_data['building'].left_wall_cutpanel = true;
}else{post_data['building'].left_wall_cut_panel_price=0;t_c=parseFloat(t_c)+parseFloat(post_data['building'].left_wall_cut_panel_price);}if(_reducer.params.p_c_p_r==true){post_data['building'].right_wall_cut_panel_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_wall_cut_panel_price_changed!=true?_reducer.const_var.UpdatedPriceData.right_wall_cut_panel_price:data.panel[0].cut_panel_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].right_wall_cut_panel_price);post_data['building'].right_wall_cutpanel=true;// t_c = parseFloat(t_c) + parseFloat((data.panel[0].cut_panel_cost));
// post_data['building'].right_wall_price = post_data['building'].right_wall_price + (data.panel[0].cut_panel_cost);
// post_data['building'].right_wall_cutpanel = true;
}else{post_data['building'].right_wall_cut_panel_price=0;t_c=parseFloat(t_c)+parseFloat(post_data['building'].right_wall_cut_panel_price);}//t_c = t_c + (data.side[0].leg_height_cost); 
// console.log(t_c,"t_ct_ct_c122555")
if(_reducer.params.p_u_c==true&&data.utility_side.length>0){post_data['building'].utility_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.utility_price_changed!=true?_reducer.const_var.UpdatedPriceData.utility_price:_reducer.params.p_v_w==true?data.utility_side[0].vertical_side_cost*2+data.end[0].vertical_ends_cost*2+data.utility_side[0].side_close_cost*2+data.end[0].end_close_cost*2:data.utility_side[0].side_close_cost*2+data.end[0].end_close_cost*2;t_c=parseFloat(t_c)+parseFloat(post_data['building'].utility_price);post_data['building'].utility_length=_reducer.params.p_u_t;post_data['building'].has_utility=true;post_data['building'].utility_name="back";post_data['building'].utility_vertical=_reducer.params.p_v_w?true:false;post_data['building'].utility_on_centers=_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s]==undefined?5:_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s];if(_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s]==5){var b_u_D_p_a=_reducer.const_var.b_u_D_p_a5;}else{var b_u_D_p_a=_reducer.const_var.b_u_D_p_a4;}post_data['building'].utility_length_list=b_u_D_p_a;CalCulateRoofUtilityEndPrice=post_data['building'].utility_price;}else if((_reducer.params.cB_addStorage_check_left==true||_reducer.params.cB_addStorage_check_right==true)&&data.side_combo_v3.length>0){// console.log( data.side_combo_v3,"data.side_combo_v3", data.end_combo_v3);
post_data['building'].utility_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.utility_price_changed!=true?_reducer.const_var.UpdatedPriceData.utility_price:_reducer.params.p_v_w==true?data.side_combo_v3[0].vertical_side_cost+data.side[0].vertical_side_cost+data.end_combo_v3[0].vertical_ends_cost*2+data.side_combo_v3[0].side_close_cost+data.side[0].side_close_cost+data.end_combo_v3[0].end_close_cost*2:data.side_combo_v3[0].side_close_cost+data.side[0].side_close_cost+data.end_combo_v3[0].end_close_cost*2;t_c=parseFloat(t_c)+parseFloat(post_data['building'].utility_price);post_data['building'].utility_length=_reducer.params.cB_addStorage_check_left==true?_reducer.params.cB_addStorage_left:_reducer.params.cB_addStorage_right;post_data['building'].has_utility=true;post_data['building'].utility_name=_reducer.params.cB_addStorage_check_left==true?"left":"right";post_data['building'].utility_vertical=_reducer.params.p_v_w?true:false;post_data['building'].utility_on_centers=_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s]==undefined?5:_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s];if(_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s]==5){var b_u_D_p_a=_reducer.const_var.b_u_D_p_a5;}else{var b_u_D_p_a=_reducer.const_var.b_u_D_p_a4;}post_data['building'].utility_length_list=b_u_D_p_a;CalCulateRoofUtilityEndPrice=post_data['building'].utility_price;}else{post_data['building'].has_utility=false;post_data['building'].utility_price=0;}// console.log(t_c,"t_ct_ct_c122333",const_var.b_r_p_a,params.b_r_p)
if(_reducer.params.b_r_p!="Select"){if(_reducer.const_var.b_r_p_a.length>0){if(_reducer.const_var.b_r_p_a[_reducer.params.b_r_p].cost_type=="%"){var splitVal=_reducer.const_var.b_r_p_a[_reducer.params.b_r_p].percentage_of!=undefined&&_reducer.const_var.b_r_p_a[_reducer.params.b_r_p].percentage_of!=0?_reducer.const_var.b_r_p_a[_reducer.params.b_r_p].percentage_of.split(","):0;var splval=0;if(splitVal!=0){if(splitVal.includes("1")!=false){splval=splval+CalCulateRoofBasePrice;}if(splitVal.includes("2")!=false){splval=splval+CalCulateRoofEndClosePrice;}if(splitVal.includes("3")!=false){splval=splval+CalCulateRoofEndGablePrice;}if(CalCulateRoofUtilityEndPrice!=0){splval=splval+CalCulateRoofUtilityEndPrice;}}else{splval=splval+CalCulateRoofBasePrice;}if(_reducer.const_var.b_r_p_a[_reducer.params.b_r_p].cost==0){var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.roof_pitch_price_changed!=true?_reducer.const_var.UpdatedPriceData.roof_pitch_price:0;}else{var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.roof_pitch_price_changed!=true?_reducer.const_var.UpdatedPriceData.roof_pitch_price:(splval*_reducer.const_var.b_r_p_a[_reducer.params.b_r_p].cost/100).toFixed(2);}if(finalCertPrice==undefined){finalCertPrice=0;}// console.log(const_var.b_r_p_a[params.b_r_p],splval,const_var.b_r_p_a[params.b_r_p].cost,(splval * const_var.b_r_p_a[params.b_r_p].cost / 100),"(splval * const_var.b_r_p_a[params.b_r_p].cost / 100)")
t_c=parseFloat(t_c)+parseFloat(finalCertPrice);post_data['building'].roof_pitch=_reducer.const_var.b_r_p_a[_reducer.params.b_r_p].roof_pitch;post_data['building'].roof_pitch_name=_reducer.const_var.b_r_p_a[_reducer.params.b_r_p].roof_pitch;post_data['building'].roof_pitch_price=finalCertPrice;}else{// console.log(const_var.b_r_p_a[params.b_r_p],post_data['building'].roof_pitch_price,"const_var.b_r_p_a[params.b_r_p]")
post_data['building'].roof_pitch_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.roof_pitch_price_changed!=true?_reducer.const_var.UpdatedPriceData.roof_pitch_price:_reducer.const_var.b_r_p_a[_reducer.params.b_r_p].cost;if(post_data['building'].roof_pitch_price==undefined){post_data['building'].roof_pitch_price=0;}t_c=parseFloat(t_c)+parseFloat(post_data['building'].roof_pitch_price);post_data['building'].roof_pitch=_reducer.const_var.b_r_p_a[_reducer.params.b_r_p].roof_pitch;post_data['building'].roof_pitch_name=_reducer.const_var.b_r_p_a[_reducer.params.b_r_p].roof_pitch;}}}else{post_data['building'].roof_pitch="312";post_data['building'].roof_pitch_name="312";post_data['building'].roof_pitch_price=0;}post_data['building'].has_double_leg=_reducer.params.p_e_l;post_data['building'].legstype=_reducer.const_var.legstype;post_data['building'].distance_on_center=_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s]==undefined?5:_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s];//t_c = (const_var.g_v=="12")?(data.gaugeHeight.length>0)?t_c +data.gaugeHeight[0].cost:t_c + 0 :t_c + 0 ;
// console.log(t_c,"t_ct_ct_c12211")
if(_reducer.const_var.g_v==14){if(heightFullData[0].double_leg_baserail_cost!=0&&_reducer.params.p_e_l==true){post_data['building'].height_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.height_price_changed!=true?_reducer.const_var.UpdatedPriceData.height_price:heightFullData[0].double_leg_baserail_cost!=0?heightFullData[0].double_leg_baserail_cost:heightFullData[0].leg_height_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].height_price);post_data['building'].has_double_leg_price=post_data['building'].height_price;}else{post_data['building'].height_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.height_price_changed!=true?_reducer.const_var.UpdatedPriceData.height_price:heightFullData[0].leg_height_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].height_price);//post_data['building'].height_price = data.side[0].leg_height_cost;
post_data['building'].has_double_leg_price=post_data['building'].height_price;}}if(_reducer.const_var.g_v==12){if(_reducer.params.p_e_l==true){post_data['building'].height_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.height_price_changed!=true?_reducer.const_var.UpdatedPriceData.height_price:heightFullData[0].double_leg_baserail_cost_12!=0?heightFullData[0].double_leg_baserail_cost_12:heightFullData[0].double_leg_baserail_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].height_price);//post_data['building'].height_price =  (data.side[0].double_leg_baserail_cost_12!=0)?(data.side[0].double_leg_baserail_cost_12):(data.side[0].double_leg_baserail_cost);;
post_data['building'].has_double_leg_price=post_data['building'].height_price;}else{post_data['building'].height_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.height_price_changed!=true?_reducer.const_var.UpdatedPriceData.height_price:heightFullData[0].leg_height_cost_12!=0?heightFullData[0].leg_height_cost_12:heightFullData[0].leg_height_cost;t_c=parseFloat(t_c)+parseFloat(post_data['building'].height_price);//post_data['building'].height_price = (data.side[0].leg_height_cost_12!=0)?(data.side[0].leg_height_cost_12):(data.side[0].leg_height_cost);
post_data['building'].has_double_leg_price=post_data['building'].height_price;}}// console.log(t_c,"t_ct_ct_c122")
t_c=parseFloat(t_c_b)+parseFloat(t_c);// console.log(t_c,"t_ct_ct_c")
if(_reducer.params.p_i_o!=0){if(_reducer.params.p_f_i==true){var finalprice=0;var finalprice1=0;//t_c = t_c + parseInt(const_var.insulationPriceJson[params.p_i_o].full_building_insulation_cost); 
finalprice=parseInt(_reducer.const_var.insulationPriceJson[_reducer.params.p_i_o].full_building_insulation_cost);if(_reducer.params.add_right_lean==true&&_reducer.const_var.leanGetDataRight!=""){// if(params.add_storage_check_right==true || (params.p_b_c_b_r_f=="Close" &&params.p_b_c_b_r_b=="Close" && params.p_b_c_b_r=="Close"))
// {
//t_c = t_c + parseInt(const_var.insulationArrayForLeantoRight[params.p_i_o].full_building_insulation_cost); 
finalprice=finalprice+parseInt(_reducer.const_var.insulationArrayForLeantoRight[_reducer.params.p_i_o].full_building_insulation_cost);finalprice1=finalprice1+finalprice;//}
}if(_reducer.params.add_left_lean==true&&_reducer.const_var.leanGetDataLeft!=""){// if(params.add_storage_check==true || (params.p_b_c_b_l_f=="Close" &&params.p_b_c_b_l_b=="Close" && params.p_b_c_b_l=="Close"))
// {
//t_c = t_c + parseInt(const_var.insulationArrayForLeantoLeft[params.p_i_o].full_building_insulation_cost); 
finalprice=finalprice+parseInt(_reducer.const_var.insulationArrayForLeantoLeft[_reducer.params.p_i_o].full_building_insulation_cost);finalprice1=finalprice1+finalprice;//}
}if(_reducer.params.add_front_lean==true&&_reducer.const_var.leanGetDataFront!=""){// if(params.add_storage_check==true || (params.p_b_c_b_l_f=="Close" &&params.p_b_c_b_l_b=="Close" && params.p_b_c_b_l=="Close"))
// {
//t_c = t_c + parseInt(const_var.insulationArrayForLeantoLeft[params.p_i_o].full_building_insulation_cost); 
finalprice=finalprice+parseInt(_reducer.const_var.insulationArrayForLeantoFront[_reducer.params.p_i_o].full_building_insulation_cost);finalprice1=finalprice1+finalprice;//}
}if(_reducer.params.add_back_lean==true&&_reducer.const_var.leanGetDataBack!=""){// if(params.add_storage_check==true || (params.p_b_c_b_l_f=="Close" &&params.p_b_c_b_l_b=="Close" && params.p_b_c_b_l=="Close"))
// {
//t_c = t_c + parseInt(const_var.insulationArrayForLeantoLeft[params.p_i_o].full_building_insulation_cost); 
finalprice=finalprice+parseInt(_reducer.const_var.insulationArrayForLeantoBack[_reducer.params.p_i_o].full_building_insulation_cost);finalprice1=finalprice1+finalprice;//}
}post_data['building'].insulation="full";//post_data['building'].insulation_price = finalprice;
post_data['building'].insulation_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.insulation_price!=undefined&&(_reducer.const_var.UpdatedPriceData.height_price_changed!=true||_reducer.const_var.UpdatedPriceData.roof_style_price_changed!=true||_reducer.const_var.UpdatedPriceData.bothLeanto!=true)?_reducer.const_var.UpdatedPriceData.insulation_price:finalprice;t_c=parseFloat(t_c)+parseFloat(post_data['building'].insulation_price);post_data['building'].insulation_type=_reducer.const_var.insulationPriceJson[_reducer.params.p_i_o];//console.log(post_data['building'].insulation_price,finalprice1,"Roof Full",VUEData.insulation_price,finalprice);
}if(_reducer.params.p_r_o==true){var finalprice=0;//t_c = t_c + parseInt(const_var.insulationPriceJson[params.p_i_o].roof_insulation_cost); 
finalprice=parseInt(_reducer.const_var.insulationPriceJson[_reducer.params.p_i_o].roof_insulation_cost);finalprice1=parseInt(_reducer.const_var.insulationPriceJson[_reducer.params.p_i_o].roof_insulation_cost);var finalprice1=0;if(_reducer.params.add_right_lean==true&&_reducer.const_var.leanGetDataRight!=""){// if(params.add_storage_check_right==true || (params.p_b_c_b_r_f=="Close" &&params.p_b_c_b_r_b=="Close" && params.p_b_c_b_r=="Close"))
// {
//t_c = t_c + parseInt(const_var.insulationArrayForLeantoRight[params.p_i_o].roof_insulation_cost); 
finalprice=finalprice+parseInt(_reducer.const_var.insulationArrayForLeantoRight[_reducer.params.p_i_o].roof_insulation_cost);finalprice1=finalprice1+finalprice;//}
}if(_reducer.params.add_left_lean==true&&_reducer.const_var.leanGetDataLeft!=""){// if(params.add_storage_check==true || (params.p_b_c_b_l_f=="Close" &&params.p_b_c_b_l_b=="Close" && params.p_b_c_b_l=="Close"))
// {
//t_c = t_c + parseInt(const_var.insulationArrayForLeantoLeft[params.p_i_o].roof_insulation_cost); 
finalprice=finalprice+parseInt(_reducer.const_var.insulationArrayForLeantoLeft[_reducer.params.p_i_o].roof_insulation_cost);finalprice1=finalprice1+parseInt(_reducer.const_var.insulationArrayForLeantoLeft[_reducer.params.p_i_o].roof_insulation_cost);//}
}if(_reducer.params.add_front_lean==true&&_reducer.const_var.leanGetDataFront!=""){// if(params.add_storage_check==true || (params.p_b_c_b_l_f=="Close" &&params.p_b_c_b_l_b=="Close" && params.p_b_c_b_l=="Close"))
// {
//t_c = t_c + parseInt(const_var.insulationArrayForLeantoLeft[params.p_i_o].roof_insulation_cost); 
finalprice=finalprice+parseInt(_reducer.const_var.insulationArrayForLeantoFront[_reducer.params.p_i_o].roof_insulation_cost);finalprice1=finalprice1+parseInt(_reducer.const_var.insulationArrayForLeantoFront[_reducer.params.p_i_o].roof_insulation_cost);//}
}if(_reducer.params.add_back_lean==true&&_reducer.const_var.leanGetDataBack!=""){// if(params.add_storage_check==true || (params.p_b_c_b_l_f=="Close" &&params.p_b_c_b_l_b=="Close" && params.p_b_c_b_l=="Close"))
// {
//t_c = t_c + parseInt(const_var.insulationArrayForLeantoLeft[params.p_i_o].roof_insulation_cost); 
finalprice=finalprice+parseInt(_reducer.const_var.insulationArrayForLeantoBack[_reducer.params.p_i_o].roof_insulation_cost);finalprice1=finalprice1+parseInt(_reducer.const_var.insulationArrayForLeantoBack[_reducer.params.p_i_o].roof_insulation_cost);//}
}post_data['building'].insulation="roof_only";//post_data['building'].insulation_price = finalprice;
post_data['building'].insulation_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.insulation_price!=undefined&&(_reducer.const_var.UpdatedPriceData.height_price_changed!=true||_reducer.const_var.UpdatedPriceData.roof_style_price_changed!=true||_reducer.const_var.UpdatedPriceData.bothLeanto!=true)?_reducer.const_var.UpdatedPriceData.insulation_price:finalprice;t_c=parseFloat(t_c)+parseFloat(post_data['building'].insulation_price);post_data['building'].insulation_type=_reducer.const_var.insulationPriceJson[_reducer.params.p_i_o];//console.log(post_data['building'].insulation_price,finalprice1,"Roof only",VUEData.insulation_price,finalprice);
}}else{post_data['building'].insulation_price=0;}//    console.log(t_c,"t_ct_ct_c")
if(_reducer.const_var.inputs!=undefined&&_reducer.const_var.inputs.length>0){_reducer.const_var.inputs.map(function(val,index){if(val!=null){if(val.additional_quantity!=0&&val.additional_quantity!=null){if(val.additional_name!=null&&val.additional_quantity!=null){extra_items.push({'item_name':val.additional_name,'item_quantity':parseInt(val.additional_quantity),'item_price':UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData['elements']!=undefined&&_reducer.const_var.UpdatedPriceData['elements'][val.additional_name.toString()]!=undefined?_reducer.const_var.UpdatedPriceData['elements'][val.additional_name.toString()].item_price:0});t_c=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData['elements']!=undefined&&_reducer.const_var.UpdatedPriceData['elements'][val.additional_name.toString()]!=undefined?parseFloat(t_c)+parseFloat(_reducer.const_var.UpdatedPriceData['elements'][val.additional_name.toString()].item_price):parseFloat(t_c)+0;}}}});post_data['building'].inputs=_reducer.const_var.inputs;}if(_reducer.const_var.Componentinputs!=undefined&&_reducer.const_var.Componentinputs.length>0){_reducer.const_var.Componentinputs.map(function(val,index){if(val!=null){if(val.additional_name!=null&&val.additional_quantity!=null){if(val.additional_quantity!=0){extra_items.push({'item_name':val.additional_name,'item_quantity':parseInt(val.additional_quantity),'item_price':UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData['elements']!=undefined&&_reducer.const_var.UpdatedPriceData['elements'][val.additional_name.toString()]!=undefined?_reducer.const_var.UpdatedPriceData['elements'][val.additional_name.toString()].item_price:0});t_c=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData['elements']!=undefined&&_reducer.const_var.UpdatedPriceData['elements'][val.additional_name.toString()]!=undefined?parseFloat(t_c)+parseFloat(_reducer.const_var.UpdatedPriceData['elements'][val.additional_name.toString()].item_price):parseFloat(t_c)+0;}}}});post_data['building'].Componentinputs=_reducer.const_var.Componentinputs;}// console.log(t_c,"t_ct_ct_c")
if(_reducer.const_var.ExtraItemsFeaturesArray!=undefined&&_reducer.const_var.ExtraItemsFeaturesArray.length>0){_reducer.const_var.ExtraItemsFeaturesArray.map(function(val,index){if(val!=null&&val.is_checked==true){var leantoExtraItemCheckBoxCost=0;if(_reducer.params.add_left_lean&&_reducer.const_var.leanGetDataLeft){_reducer.const_var.leanGetDataLeft.extra_items[0].checkbox.map(function(item){if(item.name==val.name){leantoExtraItemCheckBoxCost=leantoExtraItemCheckBoxCost+item.cost;}});}if(_reducer.params.add_front_lean&&_reducer.const_var.leanGetDataFront){_reducer.const_var.leanGetDataFront.extra_items[0].checkbox.map(function(item){if(item.name==val.name){leantoExtraItemCheckBoxCost=leantoExtraItemCheckBoxCost+item.cost;}});}if(_reducer.params.add_back_lean&&_reducer.const_var.leanGetDataBack){_reducer.const_var.leanGetDataBack.extra_items[0].checkbox.map(function(item){if(item.name==val.name){leantoExtraItemCheckBoxCost=leantoExtraItemCheckBoxCost+item.cost;}});}if(_reducer.params.add_right_lean&&_reducer.const_var.leanGetDataRight){_reducer.const_var.leanGetDataRight.extra_items[0].checkbox.map(function(item){if(item.name==val.name){leantoExtraItemCheckBoxCost=leantoExtraItemCheckBoxCost+item.cost;}});}t_c=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData['elements']!=undefined&&_reducer.const_var.UpdatedPriceData['elements'][val.label.toString()]!=undefined&&_reducer.const_var.UpdatedPriceData['elements'][val.label.toString()].is_edit==true?parseFloat(t_c)+parseFloat(_reducer.const_var.UpdatedPriceData['elements'][val.label.toString()].item_price):parseFloat(t_c)+parseFloat(val.cost)+parseFloat(leantoExtraItemCheckBoxCost);extra_items.push({'is_edit':UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData['elements']!=undefined&&_reducer.const_var.UpdatedPriceData['elements'][val.label.toString()]!=undefined&&_reducer.const_var.UpdatedPriceData['elements'][val.label.toString()].is_edit!=undefined?_reducer.const_var.UpdatedPriceData['elements'][val.label.toString()].is_edit:false,'item_name':val.label,'other_item_name':val.name,'item_quantity':parseInt(val.quantity),'item_price':UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData['elements']!=undefined&&_reducer.const_var.UpdatedPriceData['elements'][val.label.toString()]!=undefined&&_reducer.const_var.UpdatedPriceData['elements'][val.label.toString()].is_edit==true?_reducer.const_var.UpdatedPriceData['elements'][val.label.toString()].item_price:parseFloat(val.cost)+parseFloat(leantoExtraItemCheckBoxCost)});}});post_data['building'].ExtraItemsFeaturesArray=_reducer.const_var.ExtraItemsFeaturesArray;}// console.log(t_c,"t_ct_ct_c")
if(_reducer.const_var.ExtraItemsFeaturesQuantityArray!=undefined&&_reducer.const_var.ExtraItemsFeaturesQuantityArray.length>0){_reducer.const_var.ExtraItemsFeaturesQuantityArray.map(function(val,index){if(val!=null&&val.is_checked==true){var leantoExtraItemCheckBoxQuantityCost=0;if(_reducer.params.add_left_lean&&_reducer.const_var.leanGetDataLeft){_reducer.const_var.leanGetDataLeft.extra_items[0].checkbox_quantity.map(function(item){if(item.name==val.name){leantoExtraItemCheckBoxQuantityCost=leantoExtraItemCheckBoxQuantityCost+item.cost;}});}if(_reducer.params.add_front_lean&&_reducer.const_var.leanGetDataFront){_reducer.const_var.leanGetDataFront.extra_items[0].checkbox_quantity.map(function(item){if(item.name==val.name){leantoExtraItemCheckBoxQuantityCost=leantoExtraItemCheckBoxQuantityCost+item.cost;}});}if(_reducer.params.add_back_lean&&_reducer.const_var.leanGetDataBack){_reducer.const_var.leanGetDataBack.extra_items[0].checkbox_quantity.map(function(item){if(item.name==val.name){leantoExtraItemCheckBoxQuantityCost=leantoExtraItemCheckBoxQuantityCost+item.cost;}});}if(_reducer.params.add_right_lean&&_reducer.const_var.leanGetDataRight){_reducer.const_var.leanGetDataRight.extra_items[0].checkbox_quantity.map(function(item){if(item.name==val.name){leantoExtraItemCheckBoxQuantityCost=leantoExtraItemCheckBoxQuantityCost+item.cost;}});}t_c=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData['elements']!=undefined&&_reducer.const_var.UpdatedPriceData['elements'][val.label.toString()]!=undefined&&_reducer.const_var.UpdatedPriceData['elements'][val.label.toString()].is_edit==true?parseFloat(t_c)+parseFloat(_reducer.const_var.UpdatedPriceData['elements'][val.label.toString()].item_price):parseFloat(t_c)+parseFloat(val.quantity*val.cost)+parseFloat(val.quantity*leantoExtraItemCheckBoxQuantityCost);extra_items.push({'is_edit':UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData['elements']!=undefined&&_reducer.const_var.UpdatedPriceData['elements'][val.label.toString()]!=undefined&&_reducer.const_var.UpdatedPriceData['elements'][val.label.toString()].is_edit!=undefined?_reducer.const_var.UpdatedPriceData['elements'][val.label.toString()].is_edit:false,'item_name':val.label,'other_item_name':val.name,'item_quantity':parseInt(val.quantity),'item_price':UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData['elements']!=undefined&&_reducer.const_var.UpdatedPriceData['elements'][val.label.toString()]!=undefined&&_reducer.const_var.UpdatedPriceData['elements'][val.label.toString()].is_edit==true?_reducer.const_var.UpdatedPriceData['elements'][val.label.toString()].item_price:parseInt(val.quantity*val.cost)+parseInt(val.quantity*leantoExtraItemCheckBoxQuantityCost)});}});post_data['building'].ExtraItemsFeaturesQuantityArray=_reducer.const_var.ExtraItemsFeaturesQuantityArray;}//    console.log(t_c,"t_ct_ct_c")
if(_reducer.params.p_j_t_end==true&&data.jtrim.length>0){var isJtrimEnd=false;var isJtrimEndPriceCenter=false;var isJtrimEndPriceLeftLean=false;var isJtrimEndPriceRightLean=false;var isJtrimEndPriceFrontLean=false;var isJtrimEndPriceBackLean=false;var centerBuildingNumber=1;var leftBuildingNumber=1;var rightBuildingNumber=1;var frontBuildingNumber=1;var backBuildingNumber=1;if(_reducer.params.p_f_w!=="Close"&&_reducer.params.p_f_w!=="Open"&&_reducer.params.p_f_w!=="Half_Close"&&_reducer.params.p_f_w!=="One_Fourth_Close"&&_reducer.params.p_f_w!=="Three_Fourth_Close"){isJtrimEnd=true;isJtrimEndPriceCenter=true;centerBuildingNumber=_reducer.params.p_b_w!=="Close"&&_reducer.params.p_b_w!=="Open"&&_reducer.params.p_b_w!=="Half_Close"&&_reducer.params.p_b_w!=="One_Fourth_Close"&&_reducer.params.p_b_w!=="Three_Fourth_Close"?2:1;}else{centerBuildingNumber=1;}if(_reducer.params.p_b_w!=="Close"&&_reducer.params.p_b_w!=="Open"&&_reducer.params.p_b_w!=="Half_Close"&&_reducer.params.p_b_w!=="One_Fourth_Close"&&_reducer.params.p_b_w!=="Three_Fourth_Close"){isJtrimEnd=true;isJtrimEndPriceCenter=true;centerBuildingNumber=_reducer.params.p_f_w!=="Close"&&_reducer.params.p_f_w!=="Open"&&_reducer.params.p_f_w!=="Half_Close"&&_reducer.params.p_f_w!=="One_Fourth_Close"&&_reducer.params.p_f_w!=="Three_Fourth_Close"?2:1;}else{centerBuildingNumber=1;}if(_reducer.params.p_b_c_b_l_f=="Gable"){isJtrimEnd=true;isJtrimEndPriceLeftLean=true;leftBuildingNumber=_reducer.params.p_b_c_b_l_b=="Gable"?2:1;}else{leftBuildingNumber=1;}if(_reducer.params.p_b_c_b_l_b=="Gable"){isJtrimEnd=true;isJtrimEndPriceLeftLean=true;leftBuildingNumber=_reducer.params.p_b_c_b_l_f=="Gable"?2:1;}else{leftBuildingNumber=1;}if(_reducer.params.p_b_c_b_f_f=="Gable"){isJtrimEnd=true;isJtrimEndPriceFrontLean=true;frontBuildingNumber=_reducer.params.p_b_c_b_f_f=="Gable"?2:1;}else{frontBuildingNumber=1;}if(_reducer.params.p_b_c_b_f_b=="Gable"){isJtrimEnd=true;isJtrimEndPriceFrontLean=true;frontBuildingNumber=_reducer.params.p_b_c_b_f_b=="Gable"?2:1;}else{frontBuildingNumber=1;}if(_reducer.params.p_b_c_b_b_f=="Gable"){isJtrimEnd=true;isJtrimEndPriceBackLean=true;backBuildingNumber=_reducer.params.p_b_c_b_b_f=="Gable"?2:1;}else{backBuildingNumber=1;}if(_reducer.params.p_b_c_b_b_b=="Gable"){isJtrimEnd=true;isJtrimEndPriceBackLean=true;backBuildingNumber=_reducer.params.p_b_c_b_b_b=="Gable"?2:1;}else{backBuildingNumber=1;}if(_reducer.params.p_b_c_b_r_f=="Gable"){isJtrimEnd=true;isJtrimEndPriceRightLean=true;rightBuildingNumber=_reducer.params.p_b_c_b_r_b=="Gable"?2:1;}else{rightBuildingNumber=1;}if(_reducer.params.p_b_c_b_r_b=="Gable"){isJtrimEnd=true;isJtrimEndPriceRightLean=true;rightBuildingNumber=_reducer.params.p_b_c_b_r_f=="Gable"?2:1;}else{rightBuildingNumber=1;}var jtrimPrice=0;//let centerJtrim = data.jtrim.filter(data=>data.type=="end");
var centerJtrim=data.jtrim.find(function(data){return data.type=="end";});if(_reducer.params.p_j_t_end==true){var rightJtrim=_reducer.const_var.leanGetDataRight!=""&&_reducer.const_var.leanGetDataRight.jtrim.length>0?_reducer.const_var.leanGetDataRight.jtrim.find(function(data){return data.type=="end";}):undefined;var frontJtrim=_reducer.const_var.leanGetDataFront!=""&&_reducer.const_var.leanGetDataFront.jtrim.length>0?_reducer.const_var.leanGetDataFront.jtrim.find(function(data){return data.type=="end";}):undefined;var backJtrim=_reducer.const_var.leanGetDataBack!=""&&_reducer.const_var.leanGetDataBack.jtrim.length>0?_reducer.const_var.leanGetDataBack.jtrim.find(function(data){return data.type=="end";}):undefined;var leftJtrim=_reducer.const_var.leanGetDataLeft!=""&&_reducer.const_var.leanGetDataLeft.jtrim.length>0?_reducer.const_var.leanGetDataLeft.jtrim.find(function(data){return data.type=="end";}):undefined;if(rightJtrim!=undefined&&_reducer.params.add_right_lean==true&&_reducer.const_var.leanGetDataRight!=""&&_reducer.const_var.leanGetDataRight.jtrim.length>0&&isJtrimEndPriceRightLean==true&&leftJtrim!=undefined&&_reducer.params.add_left_lean==true&&_reducer.const_var.leanGetDataLeft!=""&&_reducer.const_var.leanGetDataLeft.jtrim.length>0&&isJtrimEndPriceLeftLean==true&&frontJtrim!=undefined&&_reducer.params.add_front_lean==true&&_reducer.const_var.leanGetDataFront!=""&&_reducer.const_var.leanGetDataFront.jtrim.length>0&&isJtrimEndPriceFrontLean==true&&backJtrim!=undefined&&_reducer.params.add_back_lean==true&&_reducer.const_var.leanGetDataBack!=""&&_reducer.const_var.leanGetDataBack.jtrim.length>0&&isJtrimEndPriceBackLean==true){if(isJtrimEndPriceCenter==true){jtrimPrice=parseFloat(jtrimPrice)+parseFloat(centerJtrim.cost)*parseFloat(centerBuildingNumber)+parseFloat(leftJtrim.cost)*parseFloat(leftBuildingNumber)+parseFloat(rightJtrim.cost)*parseFloat(rightBuildingNumber)+parseFloat(frontJtrim.cost)*parseFloat(frontBuildingNumber)+parseFloat(backJtrim.cost)*parseFloat(backBuildingNumber);}else{jtrimPrice=parseFloat(jtrimPrice)+parseFloat(leftJtrim.cost)*parseFloat(leftBuildingNumber)+parseFloat(rightJtrim.cost)*parseFloat(rightBuildingNumber)+parseFloat(frontJtrim.cost)*parseFloat(frontBuildingNumber)+parseFloat(backJtrim.cost)*parseFloat(backBuildingNumber);}//extra_items.push({'item_name':'Jtrim','item_quantity':(params.p_j_t==true)?1:0,'item_price':jtrimPrice});
}else if(rightJtrim!=undefined&&_reducer.params.add_right_lean==true&&_reducer.const_var.leanGetDataRight!=""&&_reducer.const_var.leanGetDataRight.jtrim.length>0&&isJtrimEndPriceRightLean==true){if(isJtrimEndPriceCenter==true){jtrimPrice=parseFloat(jtrimPrice)+parseFloat(centerJtrim.cost)*parseFloat(centerBuildingNumber)+parseFloat(rightJtrim.cost)*parseFloat(rightBuildingNumber);}else{jtrimPrice=parseFloat(jtrimPrice)+parseFloat(rightJtrim.cost)*parseFloat(rightBuildingNumber);}//extra_items.push({'item_name':'Jtrim','item_quantity':(params.p_j_t==true)?1:0,'item_price':jtrimPrice});
}else if(frontJtrim!=undefined&&_reducer.params.add_front_lean==true&&_reducer.const_var.leanGetDataFront!=""&&_reducer.const_var.leanGetDataFront.jtrim.length>0&&isJtrimEndPriceFrontLean==true){if(isJtrimEndPriceCenter==true){jtrimPrice=parseFloat(jtrimPrice)+parseFloat(centerJtrim.cost)*parseFloat(centerBuildingNumber)+parseFloat(frontJtrim.cost)*parseFloat(frontBuildingNumber);}else{jtrimPrice=parseFloat(jtrimPrice)+parseFloat(frontJtrim.cost)*parseFloat(frontBuildingNumber);}//extra_items.push({'item_name':'Jtrim','item_quantity':(params.p_j_t==true)?1:0,'item_price':jtrimPrice});
}else if(backJtrim!=undefined&&_reducer.params.add_back_lean==true&&_reducer.const_var.leanGetDataBack!=""&&_reducer.const_var.leanGetDataBack.jtrim.length>0&&isJtrimEndPriceBackLean==true){if(isJtrimEndPriceCenter==true){jtrimPrice=parseFloat(jtrimPrice)+parseFloat(centerJtrim.cost)*parseFloat(centerBuildingNumber)+parseFloat(backJtrim.cost)*parseFloat(backBuildingNumber);}else{jtrimPrice=parseFloat(jtrimPrice)+parseFloat(backJtrim.cost)*parseFloat(backBuildingNumber);}//extra_items.push({'item_name':'Jtrim','item_quantity':(params.p_j_t==true)?1:0,'item_price':jtrimPrice});
}else if(leftJtrim!=undefined&&_reducer.params.add_left_lean==true&&_reducer.const_var.leanGetDataLeft!=""&&_reducer.const_var.leanGetDataLeft.jtrim.length>0&&isJtrimEndPriceLeftLean==true){if(isJtrimEndPriceCenter==true){jtrimPrice=parseFloat(jtrimPrice)+parseFloat(centerJtrim.cost)*parseFloat(centerBuildingNumber)+parseFloat(leftJtrim.cost)*parseFloat(leftBuildingNumber);}else{jtrimPrice=parseFloat(jtrimPrice)+parseFloat(leftJtrim.cost)*parseFloat(leftBuildingNumber);}//extra_items.push({'item_name':'Jtrim','item_quantity':(params.p_j_t==true)?1:0,'item_price':jtrimPrice});
}else{if(isJtrimEndPriceCenter==true){jtrimPrice=parseFloat(jtrimPrice)+parseFloat(centerJtrim.cost)*parseFloat(centerBuildingNumber);}else{jtrimPrice=parseFloat(jtrimPrice)+0;}//extra_items.push({'item_name':'Jtrim','item_quantity':(params.p_j_t==true)?1:0,'item_price':jtrimPrice});
}extra_items.push({'item_name':'End Jtrim','item_quantity':_reducer.params.p_j_t_end==true?1:0,'item_price':jtrimPrice});t_c=parseFloat(t_c)+parseFloat(jtrimPrice);}}if(_reducer.params.p_j_t==true&&data.jtrim.length>0){var isJtrim=false;var isJtrimPriceCenter=false;var isJtrimPriceLeftLean=false;var isJtrimPriceFrontLean=false;var isJtrimPriceBackLean=false;var isJtrimPriceRightLean=false;var _centerBuildingNumber2=1;var checkWallPanelActiveLeft=1;var checkWallPanelActiveRight=1;if(_reducer.params.p_l_w!=="Close"&&_reducer.params.p_l_w!=="Open"&&_reducer.params.p_l_w!=="Half_Close"&&_reducer.params.p_l_w!=="One_Fourth_Close"&&_reducer.params.p_l_w!=="Three_Fourth_Close"){isJtrim=true;isJtrimPriceCenter=true;_centerBuildingNumber2=_reducer.params.p_r_w!=="Close"&&_reducer.params.p_r_w!=="Open"&&_reducer.params.p_r_w!=="Half_Close"&&_reducer.params.p_r_w!=="One_Fourth_Close"&&_reducer.params.p_r_w!=="Three_Fourth_Close"?2:1;checkWallPanelActiveLeft=_centerBuildingNumber2;}else{_centerBuildingNumber2=1;checkWallPanelActiveLeft=1;}if(_reducer.params.p_r_w!=="Close"&&_reducer.params.p_r_w!=="Open"&&_reducer.params.p_r_w!=="Half_Close"&&_reducer.params.p_r_w!=="One_Fourth_Close"&&_reducer.params.p_r_w!=="Three_Fourth_Close"){isJtrim=true;isJtrimPriceCenter=true;_centerBuildingNumber2=_reducer.params.p_l_w!=="Close"&&_reducer.params.p_l_w!=="Open"&&_reducer.params.p_l_w!=="Half_Close"&&_reducer.params.p_l_w!=="One_Fourth_Close"&&_reducer.params.p_l_w!=="Three_Fourth_Close"?2:1;checkWallPanelActiveRight=_centerBuildingNumber2;}else{_centerBuildingNumber2=1;checkWallPanelActiveRight=1;}if(_reducer.params.p_c_p_l==true&&_reducer.params.p_l_w=="Open"){isJtrim=true;isJtrimPriceCenter=true;_centerBuildingNumber2=_reducer.params.p_c_p_r==true||_reducer.params.p_r_w!=="Close"&&_reducer.params.p_r_w!=="Open"&&_reducer.params.p_r_w!=="Half_Close"&&_reducer.params.p_r_w!=="One_Fourth_Close"&&_reducer.params.p_r_w!=="Three_Fourth_Close"?2:_centerBuildingNumber2;}if(_reducer.params.p_c_p_r==true&&_reducer.params.p_r_w=="Open"){isJtrim=true;isJtrimPriceCenter=true;_centerBuildingNumber2=_reducer.params.p_c_p_l==true||_reducer.params.p_l_w!=="Close"&&_reducer.params.p_l_w!=="Open"&&_reducer.params.p_l_w!=="Half_Close"&&_reducer.params.p_l_w!=="One_Fourth_Close"&&_reducer.params.p_l_w!=="Three_Fourth_Close"?2:_centerBuildingNumber2;}//   console.log(centerBuildingNumber,"centerBuildingNumber",params.p_c_p_r,params.p_c_p_l)
if(_reducer.params.p_b_c_b_l!=="Close"&&_reducer.params.p_b_c_b_l!=="Open"&&_reducer.params.p_b_c_b_l!="Half_Close"&&_reducer.params.p_b_c_b_l!="One_Fourth_Close"&&_reducer.params.p_b_c_b_l!="Three_Fourth_Close"){isJtrim=true;isJtrimPriceLeftLean=true;}if(_reducer.params.p_b_c_b_f_l!=="Close"&&_reducer.params.p_b_c_b_f_l!=="Open"&&_reducer.params.p_b_c_b_f_l!="Half_Close"&&_reducer.params.p_b_c_b_f_l!="One_Fourth_Close"&&_reducer.params.p_b_c_b_f_l!="Three_Fourth_Close"){isJtrim=true;isJtrimPriceFrontLean=true;}if(_reducer.params.p_b_c_b_b_l!=="Close"&&_reducer.params.p_b_c_b_b_l!=="Open"&&_reducer.params.p_b_c_b_b_l!="Half_Close"&&_reducer.params.p_b_c_b_b_l!="One_Fourth_Close"&&_reducer.params.p_b_c_b_b_l!="Three_Fourth_Close"){isJtrim=true;isJtrimPriceBackLean=true;}if(_reducer.params.p_b_c_b_r!=="Close"&&_reducer.params.p_b_c_b_r!=="Open"&&_reducer.params.p_b_c_b_r!="Half_Close"&&_reducer.params.p_b_c_b_r!="One_Fourth_Close"&&_reducer.params.p_b_c_b_r!="Three_Fourth_Close"){isJtrim=true;isJtrimPriceRightLean=true;}if(isJtrim!=true){_reducer.params.p_j_t=false;}var jtrimPrice=0;var JtrimVal=0;if(_reducer.params.p_j_t==true){JtrimVal=1;}if(_reducer.params.p_j_t==true){if(_reducer.params.add_right_lean==true&&_reducer.const_var.leanGetDataRight!=""&&_reducer.const_var.leanGetDataRight.jtrim.length>0&&isJtrimPriceRightLean==true&&_reducer.params.add_left_lean==true&&_reducer.const_var.leanGetDataLeft!=""&&_reducer.const_var.leanGetDataLeft.jtrim.length>0&&isJtrimPriceLeftLean==true&&_reducer.params.add_fron_lean==true&&_reducer.const_var.leanGetDataFront!=""&&_reducer.const_var.leanGetDataFront.jtrim.length>0&&isJtrimPriceFrontLean==true&&_reducer.params.add_back_lean==true&&_reducer.const_var.leanGetDataBack!=""&&_reducer.const_var.leanGetDataBack.jtrim.length>0&&isJtrimPriceBackLean==true){if(isJtrimPriceCenter==true){jtrimPrice=parseFloat(jtrimPrice)+parseFloat(data.jtrim[0].cost)*parseFloat(_centerBuildingNumber2)+parseFloat(_reducer.const_var.leanGetDataLeft.jtrim[0].cost)+parseFloat(_reducer.const_var.leanGetDataRight.jtrim[0].cost)+parseFloat(_reducer.const_var.leanGetDataFront.jtrim[0].cost)+parseFloat(_reducer.const_var.leanGetDataBack.jtrim[0].cost);}else{jtrimPrice=parseFloat(jtrimPrice)+parseFloat(_reducer.const_var.leanGetDataLeft.jtrim[0].cost)+parseFloat(_reducer.const_var.leanGetDataRight.jtrim[0].cost)+parseFloat(_reducer.const_var.leanGetDataFront.jtrim[0].cost)+parseFloat(_reducer.const_var.leanGetDataBack.jtrim[0].cost);}//extra_items.push({'item_name':'Jtrim','item_quantity':(params.p_j_t==true)?1:0,'item_price':jtrimPrice});
}else if(_reducer.params.add_right_lean==true&&_reducer.const_var.leanGetDataRight!=""&&_reducer.const_var.leanGetDataRight.jtrim.length>0&&isJtrimPriceRightLean==true){if(isJtrimPriceCenter==true){jtrimPrice=parseFloat(jtrimPrice)+parseFloat(data.jtrim[0].cost)*parseFloat(_centerBuildingNumber2)+parseFloat(_reducer.const_var.leanGetDataRight.jtrim[0].cost);}else{jtrimPrice=parseFloat(jtrimPrice)+parseFloat(_reducer.const_var.leanGetDataRight.jtrim[0].cost);}//extra_items.push({'item_name':'Jtrim','item_quantity':(params.p_j_t==true)?1:0,'item_price':jtrimPrice});
}else if(_reducer.params.add_front_lean==true&&_reducer.const_var.leanGetDataFront!=""&&_reducer.const_var.leanGetDataFront.jtrim.length>0&&isJtrimPriceFrontLean==true){if(isJtrimPriceCenter==true){jtrimPrice=parseFloat(jtrimPrice)+parseFloat(data.jtrim[0].cost)*parseFloat(_centerBuildingNumber2)+parseFloat(_reducer.const_var.leanGetDataFront.jtrim[0].cost);}else{jtrimPrice=parseFloat(jtrimPrice)+parseFloat(_reducer.const_var.leanGetDataFront.jtrim[0].cost);}//extra_items.push({'item_name':'Jtrim','item_quantity':(params.p_j_t==true)?1:0,'item_price':jtrimPrice});
}else if(_reducer.params.add_back_lean==true&&_reducer.const_var.leanGetDataBack!=""&&_reducer.const_var.leanGetDataBack.jtrim.length>0&&isJtrimPriceBackLean==true){if(isJtrimPriceCenter==true){jtrimPrice=parseFloat(jtrimPrice)+parseFloat(data.jtrim[0].cost)*parseFloat(_centerBuildingNumber2)+parseFloat(_reducer.const_var.leanGetDataBack.jtrim[0].cost);}else{jtrimPrice=parseFloat(jtrimPrice)+parseFloat(_reducer.const_var.leanGetDataBack.jtrim[0].cost);}//extra_items.push({'item_name':'Jtrim','item_quantity':(params.p_j_t==true)?1:0,'item_price':jtrimPrice});
}else if(_reducer.params.add_right_lean==true&&_reducer.const_var.leanGetDataRight!=""&&_reducer.const_var.leanGetDataRight.jtrim.length>0&&isJtrimPriceRightLean==true){if(isJtrimPriceCenter==true){jtrimPrice=parseFloat(jtrimPrice)+parseFloat(data.jtrim[0].cost)*parseFloat(_centerBuildingNumber2)+parseFloat(_reducer.const_var.leanGetDataRight.jtrim[0].cost);}else{jtrimPrice=parseFloat(jtrimPrice)+parseFloat(_reducer.const_var.leanGetDataRight.jtrim[0].cost);}//extra_items.push({'item_name':'Jtrim','item_quantity':(params.p_j_t==true)?1:0,'item_price':jtrimPrice});
}else if(_reducer.params.add_left_lean==true&&_reducer.const_var.leanGetDataLeft!=""&&_reducer.const_var.leanGetDataLeft.jtrim.length>0&&isJtrimPriceLeftLean==true){if(isJtrimPriceCenter==true){jtrimPrice=parseFloat(jtrimPrice)+parseFloat(data.jtrim[0].cost)*parseFloat(_centerBuildingNumber2)+parseFloat(_reducer.const_var.leanGetDataLeft.jtrim[0].cost);}else{jtrimPrice=parseFloat(jtrimPrice)+parseFloat(_reducer.const_var.leanGetDataLeft.jtrim[0].cost);}//extra_items.push({'item_name':'Jtrim','item_quantity':(params.p_j_t==true)?1:0,'item_price':jtrimPrice});
}else{if(isJtrimPriceCenter==true){jtrimPrice=parseFloat(jtrimPrice)+parseFloat(data.jtrim[0].cost)*parseFloat(_centerBuildingNumber2);}else{jtrimPrice=parseFloat(jtrimPrice)+0;}//extra_items.push({'item_name':'Jtrim','item_quantity':(params.p_j_t==true)?1:0,'item_price':jtrimPrice});
}extra_items.push({'item_name':'Jtrim','item_quantity':_reducer.params.p_j_t==true?1:0,'item_price':UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData['elements']!=undefined&&_reducer.const_var.UpdatedPriceData.common_length_changed!=true?_reducer.const_var.UpdatedPriceData['elements']['Jtrim'].item_price:jtrimPrice});t_c=parseFloat(t_c)+parseFloat(jtrimPrice);}//extra_items.push({'item_name':'Jtrim','item_quantity':(params.p_j_t==true)?1:0,'item_price':(data.jtrim[0].cost)});
}if(_reducer.params.p_e_b!=0){var bowsPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData['elements']!=undefined&&(_reducer.const_var.UpdatedPriceData.common_width_changed!=true||_reducer.const_var.UpdatedPriceData.common_height_changed!=true)?_reducer.const_var.UpdatedPriceData['elements']['Extra Bows'].item_price:data.bows[0].cost*_reducer.params.p_e_b;extra_items.push({'item_name':'Extra Bows','item_quantity':parseInt(_reducer.params.p_e_b),'item_price':bowsPrice});t_c=parseFloat(t_c)+parseFloat(bowsPrice);}// if(params.fourth_center_cost==true)
// {
//     var extPrice = (UpdatePriceRecord==true && const_var.UpdatedPriceData['elements']!=undefined && (const_var.UpdatedPriceData.common_length_changed!=true))?const_var.UpdatedPriceData['elements']['Four Feet Center'].item_price:data.addons[0].fourth_center_cost; 
//     extra_items.push({'item_name':'Four Feet Center','item_quantity':(params.fourth_center_cost==true)?1:0,'item_price':extPrice});
//     t_c = t_c + extPrice;
// }
if(_reducer.params.risk_cost==true){var extPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData['elements']!=undefined&&_reducer.const_var.UpdatedPriceData.common_length_changed!=true?_reducer.const_var.UpdatedPriceData['elements']['Risk Cost'].item_price:data.addons[0].risk_cost;extra_items.push({'item_name':'Risk Cost','item_quantity':_reducer.params.risk_cost==true?1:0,'item_price':extPrice});t_c=t_c+extPrice;}if(_reducer.params.p_s_c_b==true){if(_reducer.const_var.UpdatedPriceData['elements']!=undefined&&_reducer.const_var.UpdatedPriceData['elements']['Side Cross Bracing']==undefined){_reducer.const_var.UpdatedPriceData.common_length_changed=true;}var extPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData['elements']!=undefined&&_reducer.const_var.UpdatedPriceData.common_length_changed!=true?_reducer.const_var.UpdatedPriceData['elements']['Side Cross Bracing'].item_price:data.side_cross_bracing[0].cost;extra_items.push({'item_name':'Side Cross Bracing','item_quantity':_reducer.params.p_s_c_b==true?1:0,'item_price':extPrice});t_c=parseFloat(t_c)+parseFloat(extPrice);}if(_reducer.params.p_e_c_b==true){if(data.addons_width&&data.addons_width.length>0&&data.addons_width[0].end_cross_bracing!=undefined&&data.addons_width[0].end_cross_bracing!=0){var extPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData['elements']!=undefined&&_reducer.const_var.UpdatedPriceData.common_width_changed!=true?_reducer.const_var.UpdatedPriceData['elements']['End Cross Bracing'].item_price:data.addons_width[0].end_cross_bracing;extra_items.push({'item_name':'End Cross Bracing','item_quantity':_reducer.params.p_e_c_b==true?1:0,'item_price':extPrice});t_c=parseFloat(t_c)+parseFloat(extPrice);}if(data.end_cross_bracing!=undefined&&data.end_cross_bracing.length>0){if(_reducer.const_var.UpdatedPriceData['elements']!=undefined&&_reducer.const_var.UpdatedPriceData['elements']['End Cross Bracing']==undefined){_reducer.const_var.UpdatedPriceData.common_width_changed=true;}var extPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData['elements']!=undefined&&_reducer.const_var.UpdatedPriceData.common_width_changed!=true?_reducer.const_var.UpdatedPriceData['elements']['End Cross Bracing'].item_price:data.end_cross_bracing[0].cost;extra_items.push({'item_name':'End Cross Bracing','item_quantity':_reducer.params.p_e_c_b==true?1:0,'item_price':extPrice});t_c=parseFloat(t_c)+parseFloat(extPrice);}}if(_reducer.params.p_g_c==true){var extPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData['elements']!=undefined&&_reducer.const_var.UpdatedPriceData.common_length_changed!=true?_reducer.const_var.UpdatedPriceData['elements']['Ground Certification'].item_price:data.addons[0].ground_certificate;extra_items.push({'item_name':'Ground Certification','item_quantity':_reducer.params.p_g_c==true?1:0,'item_price':extPrice});t_c=t_c+extPrice;}if(_reducer.params.p_o_p==true){var extPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData['elements']!=undefined&&_reducer.const_var.UpdatedPriceData.common_length_changed!=true?_reducer.const_var.UpdatedPriceData['elements']['Overhang'].item_price:data.addons[0].overhang;extra_items.push({'item_name':'Overhang','item_quantity':_reducer.params.p_o_p==true?1:0,'item_price':extPrice});t_c=t_c+extPrice;}if(_reducer.params.p_p_b!=0){var extPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData['elements']!=undefined&&_reducer.const_var.UpdatedPriceData.common_width_changed!=true?_reducer.const_var.UpdatedPriceData['elements']['Peak Braces'].item_price:data.addons_width[0].peak_braces*parseInt(_reducer.params.p_p_b);extra_items.push({'item_name':'Peak Braces','item_quantity':parseInt(_reducer.params.p_p_b),'item_price':extPrice});t_c=t_c+extPrice;}if(_reducer.params.cert_pac_cost==true){var extPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData['elements']!=undefined&&_reducer.const_var.UpdatedPriceData.common_length_changed!=true?_reducer.const_var.UpdatedPriceData['elements']['Certificate Cost'].item_price:data.addons[0].cert_pac_cost;extra_items.push({'item_name':'Certificate Cost','item_quantity':_reducer.params.cert_pac_cost==true?1:0,'item_price':extPrice});t_c=t_c+extPrice;}if(_reducer.params.p_e_t!=0){var extPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData['elements']!=undefined&&_reducer.const_var.UpdatedPriceData.common_height_changed!=true?_reducer.const_var.UpdatedPriceData['elements']['Extra Truss'].item_price:data.trusses[0].cost*_reducer.params.p_e_t;extra_items.push({'item_name':'Extra Truss','item_quantity':_reducer.params.p_e_t,'item_price':extPrice});t_c=t_c+extPrice;}if(_reducer.params.p_t_u!=0){var extPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData['elements']!=undefined&&(_reducer.const_var.UpdatedPriceData.common_width_changed!=true||_reducer.const_var.UpdatedPriceData.common_length_changed!=true)?_reducer.const_var.UpdatedPriceData['elements']['Truss Upgrade'].item_price:_reducer.params.p_t_u;extra_items.push({'item_name':'Truss Upgrade','item_quantity':1,'item_price':_reducer.params.p_t_u!=0?_reducer.params.p_t_u:0});t_c=t_c+extPrice;}if(_reducer.params.p_b_p==true){var extPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData['elements']!=undefined&&_reducer.const_var.UpdatedPriceData.common_length_changed!=true?_reducer.const_var.UpdatedPriceData['elements']['Bracing Price'].item_price:data.braces[0].cost;extra_items.push({'item_name':'Bracing Price','item_quantity':_reducer.params.p_b_p==true?1:0,'item_price':extPrice});t_c=t_c+extPrice;}if(_reducer.params.p_b_p_feet!="Select"){var extPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData['elements']!=undefined&&_reducer.const_var.UpdatedPriceData.common_length_changed!=true?_reducer.const_var.UpdatedPriceData['elements']['Addition Bracing Price'].item_price:_reducer.params.p_b_p_feet*_reducer.params.p_b_p_feetVal;extra_items.push({'item_name':'Addition Bracing Price','item_quantity':_reducer.params.p_b_p_feetVal,'item_price':extPrice});t_c=t_c+extPrice;}if(data.delux_two_tone.length>0&&Math.abs(data.delux_two_tone[0].cost)==0&&_reducer.params.p_w_c_n==true){var waniscotPrice=0;var conditionPrice="";var leanwaniscotPriceL="";var leanwaniscotPriceF="";var leanwaniscotPriceB="";var leanwaniscotPriceR="";if(_reducer.params.add_right_lean==true&&_reducer.const_var.leanGetDataRight!=""){leanwaniscotPriceR=_reducer.const_var.leanGetDataRight.delux_two_tone[0];}if(_reducer.params.add_left_lean==true&&_reducer.const_var.leanGetDataLeft!=""){leanwaniscotPriceL=_reducer.const_var.leanGetDataLeft.delux_two_tone[0];}if(_reducer.params.add_front_lean==true&&_reducer.const_var.leanGetDataFront!=""){leanwaniscotPriceF=_reducer.const_var.leanGetDataFront.delux_two_tone[0];}if(_reducer.params.add_back_lean==true&&_reducer.const_var.leanGetDataBack!=""){leanwaniscotPriceB=_reducer.const_var.leanGetDataBack.delux_two_tone[0];}if(data.delux_two_tone.length>0){conditionPrice=data.delux_two_tone[0];}else{conditionPrice=data.delux_two_tone[0];}if(_reducer.params.add_left_lean==true){if(_reducer.params.p_b_c_b_l_f=="Close"&&_reducer.params.p_w_c_n==true){waniscotPrice=_reducer.params.p_v_w==true?waniscotPrice+Math.abs(leanwaniscotPriceL.on_end_vertical):waniscotPrice+Math.abs(leanwaniscotPriceL.on_end_horizontal);}if(_reducer.params.p_b_c_b_l_b=="Close"&&_reducer.params.p_w_c_n==true){waniscotPrice=_reducer.params.p_v_w==true?waniscotPrice+Math.abs(leanwaniscotPriceL.on_end_vertical):waniscotPrice+Math.abs(leanwaniscotPriceL.on_end_horizontal);}if(_reducer.params.p_b_c_b_l=="Close"&&_reducer.params.p_w_c_n==true){waniscotPrice=_reducer.params.p_v_w==true?waniscotPrice+Math.abs(leanwaniscotPriceL.on_side_vertical):waniscotPrice+Math.abs(leanwaniscotPriceL.on_side_horizontal);}if(_reducer.params.add_storage_check==true&&_reducer.params.p_w_c_n==true){waniscotPrice=_reducer.params.p_v_w==true?waniscotPrice+(Math.abs(leanwaniscotPriceL.on_side_vertical)+Math.abs(leanwaniscotPriceL.on_end_vertical*2)):waniscotPrice+(Math.abs(leanwaniscotPriceL.on_side_horizontal)+Math.abs(leanwaniscotPriceL.on_end_horizontal*2));}}if(_reducer.params.add_front_lean==true){if(_reducer.params.p_b_c_b_f_f=="Close"&&_reducer.params.p_w_c_n==true){waniscotPrice=_reducer.params.p_v_w==true?waniscotPrice+Math.abs(leanwaniscotPriceF.on_end_vertical):waniscotPrice+Math.abs(leanwaniscotPriceF.on_end_horizontal);}if(_reducer.params.p_b_c_b_f_b=="Close"&&_reducer.params.p_w_c_n==true){waniscotPrice=_reducer.params.p_v_w==true?waniscotPrice+Math.abs(leanwaniscotPriceF.on_end_vertical):waniscotPrice+Math.abs(leanwaniscotPriceF.on_end_horizontal);}if(_reducer.params.p_b_c_b_f_l=="Close"&&_reducer.params.p_w_c_n==true){waniscotPrice=_reducer.params.p_v_w==true?waniscotPrice+Math.abs(leanwaniscotPriceF.on_side_vertical):waniscotPrice+Math.abs(leanwaniscotPriceF.on_side_horizontal);}if(_reducer.params.add_storage_check_front==true&&_reducer.params.p_w_c_n==true){waniscotPrice=_reducer.params.p_v_w==true?waniscotPrice+(Math.abs(leanwaniscotPriceF.on_side_vertical)+Math.abs(leanwaniscotPriceF.on_end_vertical*2)):waniscotPrice+(Math.abs(leanwaniscotPriceF.on_side_horizontal)+Math.abs(leanwaniscotPriceF.on_end_horizontal*2));}}if(_reducer.params.add_back_lean==true){if(_reducer.params.p_b_c_b_b_f=="Close"&&_reducer.params.p_w_c_n==true){waniscotPrice=_reducer.params.p_v_w==true?waniscotPrice+Math.abs(leanwaniscotPriceB.on_end_vertical):waniscotPrice+Math.abs(leanwaniscotPriceB.on_end_horizontal);}if(_reducer.params.p_b_c_b_b_b=="Close"&&_reducer.params.p_w_c_n==true){waniscotPrice=_reducer.params.p_v_w==true?waniscotPrice+Math.abs(leanwaniscotPriceB.on_end_vertical):waniscotPrice+Math.abs(leanwaniscotPriceB.on_end_horizontal);}if(_reducer.params.p_b_c_b_b_l=="Close"&&_reducer.params.p_w_c_n==true){waniscotPrice=_reducer.params.p_v_w==true?waniscotPrice+Math.abs(leanwaniscotPriceB.on_side_vertical):waniscotPrice+Math.abs(leanwaniscotPriceB.on_side_horizontal);}if(_reducer.params.add_storage_check_back==true&&_reducer.params.p_w_c_n==true){waniscotPrice=_reducer.params.p_v_w==true?waniscotPrice+(Math.abs(leanwaniscotPriceB.on_side_vertical)+Math.abs(leanwaniscotPriceB.on_end_vertical*2)):waniscotPrice+(Math.abs(leanwaniscotPriceB.on_side_horizontal)+Math.abs(leanwaniscotPriceB.on_end_horizontal*2));}}if(_reducer.params.add_right_lean==true){if(_reducer.params.p_b_c_b_r_f=="Close"&&_reducer.params.p_w_c_n==true){waniscotPrice=_reducer.params.p_v_w==true?waniscotPrice+Math.abs(leanwaniscotPriceR.on_end_vertical):waniscotPrice+Math.abs(leanwaniscotPriceR.on_end_horizontal);}if(_reducer.params.p_b_c_b_r_b=="Close"&&_reducer.params.p_w_c_n==true){waniscotPrice=_reducer.params.p_v_w==true?waniscotPrice+Math.abs(leanwaniscotPriceR.on_end_vertical):waniscotPrice+Math.abs(leanwaniscotPriceR.on_end_horizontal);}if(_reducer.params.p_b_c_b_r=="Close"&&_reducer.params.p_w_c_n==true){waniscotPrice=_reducer.params.p_v_w==true?waniscotPrice+Math.abs(leanwaniscotPriceR.on_side_vertical):waniscotPrice+Math.abs(leanwaniscotPriceR.on_side_horizontal);}if(_reducer.params.add_storage_check_right==true&&_reducer.params.p_w_c_n==true){waniscotPrice=_reducer.params.p_v_w==true?waniscotPrice+(Math.abs(leanwaniscotPriceR.on_side_vertical)+Math.abs(leanwaniscotPriceR.on_end_vertical*2)):waniscotPrice+(Math.abs(leanwaniscotPriceR.on_side_horizontal)+Math.abs(leanwaniscotPriceR.on_end_horizontal*2));}}if(data.delux_two_tone.length>0){conditionPrice=data.delux_two_tone[0];}else{conditionPrice=data.delux_two_tone[0];}if(_reducer.params.p_b_w=="Close"&&_reducer.params.p_w_c_n==true){waniscotPrice=_reducer.params.p_v_w==true?waniscotPrice+Math.abs(conditionPrice.on_end_vertical):waniscotPrice+Math.abs(conditionPrice.on_end_horizontal);}if(_reducer.params.p_f_w=="Close"&&_reducer.params.p_w_c_n==true){waniscotPrice=_reducer.params.p_v_w==true?waniscotPrice+Math.abs(conditionPrice.on_end_vertical):waniscotPrice+Math.abs(conditionPrice.on_end_horizontal);}if(_reducer.params.p_r_w=="Close"&&_reducer.params.p_w_c_n==true){waniscotPrice=_reducer.params.p_v_w==true?waniscotPrice+Math.abs(conditionPrice.on_side_vertical):waniscotPrice+Math.abs(conditionPrice.on_side_horizontal);}if(_reducer.params.p_l_w=="Close"&&_reducer.params.p_w_c_n==true){waniscotPrice=_reducer.params.p_v_w==true?waniscotPrice+Math.abs(conditionPrice.on_side_vertical):waniscotPrice+Math.abs(conditionPrice.on_side_horizontal);}if(_reducer.params.p_u_c==true){waniscotPrice=_reducer.params.p_v_w==true?waniscotPrice+Math.abs(conditionPrice.on_side_vertical*2):waniscotPrice+Math.abs(conditionPrice.on_side_horizontal*2);waniscotPrice=_reducer.params.p_v_w==true?waniscotPrice+Math.abs(conditionPrice.on_end_vertical*2):waniscotPrice+Math.abs(conditionPrice.on_end_horizontal*2);}post_data['building'].wainscot_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.wainscot_price_changed!=true?_reducer.const_var.UpdatedPriceData.wainscot_price:waniscotPrice;t_c=parseFloat(t_c)+parseFloat(post_data['building'].wainscot_price);}else{t_c=_reducer.params.p_w_c_n==true&&_reducer.params.p_v_w==true&&(_reducer.params.p_b_w=="Close"&&_reducer.params.p_l_w=="Close"&&_reducer.params.p_r_w=="Close"&&_reducer.params.p_f_w=="Close"||_reducer.params.p_u_c==true)?data.delux_two_tone.length>0&&data.delux_two_tone!=undefined?parseFloat(t_c)+parseFloat(data.delux_two_tone[0].cost):parseFloat(t_c)+0:parseFloat(t_c)+0;post_data['building'].wainscot_price=_reducer.params.p_w_c_n==true&&_reducer.params.p_v_w==true&&(_reducer.params.p_b_w=="Close"&&_reducer.params.p_l_w=="Close"&&_reducer.params.p_r_w=="Close"&&_reducer.params.p_f_w=="Close"||_reducer.params.p_u_c==true)?data.delux_two_tone.length>0&&data.delux_two_tone!=undefined?data.delux_two_tone[0].cost:0:0;}if(_reducer.params.p_w_c_n){post_data['building'].wainscot_type="full-building";post_data['building'].wainscot_side="both";post_data['building'].wainscot_end="both";post_data['building'].wainscot=_reducer.const_var.c_m_a_Colors[_reducer.params.p_w_c_c_id];}post_data['building'].wall_color=_reducer.const_var.c_m_a_Colors[_reducer.params.p_w_c_id];post_data['building'].roof_color=_reducer.const_var.c_m_a_Colors[_reducer.params.p_r_c_id];post_data['building'].trim_color=_reducer.const_var.c_m_a_Colors[_reducer.params.p_t_c_id];post_data['building'].garageDoorColor=_reducer.const_var.garageDoorColor[_reducer.params.g_d_c_id];post_data['building'].roof_color_price=0;post_data['building'].wall_color_price=0;post_data['building'].trim_color_price=0;post_data['building'].wainscot_color_price=0;//post_data['building'].garageDoor_color_price = 0;
// console.log(t_c,const_var.entry_points,"const_var.entry_points")
// console.log(const_var.entry_points.length,"const_var.entry_points.length")
if(_reducer.const_var.entry_points.length>0){var dataPriceC=0;_reducer.const_var.entry_points.map(function(value,key){// console.log(value.entry_price,t_c,"const_var.entry_points.length")
dataPriceC=parseFloat(dataPriceC)+parseFloat(value.entry_price);// console.log(t_c,"dataPriceC",dataPriceC)
if(value.entry_header_seal==true){dataPriceC=parseFloat(dataPriceC)+parseFloat(value.entry_header_seal_price);}else{dataPriceC=parseFloat(dataPriceC)+parseFloat(0);}if(value.entry_trim_kit==true){dataPriceC=parseFloat(dataPriceC)+parseFloat(value.entry_trim_kit_price);}else{dataPriceC=parseFloat(dataPriceC)+parseFloat(0);}if(value.entry_chain_hoist==true){dataPriceC=parseFloat(dataPriceC)+parseFloat(value.entry_chain_hoist_price);}else{dataPriceC=parseFloat(dataPriceC)+parseFloat(0);}if(value.entry_automatic_openers==true){dataPriceC=parseFloat(dataPriceC)+parseFloat(value.entry_automatic_openers_price);}else{dataPriceC=parseFloat(dataPriceC)+parseFloat(0);}dataPriceC=parseFloat(dataPriceC)+parseFloat(value.entry_garageDoor_color_price==undefined?0:Number(value.entry_garageDoor_color_price));});t_c=parseFloat(t_c)+parseFloat(dataPriceC);// console.log(t_c,"t_c5")
}else{t_c=parseFloat(t_c)+parseFloat(0);}t_c=_reducer.params.p_t_u!=0?parseFloat(t_c)+Number(_reducer.params.p_t_u):parseFloat(t_c)+parseFloat(0);var calCulatePriceByDis="";var certVal=1;if(_reducer.params.p_e_i!="other"){if(_reducer.const_var.c_f_a_per[_reducer.params.p_e_i]!=0){// console.log(const_var.c_f_aCer,"const_var.c_f_aCer")
if(_reducer.const_var.c_f_aCer[_reducer.params.p_e_i]!=undefined&&_reducer.const_var.c_f_aCer[_reducer.params.p_e_i].percentage_of!=undefined&&_reducer.const_var.c_f_aCer[_reducer.params.p_e_i].percentage_of=="building_amount"){var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.certificate_price_changed!=true?_reducer.const_var.UpdatedPriceData.certificate_price:_reducer.const_var.c_f_a_per[_reducer.params.p_e_i]?t_c*_reducer.const_var.c_f_a_per[_reducer.params.p_e_i]/100:0;post_data['building'].certificate_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.certificate_price_changed!=true?_reducer.const_var.UpdatedPriceData.certificate_price:_reducer.const_var.c_f_a_per[_reducer.params.p_e_i]?t_c*_reducer.const_var.c_f_a_per[_reducer.params.p_e_i]/100:0;;//(VUEData!='' && VUEData.certificate_price!=0)?VUEData.certificate_price:finalCertPrice;
t_c=parseFloat(t_c)+parseFloat(finalCertPrice);//(const_var.c_f_a_per[params.p_e_i])?t_c + (t_c * const_var.c_f_a_per[params.p_e_i] / 100):t_c + 0;
}else{var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.certificate_price_changed!=true?_reducer.const_var.UpdatedPriceData.certificate_price:_reducer.const_var.c_f_a_per[_reducer.params.p_e_i]?post_data['building'].roof_style_price*_reducer.const_var.c_f_a_per[_reducer.params.p_e_i]/100:0;post_data['building'].certificate_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.certificate_price_changed!=true?_reducer.const_var.UpdatedPriceData.certificate_price:_reducer.const_var.c_f_a_per[_reducer.params.p_e_i]?post_data['building'].roof_style_price*_reducer.const_var.c_f_a_per[_reducer.params.p_e_i]/100:0;;//(VUEData!='' && VUEData.certificate_price!=0)?VUEData.certificate_price:finalCertPrice;
t_c=parseFloat(t_c)+parseFloat(finalCertPrice);//(const_var.c_f_a_per[params.p_e_i])?t_c + (t_c * const_var.c_f_a_per[params.p_e_i] / 100):t_c + 0;
}}else{if(_reducer.params.p_i_s==1&&_reducer.const_var.c_f_i_a[_reducer.params.p_e_i]!=0){var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.certificate_price_changed!=true?_reducer.const_var.UpdatedPriceData.certificate_price:_reducer.const_var.c_f_i_a[_reducer.params.p_e_i]?_reducer.const_var.c_f_i_a[_reducer.params.p_e_i]:0;//(const_var.c_f_a[params.p_e_i])?const_var.c_f_a[params.p_e_i]:0;
t_c=parseFloat(t_c)+parseFloat(finalCertPrice);post_data['building'].certificate_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.certificate_price_changed!=true?_reducer.const_var.UpdatedPriceData.certificate_price:_reducer.const_var.c_f_i_a[_reducer.params.p_e_i]?_reducer.const_var.c_f_i_a[_reducer.params.p_e_i]:0;//(VUEData!='' && VUEData.certificate_price!=0)?VUEData.certificate_price:finalCertPrice;
}else{var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.certificate_price_changed!=true?_reducer.const_var.UpdatedPriceData.certificate_price:_reducer.const_var.c_f_a[_reducer.params.p_e_i]?_reducer.const_var.c_f_a[_reducer.params.p_e_i]:0;//(const_var.c_f_a[params.p_e_i])?const_var.c_f_a[params.p_e_i]:0;
t_c=parseFloat(t_c)+parseFloat(finalCertPrice);post_data['building'].certificate_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.certificate_price_changed!=true?_reducer.const_var.UpdatedPriceData.certificate_price:_reducer.const_var.c_f_a[_reducer.params.p_e_i]?_reducer.const_var.c_f_a[_reducer.params.p_e_i]:0;//(VUEData!='' && VUEData.certificate_price!=0)?VUEData.certificate_price:finalCertPrice;
}}//post_data['building'].certificate_price = post_data['building'].certificate_price % 1 != 0 ? post_data['building'].certificate_price.toFixed(2):post_data['building'].certificate_price;
}if(_reducer.params.p_e_i=="other"){post_data['building'].certificate={'gauge':0,'certified':1,'has_double_leg':0,'has_ladder_leg':0,'has_other_leg':0,'height':0,'id':-1,'cost':0,'is_default':"no",'length':0,'map_id':0,'name':"Other"};post_data['building'].certificate_name=_reducer.params.p_e_i_other!=''?_reducer.params.p_e_i_other:'Other';var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.certificate_price_changed!=true?_reducer.const_var.UpdatedPriceData.certificate_price:0;t_c=parseFloat(t_c)+parseFloat(finalCertPrice);post_data['building'].certificate_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.certificate_price_changed!=true?_reducer.const_var.UpdatedPriceData.certificate_price:0;}post_data['building'].leanto=_reducer.const_var.leanto;var leantoPriceCalculation={};if(post_data['building'].leanto.length>0){for(var i=0;i<=post_data['building'].leanto.length-1;i++){if(post_data['building'].leanto[i].leanto_type==1){if(_reducer.params.add_left_back_lean_porch==true){post_data['building'].leanto[i].porch={'type':'left','length':_reducer.params.lean_p_d+_reducer.params.leanB_p_w,'cost':parseInt(post_data['building'].connection_fee_left_back),'wrap_with':['back']};}if(_reducer.params.add_left_front_lean_porch==true){post_data['building'].leanto[i].porch={'type':'left','length':_reducer.params.lean_p_d+_reducer.params.leanF_p_w,'cost':parseInt(post_data['building'].connection_fee_left_front),'wrap_with':['front']};}if(_reducer.params.add_left_back_lean_porch==true&&_reducer.params.add_left_front_lean_porch==true){post_data['building'].leanto[i].porch={'type':'left','length':_reducer.params.lean_p_d+_reducer.params.leanB_p_w+_reducer.params.leanF_p_w,'cost':parseInt(post_data['building'].connection_fee_left_front)+parseInt(post_data['building'].connection_fee_left_back),'wrap_with':['front','back']};}}if(post_data['building'].leanto[i].leanto_type==2){if(_reducer.params.add_right_back_lean_porch==true){post_data['building'].leanto[i].porch={'type':'right','length':_reducer.params.leanR_p_d+_reducer.params.leanB_p_w,'cost':parseInt(post_data['building'].connection_fee_right_back),'wrap_with':['back']};}if(_reducer.params.add_right_front_lean_porch==true){post_data['building'].leanto[i].porch={'type':'right','length':_reducer.params.leanR_p_d+_reducer.params.leanF_p_w,'cost':parseInt(post_data['building'].connection_fee_right_front),'wrap_with':['front']};}if(_reducer.params.add_right_back_lean_porch==true&&_reducer.params.add_right_front_lean_porch==true){post_data['building'].leanto[i].porch={'type':'right','length':_reducer.params.leanR_p_d+_reducer.params.leanB_p_w+_reducer.params.leanF_p_w,'cost':parseInt(post_data['building'].connection_fee_right_front)+parseInt(post_data['building'].connection_fee_right_back),'wrap_with':['front','back']};}}if(post_data['building'].leanto[i].leanto_type==3){if(post_data['building'].leanto[i].porch!=undefined){if(_reducer.params.add_left_front_lean_porch==true){post_data['building'].leanto[i].porch.wrap_with=['left'];}if(_reducer.params.add_right_front_lean_porch==true){post_data['building'].leanto[i].porch.wrap_with=['right'];}if(_reducer.params.add_left_front_lean_porch==true&&_reducer.params.add_right_front_lean_porch==true){post_data['building'].leanto[i].porch.wrap_with=['left','right'];}}}if(post_data['building'].leanto[i].leanto_type==4){if(post_data['building'].leanto[i].porch!=undefined){if(_reducer.params.add_left_back_lean_porch==true){post_data['building'].leanto[i].porch.wrap_with=['left'];}if(_reducer.params.add_right_back_lean_porch==true){post_data['building'].leanto[i].porch.wrap_with=['right'];}if(_reducer.params.add_left_back_lean_porch==true&&_reducer.params.add_right_back_lean_porch==true){post_data['building'].leanto[i].porch.wrap_with=['left','right'];}}}if(post_data['building'].leanto[i].leanto_type!=2&&post_data['building'].leanto[i].leanto_type!=1){if(post_data['building'].leanto[i].porch!=undefined){post_data['building'].leanto[i].porch.cost=0;}}leantoPriceCalculation.totalLeanPrice=parseFloat(leantoPriceCalculation.totalLeanPrice)+parseFloat(post_data['building'].leanto[i].t_c_b)+parseFloat(post_data['building'].leanto[i].t_c_b);leantoPriceCalculation.totalBasePrice=parseFloat(leantoPriceCalculation.totalBasePrice)+parseFloat(post_data['building'].leanto[i].basic_price)+parseFloat(post_data['building'].leanto[i].basic_price);leantoPriceCalculation.totalWallPrice=parseFloat(leantoPriceCalculation.totalWallPrice)+parseFloat(post_data['building'].leanto[i].front_wall_price)+parseFloat(post_data['building'].leanto[i].back_wall_price)+parseFloat(post_data['building'].leanto[i].side_wall_price)+parseFloat(post_data['building'].leanto[i].front_wall_price)+parseFloat(post_data['building'].leanto[i].back_wall_price)+parseFloat(post_data['building'].leanto[i].side_wall_price);if(post_data['building'].leanto[i].utility_price!=undefined&&post_data['building'].leanto[i].utility_price!=0){leantoPriceCalculation.totalWallPrice=parseFloat(leantoPriceCalculation.totalWallPrice)+parseFloat(post_data['building'].leanto[i].utility_price);}leantoPriceCalculation.totalHeightPrice=parseFloat(leantoPriceCalculation.totalHeightPrice)+parseFloat(post_data['building'].leanto[i].height_price);if(_reducer.const_var.post_data['building'].leanto[i].leanto_type==1){_reducer.const_var.post_data['building'].leanto[i].alignment=_reducer.const_var.TypeAlingnment[_reducer.params.leantoAlignmentLeft];}if(_reducer.const_var.post_data['building'].leanto[i].leanto_type==2){_reducer.const_var.post_data['building'].leanto[i].alignment=_reducer.const_var.TypeAlingnment[_reducer.params.leantoAlignmentRight];}if(_reducer.const_var.post_data['building'].leanto[i].leanto_type==3){_reducer.const_var.post_data['building'].leanto[i].alignment=_reducer.const_var.TypeAlingnment[_reducer.params.leantoAlignmentFront];}if(_reducer.const_var.post_data['building'].leanto[i].leanto_type==4){_reducer.const_var.post_data['building'].leanto[i].alignment=_reducer.const_var.TypeAlingnment[_reducer.params.leantoAlignmentBack];}}if(isNaN(parseFloat(leantoPriceCalculation.totalBasePrice))==true){leantoPriceCalculation.totalBasePrice=0;}}else{leantoPriceCalculation.totalLeanPrice=0;leantoPriceCalculation.totalBasePrice=0;leantoPriceCalculation.totalWallPrice=0;leantoPriceCalculation.totalHeightPrice=0;}// console.log(post_data['building'].leanto,"const_var.leanto")
if(_reducer.const_var.additionalFeaturesArray!=undefined&&_reducer.const_var.additionalFeaturesArray.length>0){if(isNaN(parseFloat(leantoPriceCalculation.totalWallPrice))==true){leantoPriceCalculation.totalWallPrice=0;}if(isNaN(parseFloat(leantoPriceCalculation.totalBasePrice))==true){leantoPriceCalculation.totalBasePrice=0;}if(isNaN(parseFloat(leantoPriceCalculation.totalLeanPrice))==true){leantoPriceCalculation.totalLeanPrice=0;}if(isNaN(parseFloat(leantoPriceCalculation.totalHeightPrice))==true){leantoPriceCalculation.totalHeightPrice=0;}_reducer.const_var.additionalFeaturesArray.map(function(val,index){if(val==null){return;}if(val.is_checked==true){_reducer.const_var.UpdatedPriceData['elements'][val.additional_feature.toString()]=undefined;if(val.cost_type=="%"){var splitVal=0;if(val.percentage_of!=undefined&&val.percentage_of!=""){splitVal=val.percentage_of.split(",");}else{splitVal=val.percentage_of.split(",");}var splval=0;if(splitVal!=0){if(splitVal.includes("1")!=false){splval=parseFloat(splval)+parseFloat(t_c)+parseFloat(leantoPriceCalculation.totalLeanPrice);}if(splitVal.includes("2")!=false){splval=parseFloat(splval)+parseFloat(post_data['building'].roof_style_price)+parseFloat(leantoPriceCalculation.totalBasePrice);}if(splitVal.includes("3")!=false){if(_reducer.params.p_u_c==true){splval=parseFloat(splval)+parseFloat(post_data['building'].utility_price)+parseFloat(post_data['building'].front_wall_price)+parseFloat(post_data['building'].left_wall_price)+parseFloat(post_data['building'].right_wall_price)+parseFloat(post_data['building'].back_wall_price)+parseFloat(leantoPriceCalculation.totalWallPrice);}else{splval=parseFloat(splval)+parseFloat(post_data['building'].front_wall_price)+parseFloat(post_data['building'].left_wall_price)+parseFloat(post_data['building'].right_wall_price)+parseFloat(post_data['building'].back_wall_price)+parseFloat(leantoPriceCalculation.totalWallPrice);}}if(splitVal.includes("4")!=false){splval=parseFloat(splval)+parseFloat(post_data['building'].height_price)+parseFloat(leantoPriceCalculation.totalHeightPrice);}}else{splval=parseFloat(splval)+parseFloat(t_c);}t_c=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData['elements']!=undefined&&_reducer.const_var.UpdatedPriceData['elements'][val.additional_feature.toString()]!=undefined?parseFloat(t_c)+parseFloat(_reducer.const_var.UpdatedPriceData['elements'][val.additional_feature.toString()].item_price):parseFloat(t_c)+parseFloat(splval*val.cost/100);extra_items.push({'item_name':val.additional_feature,'item_quantity':val.is_checked==true?1:0,'item_price':UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData['elements']!=undefined&&_reducer.const_var.UpdatedPriceData['elements'][val.additional_feature.toString()]!=undefined?_reducer.const_var.UpdatedPriceData['elements'][val.additional_feature.toString()].item_price:parseInt(splval*val.cost/100)});}else{t_c=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData['elements']!=undefined&&_reducer.const_var.UpdatedPriceData['elements'][val.additional_feature.toString()]!=undefined?parseFloat(t_c)+parseFloat(_reducer.const_var.UpdatedPriceData['elements'][val.additional_feature.toString()].item_price):parseFloat(t_c)+parseFloat(val.cost);extra_items.push({'item_name':val.additional_feature,'item_quantity':val.is_checked==true?1:0,'item_price':UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData['elements']!=undefined&&_reducer.const_var.UpdatedPriceData['elements'][val.additional_feature.toString()]!=undefined?_reducer.const_var.UpdatedPriceData['elements'][val.additional_feature.toString()].item_price:parseInt(val.cost)});}}});post_data['building'].additionalFeaturesArray=_reducer.const_var.additionalFeaturesArray;}post_data['building'].price=parseFloat(t_c);post_data['building'].order_total=parseFloat(t_c);post_data['building'].grand_total=parseFloat(t_c);// console.log( post_data['building'].order_total," post_data['building'].order_total")
var leantoRoofColorPrice=0;var leantoWallColorPrice=0;var leantoTrimColorPrice=0;if(post_data['building'].leanto.length>0){for(var i=0;i<=post_data['building'].leanto.length-1;i++){var leftleanPrice=post_data['building'].leanto[i].t_c_b==undefined?_reducer.const_var.leanto[i].t_c_b:post_data['building'].leanto[i].t_c_b;if(isNaN(parseFloat(leftleanPrice))==true){leftleanPrice=0;}if(_reducer.const_var.c_m_a_Colors[_reducer.params.p_r_c_id].cost!=0){leantoRoofColorPrice=parseFloat(leantoRoofColorPrice)+parseFloat(post_data['building'].leanto[i].basic_price)*parseFloat(_reducer.const_var.c_m_a_Colors[_reducer.params.p_r_c_id].cost)/100;}if(_reducer.const_var.c_m_a_Colors[_reducer.params.p_w_c_id].cost!=0){if(post_data['building'].leanto[i].utility_price!=undefined){leantoWallColorPrice=parseFloat(leantoWallColorPrice)+parseFloat(post_data['building'].leanto[i].front_wall_price)+parseFloat(post_data['building'].leanto[i].utility_price)+parseFloat(post_data['building'].leanto[i].side_wall_price);}else{leantoWallColorPrice=parseFloat(post_data['building'].leanto[i].front_wall_price)+parseFloat(post_data['building'].leanto[i].back_wall_price)+parseFloat(post_data['building'].leanto[i].side_wall_price);}}if(_reducer.const_var.c_m_a_Colors[_reducer.params.p_t_c_id].cost!=0){leantoTrimColorPrice=parseFloat(leantoTrimColorPrice)+parseFloat(post_data['building'].leanto[i].height_price);}post_data['building'].order_total=parseFloat(post_data['building'].order_total+parseFloat(leftleanPrice));//post_data['building'].order_total = (post_data['building'].order_total + (rightleanPrice));
}}else{post_data['building'].order_total=parseFloat(post_data['building'].order_total);}if(_reducer.const_var.c_m_a_Colors[_reducer.params.p_r_c_id].cost!=0){post_data['building'].roof_color_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.color_price_changed!=true?_reducer.const_var.UpdatedPriceData.roof_color_price:((parseFloat(leantoRoofColorPrice)+parseFloat(post_data['building'].roof_style_price))*parseFloat(_reducer.const_var.c_m_a_Colors[_reducer.params.p_r_c_id].cost)/100).toFixed(2);post_data['building'].order_total=parseFloat(post_data['building'].order_total)+parseFloat(post_data['building'].roof_color_price);post_data['building'].roof_color.roof_color_price=post_data['building'].roof_color_price;}if(_reducer.const_var.c_m_a_Colors[_reducer.params.p_w_c_id].cost!=0){var wallPriceCal=0;if(post_data['building'].utility_price!=undefined&&_reducer.params.p_u_c==true){wallPriceCal=parseFloat(post_data['building'].front_wall_price)+parseFloat(post_data['building'].left_wall_price)+parseFloat(post_data['building'].right_wall_price)+parseFloat(post_data['building'].utility_price);}else{wallPriceCal=parseFloat(post_data['building'].front_wall_price)+parseFloat(post_data['building'].back_wall_price)+parseFloat(post_data['building'].left_wall_price)+parseFloat(post_data['building'].right_wall_price);}post_data['building'].wall_color_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.color_price_changed!=true?_reducer.const_var.UpdatedPriceData.wall_color_price:parseFloat(leantoWallColorPrice)+(parseFloat(wallPriceCal)*parseFloat(_reducer.const_var.c_m_a_Colors[_reducer.params.p_w_c_id].cost)/100).toFixed(2);post_data['building'].order_total=parseFloat(post_data['building'].order_total)+parseFloat(post_data['building'].wall_color_price);post_data['building'].wall_color.wall_color_price=post_data['building'].wall_color_price;}if(_reducer.const_var.c_m_a_Colors[_reducer.params.p_t_c_id].cost!=0){var leantrimPrice=(parseFloat(leantoTrimColorPrice)+parseFloat(leantoRoofColorPrice))*_reducer.const_var.c_m_a_Colors[_reducer.params.p_t_c_id].cost/100;post_data['building'].trim_color_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.color_price_changed!=true?_reducer.const_var.UpdatedPriceData.trim_color_price:parseFloat(leantrimPrice)+((parseFloat(post_data['building'].roof_style_price)+parseFloat(post_data['building'].height_price))*_reducer.const_var.c_m_a_Colors[_reducer.params.p_t_c_id].cost/100).toFixed(2);post_data['building'].order_total=parseFloat(post_data['building'].order_total)+parseFloat(post_data['building'].trim_color_price);post_data['building'].trim_color.trim_color_price=post_data['building'].trim_color_price;}// if(const_var.garageDoorColor[params.g_d_c_id].cost!=0)
// {
//     let garageDoorColorPrice = parseFloat(post_data['building'].garageDoor_color_price);
//     post_data['building'].garageDoor_color_price = parseFloat(const_var.UpdatedPriceData.garageDoor_color_price):((parseFloat(garageDoorColorPrice)* parseFloat(const_var.garageDoorColor[params.g_d_c_id].cost))/100);
//     post_data['building'].order_total = parseFloat(post_data['building'].order_total) + parseFloat(post_data['building'].garageDoor_color_price);
//     post_data['building'].garageDoorColor.garageDoor_color_price = parseFloat(post_data['building'].garageDoor_color_price);
// }
if(_reducer.params.p_w_c_n==true&&_reducer.const_var.c_m_a_Colors[_reducer.params.p_w_c_c_id].cost!=0){if(post_data['building'].wainscot_price==0){post_data['building'].wainscot_color_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.color_price_changed!=true?_reducer.const_var.UpdatedPriceData.wainscot_color_price:data.panel[0].cost*_reducer.const_var.c_m_a_Colors[_reducer.params.p_w_c_c_id].cost/100;}else{post_data['building'].wainscot_color_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.color_price_changed!=true?_reducer.const_var.UpdatedPriceData.wainscot_color_price:parseFloat(post_data['building'].wainscot_price)*_reducer.const_var.c_m_a_Colors[_reducer.params.p_w_c_c_id].cost/100;}// post_data['building'].wainscot_color_price = (UpdatePriceRecord==true && const_var.UpdatedPriceData.color_price_changed!=true)?const_var.UpdatedPriceData.wainscot_color_price:(parseFloat(post_data['building'].wainscot_price)  * const_var.c_m_a_Colors[params.p_w_c_c_id].cost)/100;
post_data['building'].order_total=parseFloat(post_data['building'].order_total)+parseFloat(post_data['building'].wainscot_color_price);post_data['building'].wainscot.wainscot_color_price=post_data['building'].wainscot_color_price;}post_data['building'].order_total=post_data['building'].order_total;post_data['building'].sub_order_total=post_data['building'].order_total;_reducer.const_var.BuildingPriceArrar['order_total']=post_data['building'].order_total;// console.log(const_var.BuildingPriceArrar['order_total']," =", post_data['building'].order_total)
_reducer.const_var.BuildingPriceArrar['sub_order_total']=post_data['building'].order_total;if(CalculatesurchargeFees==undefined){CalculatesurchargeFees=0;}else{CalculatesurchargeFees=parseFloat(_reducer.const_var.order_extra_items['surchargeFees']);}// if(const_var.stateManufacturerAcordingAPIDiscount['surcharge'][params.m_s_n]==undefined)
// {
//     const_var.order_extra_items['surchargeFees'] = 0;
// }
//console.log(const_var.stateManufacturerAcordingAPIDiscount['surcharge'],const_var.stateManufacturerAcordingAPIDiscount['surchargeArray'],"const_var.stateManufacturerAcordingAPIDiscount['surcharge']");
if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge']!=undefined&&_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n]==undefined){//console.log()
if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surchargeArray'][_reducer.params.m_s_n]!=undefined){_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n]=_reducer.const_var.stateManufacturerAcordingAPIDiscount['surchargeArray']!=undefined&&_reducer.const_var.stateManufacturerAcordingAPIDiscount['surchargeArray'][_reducer.params.m_s_n].length>0?_reducer.const_var.stateManufacturerAcordingAPIDiscount['surchargeArray'][_reducer.params.m_s_n]:_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n];}else{_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge']=[];}}var filterData="";if(_reducer.const_var.crmSetting.is_Edit!=true&&_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge']!=undefined&&_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n]!=undefined&&Object.keys(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n]).length>0){if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n].is_edit==undefined&&_reducer.const_var.stateManufacturerAcordingAPIDiscount['surchargeArray'][_reducer.params.m_s_n].length>0){filterData=_reducer.const_var.stateManufacturerAcordingAPIDiscount['surchargeArray'][_reducer.params.m_s_n].filter(function(data){return post_data['building'].order_total>=data.price_from&&post_data['building'].order_total<=data.price_to;});var len=filterData.length-1;_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n]=filterData[len]!=undefined?filterData[len]:_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n];if(filterData.length==0){_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n]=filterData.length==0?undefined:_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n];}}else{_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n]=filterData.length==0?undefined:_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n];}}//console.log(filterData,"filterData",const_var.stateManufacturerAcordingAPIDiscount['surcharge'][params.m_s_n],const_var.stateManufacturerAcordingAPIDiscount['surcharge'])
post_data['building'].surcharge_amount=_reducer.const_var.order_extra_items['surchargeFees'];if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge']!=undefined&&_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n]!=undefined&&_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n]!=0&&Object.keys(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n]).length>0){if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n].taxable==1&&_reducer.const_var.crmSetting.is_Edit==false){if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n].is_edit==undefined){_reducer.const_var.order_extra_items['surchargeFees']=0;if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n].amount_type=='per'){if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n].percentage_of=="building_amount"){CalculatesurchargeFees=parseFloat(parseFloat(_reducer.const_var.BuildingPriceArrar['order_total'])*parseFloat(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n].amount)/100).toFixed(2);}else{if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n].percentage_of=="basic_price"){CalculatesurchargeFees=parseFloat((parseFloat(post_data['building'].roof_style_price)+parseFloat(leantoPriceCalculation.totalBasePrice))*parseFloat(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n].amount)/100).toFixed(2);}else{CalculatesurchargeFees=parseFloat(parseFloat(_reducer.const_var.BuildingPriceArrar['sub_order_total'])*parseFloat(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n].amount)/100).toFixed(2);}//console.log(CalculatesurchargeFees,"CalculatesurchargeFees",const_var.stateManufacturerAcordingAPIDiscount['surcharge'][params.m_s_n].amount,const_var.BuildingPriceArrar['sub_order_total']);
}}else{CalculatesurchargeFees=parseFloat(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n].amount);}}else{CalculatesurchargeFees=parseFloat(CalculatesurchargeFees);}post_data['building'].surcharge_taxable=_reducer.const_var.UpdatedPriceData.surcharge_taxable==undefined?_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n].taxable:_reducer.const_var.UpdatedPriceData.surcharge_taxable;post_data['building'].surcharge_amount=CalculatesurchargeFees;_reducer.const_var.BuildingPriceArrar['surcharge_amount']=parseFloat(post_data['building'].surcharge_amount);post_data['building'].order_total=parseFloat(post_data['building'].order_total)+parseFloat(post_data['building'].surcharge_amount);_reducer.const_var.BuildingPriceArrar['order_total']=parseFloat(_reducer.const_var.BuildingPriceArrar['order_total'])+parseFloat(post_data['building'].surcharge_amount);if(_reducer.const_var.order_extra_items['surchargeFees']==0){_reducer.const_var.order_extra_items['surchargeFees']=parseFloat(CalculatesurchargeFees);}}else{if(_reducer.const_var.crmSetting.is_Edit==true&&_reducer.const_var.UpdatedPriceData.surcharge_taxable!=undefined){if(_reducer.const_var.UpdatedPriceData.surcharge_taxable==1){CalculatesurchargeFees=parseFloat(CalculatesurchargeFees);post_data['building'].surcharge_taxable=_reducer.const_var.UpdatedPriceData.surcharge_taxable;post_data['building'].surcharge_amount=CalculatesurchargeFees;_reducer.const_var.BuildingPriceArrar['surcharge_amount']=parseFloat(post_data['building'].surcharge_amount);post_data['building'].order_total=parseFloat(post_data['building'].order_total)+parseFloat(post_data['building'].surcharge_amount);_reducer.const_var.BuildingPriceArrar['order_total']=parseFloat(_reducer.const_var.BuildingPriceArrar['order_total'])+parseFloat(post_data['building'].surcharge_amount);}}}}post_data['building'].sub_order_total=parseFloat(post_data['building'].order_total);_reducer.const_var.BuildingPriceArrar['sub_order_total']=parseFloat(post_data['building'].order_total);// if(const_var.order_extra_items['surchargeFees']==undefined)
// {
//     const_var.order_extra_items['surchargeFees'] = 0;
// }
// post_data['building'].surcharge_amount = const_var.order_extra_items['surchargeFees']; 
if(_reducer.const_var.UpdatedPriceData.discount_rate_Updated==undefined){if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][_reducer.params.m_s_n]!=undefined&&_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][_reducer.params.m_s_n].length>0&&_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][_reducer.params.m_s_n].manufacturer_discount!=''){for(var i=0;i<_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][_reducer.params.m_s_n].length;i++){if(post_data['building'].order_total>=parseInt(_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][_reducer.params.m_s_n][i].from)&&post_data['building'].order_total<=parseInt(_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][_reducer.params.m_s_n][i].to)){var percentage=_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][_reducer.params.m_s_n][i].manufacturer_discount;post_data['building'].discount_rate=percentage;post_data['building'].discount_type=_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][_reducer.params.m_s_n][i].manufacturer_discount_in=="%"?"per":'amt';_reducer.const_var.UpdatedPriceData.discount_type=post_data['building'].discount_type;post_data['building'].discount_amount=post_data['building'].discount_type=="per"?(post_data['building'].order_total*percentage/100).toFixed(2):percentage;//post_data['building'].order_total = post_data['building'].order_total - post_data['building'].discount_amount;
_reducer.const_var.BuildingPriceArrar['sub_order_total']=_reducer.const_var.BuildingPriceArrar['order_total']-post_data['building'].discount_amount;_reducer.const_var.BuildingPriceArrar['discount_order_total']=parseFloat(post_data['building'].discount_amount);post_data['building'].sub_order_total=post_data['building'].sub_order_total-post_data['building'].discount_amount;}else{if(post_data['building'].order_total>parseInt(_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][_reducer.params.m_s_n][i].from)&&post_data['building'].order_total>parseInt(_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][_reducer.params.m_s_n][i].to)){var _percentage6=0;post_data['building'].discount_rate=_percentage6;post_data['building'].discount_type=_reducer.const_var.UpdatedPriceData.discount_type!=undefined?_reducer.const_var.UpdatedPriceData.discount_type:"per";post_data['building'].discount_amount=post_data['building'].discount_type=="per"?(post_data['building'].order_total*_percentage6/100).toFixed(2):_percentage6;//post_data['building'].order_total = post_data['building'].order_total - post_data['building'].discount_amount;
_reducer.const_var.BuildingPriceArrar['sub_order_total']=_reducer.const_var.BuildingPriceArrar['order_total']-post_data['building'].discount_amount;_reducer.const_var.BuildingPriceArrar['discount_order_total']=parseFloat(post_data['building'].discount_amount);post_data['building'].sub_order_total=post_data['building'].sub_order_total-post_data['building'].discount_amount;}}}}else{var _percentage7=0;post_data['building'].discount_rate=_percentage7;post_data['building'].discount_type=_reducer.const_var.UpdatedPriceData.discount_type!=undefined?_reducer.const_var.UpdatedPriceData.discount_type:"per";post_data['building'].discount_amount=post_data['building'].discount_type=="per"?(post_data['building'].order_total*_percentage7/100).toFixed(2):_percentage7;//post_data['building'].order_total = post_data['building'].order_total - post_data['building'].discount_amount;
_reducer.const_var.BuildingPriceArrar['sub_order_total']=_reducer.const_var.BuildingPriceArrar['order_total']-post_data['building'].discount_amount;_reducer.const_var.BuildingPriceArrar['discount_order_total']=parseFloat(post_data['building'].discount_amount);post_data['building'].sub_order_total=post_data['building'].sub_order_total-post_data['building'].discount_amount;}}else{post_data['building'].discount_rate=_reducer.const_var.UpdatedPriceData.discount_rate;post_data['building'].discount_rate_Updated=_reducer.const_var.UpdatedPriceData.discount_rate;post_data['building'].discount_type=_reducer.const_var.UpdatedPriceData.discount_type!=undefined?_reducer.const_var.UpdatedPriceData.discount_type:"per";post_data['building'].discount_amount=post_data['building'].discount_type=="per"?(post_data['building'].order_total*_reducer.const_var.UpdatedPriceData.discount_rate/100).toFixed(2):_reducer.const_var.UpdatedPriceData.discount_rate;//post_data['building'].order_total = post_data['building'].order_total - post_data['building'].discount_amount;
_reducer.const_var.BuildingPriceArrar['sub_order_total']=_reducer.const_var.BuildingPriceArrar['order_total']-post_data['building'].discount_amount;_reducer.const_var.BuildingPriceArrar['discount_order_total']=parseFloat(post_data['building'].discount_amount);post_data['building'].sub_order_total=_reducer.const_var.BuildingPriceArrar['order_total']-post_data['building'].discount_amount;}_reducer.const_var.BuildingPriceArrar['new_sub_order_total']=0;// console.log(const_var.stateManufacturerAcordingAPIDiscount['commissions'][params.m_s_n],"const_var.stateManufacturerAcordingAPIDiscount['commissions'][params.m_s_n]",t_c)
if(_reducer.const_var.UpdatedPriceData.down_payment_rate_Updated==undefined){var calVar=10;if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['commissions'][_reducer.params.m_s_n]!=undefined&&_reducer.const_var.stateManufacturerAcordingAPIDiscount['commissions'][_reducer.params.m_s_n].length>0){for(var i=0;i<_reducer.const_var.stateManufacturerAcordingAPIDiscount['commissions'][_reducer.params.m_s_n].length;i++){if(post_data['building'].order_total>=parseInt(_reducer.const_var.stateManufacturerAcordingAPIDiscount['commissions'][_reducer.params.m_s_n][i].from)&&post_data['building'].order_total<=parseInt(_reducer.const_var.stateManufacturerAcordingAPIDiscount['commissions'][_reducer.params.m_s_n][i].to)){calVar=_reducer.const_var.stateManufacturerAcordingAPIDiscount['commissions'][_reducer.params.m_s_n][i].percentage;_reducer.const_var.downPersentage=_reducer.const_var.stateManufacturerAcordingAPIDiscount['commissions'][_reducer.params.m_s_n][i].percentage;post_data['building'].down_payment_total=(post_data['building'].sub_order_total*_reducer.const_var.downPersentage/100).toFixed(2);post_data['building'].down_payment_rate=_reducer.const_var.downPersentage;post_data['building'].down_payment_type="per";post_data['building'].down_payment_discount_type=_reducer.const_var.UpdatedPriceData.down_payment_discount_type!=undefined?_reducer.const_var.UpdatedPriceData.down_payment_discount_type:"per";post_data['building'].discount_type=_reducer.const_var.UpdatedPriceData.discount_type!=undefined?_reducer.const_var.UpdatedPriceData.discount_type:"per";post_data['building'].dealer_deposit=post_data['building'].sub_order_total*_reducer.const_var.downPersentage/100;_reducer.const_var.BuildingPriceArrar['down_payment_total']=parseFloat(_reducer.const_var.BuildingPriceArrar['sub_order_total'])*parseFloat(_reducer.const_var.downPersentage)/100;_reducer.const_var.BuildingPriceArrar['dealer_deposit']=parseFloat(_reducer.const_var.BuildingPriceArrar['sub_order_total'])*parseFloat(_reducer.const_var.downPersentage)/100;_reducer.const_var.BuildingPriceArrar['new_sub_order_total']=parseFloat(_reducer.const_var.BuildingPriceArrar['sub_order_total'])-parseFloat(_reducer.const_var.BuildingPriceArrar['down_payment_total']);}else{_reducer.const_var.downPersentage=calVar;post_data['building'].down_payment_total=(post_data['building'].sub_order_total*_reducer.const_var.downPersentage/100).toFixed(2);post_data['building'].down_payment_rate=_reducer.const_var.downPersentage;post_data['building'].down_payment_type="per";post_data['building'].down_payment_discount_type=_reducer.const_var.UpdatedPriceData.down_payment_discount_type!=undefined?_reducer.const_var.UpdatedPriceData.down_payment_discount_type:"per";post_data['building'].discount_type=_reducer.const_var.UpdatedPriceData.discount_type!=undefined?_reducer.const_var.UpdatedPriceData.discount_type:"per";post_data['building'].dealer_deposit=post_data['building'].sub_order_total*_reducer.const_var.downPersentage/100;_reducer.const_var.BuildingPriceArrar['down_payment_total']=parseFloat(_reducer.const_var.BuildingPriceArrar['sub_order_total'])*parseFloat(_reducer.const_var.downPersentage)/100;_reducer.const_var.BuildingPriceArrar['dealer_deposit']=parseFloat(_reducer.const_var.BuildingPriceArrar['sub_order_total'])*parseFloat(_reducer.const_var.downPersentage)/100;_reducer.const_var.BuildingPriceArrar['new_sub_order_total']=parseFloat(_reducer.const_var.BuildingPriceArrar['sub_order_total'])-parseFloat(_reducer.const_var.BuildingPriceArrar['down_payment_total']);}}}else{_reducer.const_var.downPersentage=10;post_data['building'].down_payment_total=(post_data['building'].sub_order_total*_reducer.const_var.downPersentage/100).toFixed(2);post_data['building'].down_payment_rate=_reducer.const_var.downPersentage;post_data['building'].down_payment_type="per";post_data['building'].down_payment_discount_type=_reducer.const_var.UpdatedPriceData.down_payment_discount_type!=undefined?_reducer.const_var.UpdatedPriceData.down_payment_discount_type:"per";post_data['building'].discount_type=_reducer.const_var.UpdatedPriceData.discount_type!=undefined?_reducer.const_var.UpdatedPriceData.discount_type:"per";post_data['building'].dealer_deposit=post_data['building'].sub_order_total*_reducer.const_var.downPersentage/100;_reducer.const_var.BuildingPriceArrar['down_payment_total']=parseFloat(_reducer.const_var.BuildingPriceArrar['sub_order_total'])*parseFloat(_reducer.const_var.downPersentage)/100;_reducer.const_var.BuildingPriceArrar['dealer_deposit']=parseFloat(_reducer.const_var.BuildingPriceArrar['sub_order_total'])*parseFloat(_reducer.const_var.downPersentage)/100;_reducer.const_var.BuildingPriceArrar['new_sub_order_total']=parseFloat(_reducer.const_var.BuildingPriceArrar['sub_order_total'])-parseFloat(_reducer.const_var.BuildingPriceArrar['down_payment_total']);}}else{post_data['building'].down_payment_total=_reducer.const_var.UpdatedPriceData.down_payment_type=="amt"?_reducer.const_var.UpdatedPriceData.down_payment_rate:(post_data['building'].sub_order_total*_reducer.const_var.UpdatedPriceData.down_payment_rate/100).toFixed(2);post_data['building'].down_payment_rate=_reducer.const_var.UpdatedPriceData.down_payment_rate;post_data['building'].down_payment_rate_Updated=_reducer.const_var.UpdatedPriceData.down_payment_rate;post_data['building'].down_payment_type=_reducer.const_var.UpdatedPriceData.down_payment_type;post_data['building'].dealer_deposit=_reducer.const_var.UpdatedPriceData.down_payment_type=="amt"?_reducer.const_var.UpdatedPriceData.down_payment_rate:post_data['building'].sub_order_total*_reducer.const_var.UpdatedPriceData.down_payment_rate/100;_reducer.const_var.BuildingPriceArrar['down_payment_total']=_reducer.const_var.UpdatedPriceData.down_payment_type=="amt"?parseFloat(_reducer.const_var.UpdatedPriceData.down_payment_rate):parseFloat(_reducer.const_var.BuildingPriceArrar['sub_order_total'])*parseFloat(_reducer.const_var.UpdatedPriceData.down_payment_rate)/100;_reducer.const_var.BuildingPriceArrar['dealer_deposit']=_reducer.const_var.UpdatedPriceData.down_payment_type=="amt"?parseFloat(_reducer.const_var.UpdatedPriceData.down_payment_rate):parseFloat(_reducer.const_var.BuildingPriceArrar['sub_order_total'])*parseFloat(_reducer.const_var.UpdatedPriceData.down_payment_rate)/100;_reducer.const_var.BuildingPriceArrar['new_sub_order_total']=parseFloat(_reducer.const_var.BuildingPriceArrar['sub_order_total'])-parseFloat(_reducer.const_var.BuildingPriceArrar['down_payment_total']);}// console.log(const_var.stateManufacturerAcordingAPIDiscount,"const_var.stateManufacturerAcordingAPIDiscount['commissions'][params.m_s_n]",t_c)
_reducer.const_var.BuildingPriceArrar['new_down_payment_total']=parseFloat(post_data['building'].down_payment_total);if(_reducer.const_var.UpdatedPriceData.down_payment_discount_rate_Updated==undefined){if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][_reducer.params.m_s_n]!=undefined&&_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][_reducer.params.m_s_n].length>0&&_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][_reducer.params.m_s_n].dealer_discount!=''){for(var i=0;i<_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][_reducer.params.m_s_n].length;i++){if(post_data['building'].order_total>=parseInt(_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][_reducer.params.m_s_n][i].from)&&post_data['building'].order_total<=parseInt(_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][_reducer.params.m_s_n][i].to)){var _percentage8=_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][_reducer.params.m_s_n][i].dealer_discount;post_data['building'].down_payment_discount_rate=_percentage8;post_data['building'].down_payment_discount_type=_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][_reducer.params.m_s_n][i].dealer_discount_in=="%"?"per":'amt';_reducer.const_var.UpdatedPriceData.down_payment_discount_type=post_data['building'].down_payment_discount_type;post_data['building'].down_payment_discount_total=post_data['building'].down_payment_discount_type=="amt"?parseFloat(_percentage8):(parseFloat(post_data['building'].down_payment_total)*parseFloat(_percentage8)/100).toFixed(2);_reducer.const_var.BuildingPriceArrar['down_payment_discount_total']=post_data['building'].down_payment_discount_type=="amt"?parseFloat(_percentage8):parseFloat(parseFloat(_reducer.const_var.BuildingPriceArrar['down_payment_total'])*parseFloat(_percentage8))/100;_reducer.const_var.BuildingPriceArrar['new_down_payment_total']=parseFloat(_reducer.const_var.BuildingPriceArrar['down_payment_total'])-parseFloat(_reducer.const_var.BuildingPriceArrar['down_payment_discount_total']);//post_data['building'].down_payment_total = (parseInt(post_data['building'].down_payment_total) - parseInt(post_data['building'].down_payment_discount_total));
//post_data['building'].order_total = post_data['building'].order_total - post_data['building'].down_payment_discount_total;
}else{if(post_data['building'].order_total>parseInt(_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][_reducer.params.m_s_n][i].from)&&post_data['building'].order_total>parseInt(_reducer.const_var.stateManufacturerAcordingAPIDiscount['discount'][_reducer.params.m_s_n][i].to)){var _percentage9=0;post_data['building'].down_payment_discount_rate=_percentage9;post_data['building'].down_payment_discount_type=_reducer.const_var.UpdatedPriceData.down_payment_discount_type!=undefined?_reducer.const_var.UpdatedPriceData.down_payment_discount_type:"per";post_data['building'].down_payment_discount_total=post_data['building'].down_payment_discount_type=="amt"?parseFloat(_percentage9):(parseFloat(post_data['building'].down_payment_total)*parseFloat(_percentage9)/100).toFixed(2);_reducer.const_var.BuildingPriceArrar['down_payment_discount_total']=post_data['building'].down_payment_discount_type=="amt"?parseFloat(_percentage9):parseFloat(parseFloat(_reducer.const_var.BuildingPriceArrar['down_payment_total'])*parseFloat(_percentage9))/100;_reducer.const_var.BuildingPriceArrar['new_down_payment_total']=parseFloat(_reducer.const_var.BuildingPriceArrar['down_payment_total'])-parseFloat(_reducer.const_var.BuildingPriceArrar['down_payment_discount_total']);}}}}else{var _percentage10=0;post_data['building'].down_payment_discount_rate=_percentage10;post_data['building'].down_payment_discount_type=_reducer.const_var.UpdatedPriceData.down_payment_discount_type!=undefined?_reducer.const_var.UpdatedPriceData.down_payment_discount_type:"per";post_data['building'].down_payment_discount_total=post_data['building'].down_payment_discount_type=="amt"?parseFloat(_percentage10):(parseFloat(post_data['building'].down_payment_total)*parseFloat(_percentage10)/100).toFixed(2);_reducer.const_var.BuildingPriceArrar['down_payment_discount_total']=post_data['building'].down_payment_discount_type=="amt"?parseFloat(_percentage10):parseFloat(parseFloat(_reducer.const_var.BuildingPriceArrar['down_payment_total'])*parseFloat(_percentage10))/100;_reducer.const_var.BuildingPriceArrar['new_down_payment_total']=parseFloat(_reducer.const_var.BuildingPriceArrar['down_payment_total'])-parseFloat(_reducer.const_var.BuildingPriceArrar['down_payment_discount_total']);}}else{if(_reducer.const_var.UpdatedPriceData.down_payment_discount_type==undefined){post_data['building'].down_payment_discount_type="per";}post_data['building'].down_payment_discount_total=_reducer.const_var.UpdatedPriceData.down_payment_discount_type=="amt"?_reducer.const_var.UpdatedPriceData.down_payment_discount_rate:(parseFloat(post_data['building'].down_payment_total)*parseFloat(_reducer.const_var.UpdatedPriceData.down_payment_discount_rate)/100).toFixed(2);post_data['building'].down_payment_discount_rate=_reducer.const_var.UpdatedPriceData.down_payment_discount_rate;post_data['building'].down_payment_discount_rate_Updated=_reducer.const_var.UpdatedPriceData.down_payment_discount_rate;post_data['building'].down_payment_discount_type=_reducer.const_var.UpdatedPriceData.down_payment_discount_type;_reducer.const_var.BuildingPriceArrar['down_payment_discount_total']=post_data['building'].down_payment_discount_type=="amt"?parseFloat(_reducer.const_var.UpdatedPriceData.down_payment_discount_rate):parseFloat(parseFloat(_reducer.const_var.BuildingPriceArrar['down_payment_total'])*parseFloat(_reducer.const_var.UpdatedPriceData.down_payment_discount_rate))/100;_reducer.const_var.BuildingPriceArrar['new_down_payment_total']=parseFloat(_reducer.const_var.BuildingPriceArrar['down_payment_total'])-parseFloat(_reducer.const_var.BuildingPriceArrar['down_payment_discount_total']);//post_data['building'].down_payment_total = (parseInt(post_data['building'].down_payment_total) - parseInt(post_data['building'].down_payment_discount_total));
//post_data['building'].order_total = post_data['building'].order_total - post_data['building'].down_payment_discount_total;
}if(post_data['building'].discount_type==undefined){post_data['building'].discount_type=_reducer.const_var.UpdatedPriceData.discount_type!=undefined?_reducer.const_var.UpdatedPriceData.discount_type:"per";}if(post_data['building'].down_payment_discount_type==undefined){post_data['building'].down_payment_discount_type=_reducer.const_var.UpdatedPriceData.down_payment_discount_type!=undefined?_reducer.const_var.UpdatedPriceData.down_payment_discount_type:"per";}if(_reducer.const_var.tax.type=="%"){_reducer.const_var.tax.type="per";}if(_reducer.const_var.tax.type=="$"){_reducer.const_var.tax.type="amt";}post_data['building'].grand_total=parseFloat(post_data['building'].order_total);// console.log(const_var.BuildingPriceArrar['order_total'],"post_data['building'].order_total", post_data['building'].order_total)
// if(post_data['building'].down_payment_discount_total!=undefined && post_data['building'].down_payment_discount_total!=0)
// {
//     post_data['building'].grand_total = parseInt(post_data['building'].grand_total) - parseInt(post_data['building'].down_payment_discount_total);
// }
var newTaxArray=[];var taxCalculation=0;if(_reducer.const_var.tax.percentage!=0&&_reducer.const_var.tax.percentage!=undefined){taxCalculation=_reducer.const_var.tax.type=="per"?(taxCalculation+post_data['building'].sub_order_total*_reducer.const_var.tax.percentage/100).toFixed(2):parseFloat(taxCalculation+_reducer.const_var.tax.percentage);_reducer.const_var.tax.amount=taxCalculation;_reducer.const_var.tax.name=_reducer.const_var.tax.name==""||_reducer.const_var.tax.name==undefined?'sales_tax':_reducer.const_var.tax.name;//newTaxArray[const_var.MoreTaxinputs.length] = const_var.tax;
post_data['building'].parentTax=_reducer.const_var.tax;_reducer.const_var.sendTaxarray.push(_reducer.const_var.tax);//const_var.newTaxCalcuArray[const_var.tax.name] = const_var.tax.amount;
// const_var.newTaxCalcuArray.push(const_var.tax);
}var moretaxCalculation=0;if(_reducer.const_var.MoreTaxinputs!=undefined&&_reducer.const_var.MoreTaxinputs.length>0){_reducer.const_var.MoreTaxinputs.map(function(val,index){_reducer.const_var.MoreTaxinputs[index].amount=val.type=="per"?(post_data['building'].sub_order_total*val.percentage/100).toFixed(2):val.percentage;//post_data['building'].tax_amount = moretaxCalculation;
_reducer.const_var.MoreTaxinputs[index].more_tax_amount=val.type=="per"?(post_data['building'].sub_order_total*val.percentage/100).toFixed(2):val.percentage;moretaxCalculation=parseFloat(moretaxCalculation)+parseFloat(_reducer.const_var.MoreTaxinputs[index].amount);_reducer.const_var.MoreTaxinputs[index].name=_reducer.const_var.MoreTaxinputs[index].name==""||_reducer.const_var.MoreTaxinputs[index].name==undefined?"sales_tax":_reducer.const_var.MoreTaxinputs[index].name;_reducer.const_var.sendTaxarray.push(_reducer.const_var.MoreTaxinputs[index]);});post_data['building'].MoreTaxinputs=_reducer.const_var.MoreTaxinputs;//const_var.newTaxCalcuArray.push(const_var.MoreTaxinputs);
}post_data['building'].all_tax_amount=_reducer.const_var.tax.type=="per"?parseFloat(taxCalculation)+parseFloat(moretaxCalculation):parseFloat(taxCalculation)+parseFloat(moretaxCalculation);//console.log(const_var.newTaxCalcuArray,"const_var.newTaxCalcuArray")
post_data['building'].tax_amount=_reducer.const_var.tax.type=="per"?parseFloat(taxCalculation):parseFloat(taxCalculation);post_data['building'].tax_zipcode=_reducer.params.tax_zipcode;post_data['building'].tax_exempt=_reducer.params.tax_exempt==false?0:1;post_data['building'].tax=_reducer.const_var.sendTaxarray;//{...newTaxArray,...const_var.MoreTaxinputs};
post_data['building'].grand_total=post_data['building'].grand_total+parseFloat(taxCalculation)+parseFloat(moretaxCalculation);_reducer.const_var.BuildingPriceArrar['additional_charges']=0;if(_reducer.const_var.card_processing_fee!=undefined&&Object.keys(_reducer.const_var.card_processing_fee).length>0&&_reducer.const_var.card_processing_fee.is_edit==undefined&&_reducer.const_var.crmSetting.is_Edit!=true){if(_reducer.const_var.card_processing_fee.percentage_of=="base_price"){if(_reducer.const_var.card_processing_fee.type=="%"){_reducer.const_var.order_extra_items['processing_fee']=(post_data['building'].roof_style_price*_reducer.const_var.card_processing_fee.fee/100).toFixed(2);}else{_reducer.const_var.order_extra_items['processing_fee']=parseFloat(_reducer.const_var.card_processing_fee.fee).toFixed(2);}}if(_reducer.const_var.card_processing_fee.percentage_of=="building_amount"){if(_reducer.const_var.card_processing_fee.type=="%"){_reducer.const_var.order_extra_items['processing_fee']=(post_data['building'].order_total*_reducer.const_var.card_processing_fee.fee/100).toFixed(2);}else{_reducer.const_var.order_extra_items['processing_fee']=parseFloat(_reducer.const_var.card_processing_fee.fee).toFixed(2);}}if(_reducer.const_var.card_processing_fee.percentage_of=="dealer_deposit"){if(_reducer.const_var.card_processing_fee.type=="%"){_reducer.const_var.order_extra_items['processing_fee']=(post_data['building'].dealer_deposit*_reducer.const_var.card_processing_fee.fee/100).toFixed(2);}else{_reducer.const_var.order_extra_items['processing_fee']=parseFloat(_reducer.const_var.card_processing_fee.fee).toFixed(2);}}}if(_reducer.const_var.order_extra_items!=undefined){post_data['building'].grand_total=parseFloat(post_data['building'].grand_total)+parseFloat(_reducer.const_var.order_extra_items['equipment_rental']);post_data['building'].grand_total=parseFloat(post_data['building'].grand_total)+parseFloat(_reducer.const_var.order_extra_items['document_fee']);post_data['building'].grand_total=parseFloat(post_data['building'].grand_total)+parseFloat(_reducer.const_var.order_extra_items['order_processing_fee']);post_data['building'].grand_total=parseFloat(post_data['building'].grand_total)+parseFloat(_reducer.const_var.order_extra_items['delivery_fee']);post_data['building'].grand_total=parseFloat(post_data['building'].grand_total)+parseFloat(_reducer.const_var.order_extra_items['engineer_drawings']);post_data['building'].grand_total=parseFloat(post_data['building'].grand_total)+parseFloat(_reducer.const_var.order_extra_items['freight']);post_data['building'].grand_total=parseFloat(post_data['building'].grand_total)+parseFloat(_reducer.const_var.order_extra_items['extra_labour']);post_data['building'].grand_total=parseFloat(post_data['building'].grand_total)+parseFloat(_reducer.const_var.order_extra_items['grvy_value']);post_data['building'].grand_total=parseFloat(post_data['building'].grand_total)+parseFloat(_reducer.const_var.order_extra_items['concrete_work']);post_data['building'].grand_total=parseFloat(post_data['building'].grand_total)+parseFloat(_reducer.const_var.order_extra_items['ground_work']);post_data['building'].grvy_value=parseFloat(_reducer.const_var.order_extra_items['grvy_value']);_reducer.const_var.order_extra_items['order_processing_fee']=_reducer.const_var.order_extra_items['order_processing_fee']==undefined?0:_reducer.const_var.order_extra_items['order_processing_fee'];_reducer.const_var.BuildingPriceArrar['grvy_value']=post_data['building'].grvy_value;_reducer.const_var.BuildingPriceArrar['additional_charges']=parseFloat(_reducer.const_var.BuildingPriceArrar['additional_charges'])+parseFloat(_reducer.const_var.order_extra_items['equipment_rental'])+parseFloat(_reducer.const_var.order_extra_items['concrete_work'])+parseFloat(_reducer.const_var.order_extra_items['ground_work'])+parseFloat(_reducer.const_var.order_extra_items['document_fee'])+parseFloat(_reducer.const_var.order_extra_items['order_processing_fee'])+parseFloat(_reducer.const_var.order_extra_items['delivery_fee'])+parseFloat(_reducer.const_var.order_extra_items['engineer_drawings'])+parseFloat(_reducer.const_var.order_extra_items['freight'])+parseFloat(_reducer.const_var.order_extra_items['extra_labour']);if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge']!=undefined&&_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n]!=undefined&&Object.keys(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n]).length>0){if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n].taxable==0&&_reducer.const_var.crmSetting.is_Edit==false){if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n].is_edit==undefined){_reducer.const_var.order_extra_items['surchargeFees']=0;if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n].amount_type=='per'){if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n].percentage_of=="building_amount"){CalculatesurchargeFees=parseFloat(parseFloat(_reducer.const_var.BuildingPriceArrar['order_total'])*parseFloat(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n].amount)/100).toFixed(2);}else{if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n].percentage_of=="basic_price"){CalculatesurchargeFees=parseFloat((parseFloat(post_data['building'].roof_style_price)+parseFloat(leantoPriceCalculation.totalBasePrice))*parseFloat(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n].amount)/100).toFixed(2);}else{CalculatesurchargeFees=parseFloat(parseFloat(_reducer.const_var.BuildingPriceArrar['sub_order_total'])*parseFloat(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n].amount)/100).toFixed(2);}//console.log(CalculatesurchargeFees,"CalculatesurchargeFees",const_var.stateManufacturerAcordingAPIDiscount['surcharge'][params.m_s_n].amount,const_var.BuildingPriceArrar['sub_order_total']);
}}else{CalculatesurchargeFees=parseFloat(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n].amount);}}else{CalculatesurchargeFees=CalculatesurchargeFees;}post_data['building'].surcharge_taxable=_reducer.const_var.UpdatedPriceData.surcharge_taxable==undefined?_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n].taxable:_reducer.const_var.UpdatedPriceData.surcharge_taxable;post_data['building'].surcharge_amount=CalculatesurchargeFees;post_data['building'].grand_total=parseFloat(post_data['building'].grand_total)+parseFloat(CalculatesurchargeFees);_reducer.const_var.BuildingPriceArrar['additional_charges']=parseFloat(_reducer.const_var.BuildingPriceArrar['additional_charges'])+parseFloat(CalculatesurchargeFees);if(_reducer.const_var.order_extra_items['surchargeFees']==0){_reducer.const_var.order_extra_items['surchargeFees']=parseFloat(CalculatesurchargeFees);}}else{if(_reducer.const_var.crmSetting.is_Edit==true&&_reducer.const_var.UpdatedPriceData.surcharge_taxable!=undefined){if(_reducer.const_var.UpdatedPriceData.surcharge_taxable==0){CalculatesurchargeFees=parseFloat(CalculatesurchargeFees);post_data['building'].surcharge_taxable=_reducer.const_var.UpdatedPriceData.surcharge_taxable;post_data['building'].surcharge_amount=parseFloat(CalculatesurchargeFees);post_data['building'].grand_total=parseFloat(post_data['building'].grand_total)+parseFloat(CalculatesurchargeFees);_reducer.const_var.BuildingPriceArrar['surcharge_amount']=0;_reducer.const_var.BuildingPriceArrar['additional_charges']=parseFloat(_reducer.const_var.BuildingPriceArrar['additional_charges'])+parseFloat(CalculatesurchargeFees);}}}}if(_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge']!=undefined&&_reducer.const_var.stateManufacturerAcordingAPIDiscount['surcharge'][_reducer.params.m_s_n]==undefined){CalculatesurchargeFees=parseFloat(CalculatesurchargeFees);post_data['building'].surcharge_taxable=0;post_data['building'].surcharge_amount=CalculatesurchargeFees;post_data['building'].grand_total=parseFloat(post_data['building'].grand_total)+parseFloat(CalculatesurchargeFees);_reducer.const_var.BuildingPriceArrar['additional_charges']=parseFloat(_reducer.const_var.BuildingPriceArrar['additional_charges'])+parseFloat(CalculatesurchargeFees);}if(_reducer.const_var.order_extra_items['dont_show_processing_fee_pdf']!=undefined&&_reducer.const_var.order_extra_items['dont_show_processing_fee_pdf']=="1"){_reducer.const_var.BuildingPriceArrar['new_down_payment_total']=_reducer.const_var.BuildingPriceArrar['new_down_payment_total']+parseFloat(_reducer.const_var.order_extra_items['processing_fee']);_reducer.const_var.BuildingPriceArrar['new_sub_order_total']=_reducer.const_var.BuildingPriceArrar['new_sub_order_total']+parseFloat(_reducer.const_var.order_extra_items['processing_fee']);_reducer.const_var.BuildingPriceArrar['processing_fee']=parseFloat(_reducer.const_var.order_extra_items['processing_fee']);post_data['building'].grand_total=parseFloat(post_data['building'].grand_total)+parseFloat(_reducer.const_var.order_extra_items['processing_fee']);}if(post_data['building'].discount_amount!=undefined&&post_data['building'].discount_amount!=0){post_data['building'].has_grvy=1;}else{post_data['building'].has_grvy=0;}_reducer.const_var.BuildingPriceArrar['has_grvy']=post_data['building'].has_grvy;_reducer.const_var.order_extra_items.has_grvy=post_data['building'].has_grvy;post_data['building'].order_extra_items=_reducer.const_var.order_extra_items;}post_data['building'].payment_mode=_reducer.const_var.paymentOptionObj[_reducer.params.paymentmode];// console.log(const_var.paymentOptionObj[params.paymentmode],"const_var.paymentOptionObj[params.paymentmode]",params.paymentmode)
post_data['building'].due_upon_installation=parseFloat(_reducer.const_var.BuildingPriceArrar['new_sub_order_total'])+parseFloat(_reducer.const_var.BuildingPriceArrar['additional_charges'])+parseFloat(post_data['building'].all_tax_amount);_reducer.const_var.BuildingPriceArrar['grand_total']=post_data['building'].grand_total+post_data['building'].tax_amount;post_data['building'].grand_total=post_data['building'].due_upon_installation+_reducer.const_var.BuildingPriceArrar['new_down_payment_total']+_reducer.const_var.BuildingPriceArrar['grvy_value'];post_data['building'].dealer_deposit=_reducer.const_var.BuildingPriceArrar['new_down_payment_total']+_reducer.const_var.BuildingPriceArrar['grvy_value'];post_data['building']['extra_items']=extra_items;post_data['building']['entry_points']=_reducer.const_var.entry_points;post_data['building']['hide_price_calculation']=_reducer.const_var.hide_price_calculation;_reducer.const_var.MainBuilingImage=_reducer.const_var.renderer.domElement.toDataURL("image/jpeg");var newJsonData={};newJsonData['building']=_objectSpread({},_reducer.const_var.order_extra_items,{},post_data['building']);newJsonData.building_total=t_c;_reducer.const_var.post_data=newJsonData;_reducer.const_var.UpdatedPriceData=post_data['building'];_reducer.const_var.UpdatedPriceData.elements=[];//const_var.post_data = const_var.order_extra_items
_reducer.const_var.post_data=_objectSpread({},_reducer.const_var.post_data,{},_reducer.const_var.LeadCustomerData);_reducer.const_var.post_data.custom_building=_reducer.const_var.b_o_J_1[_reducer.params.p_b_t]!="Custom Buildings"?0:1;// console.log(post_data['building'],"post_data['building']")
filtterArrayElements();for(var i=post_data['building'].extra_items.length-1;i>=0;i--){_reducer.const_var.UpdatedPriceData['elements'][post_data['building'].extra_items[i].item_name.toString()]=post_data['building'].extra_items[i];}//CpByPost();        
};exports.cP=cP;var filtterArrayElements=function filtterArrayElements(){var Leantoresult=[];if(_reducer.const_var.post_data.building!=undefined){Leantoresult=_reducer.const_var.UpdatedPriceData.leanto.filter(function(item,pos,self){return self.indexOf(item)==pos;});}_reducer.const_var.UpdatedPriceData.leanto=Leantoresult;};exports.filtterArrayElements=filtterArrayElements;var cPforFLeanOnly=function cPforFLeanOnly(data,objIndex,newDW){var t_c_b=0;var b={};// console.log(data,"datatatatat")
if(_reducer.params.add_front_lean==true){removeDataFromArray(3);if(newDW!=undefined){_reducer.const_var.UpdatedPriceData.leanto.push(newDW);}var UpdatePriceRecord=false;var frontLeanData="";b={"leanto_type":3,"width":_reducer.params.leanF_p_w,"height":_reducer.params.leanF_p_h,'length':_reducer.params.leanF_p_d,"leanto_drop":"","front_wall":ConvStr(_reducer.params.p_b_c_b_f_f),"back_wall":ConvStr(_reducer.params.p_b_c_b_f_b),"side_wall":ConvStr(_reducer.params.p_b_c_b_f_l),"front_wall_price":0,"back_wall_price":0,"side_wall_price":0,"front_wall_vertical":_reducer.params.p_v_w,"back_wall_vertical":_reducer.params.p_v_w,"side_wall_vertical":_reducer.params.p_v_w,"certificate":_reducer.const_var.makeCertificateArrayFront[_reducer.params.leanF_p_e_i]};//a.concat(b);
var data=data;var mapVal=_reducer.const_var.map[_reducer.params.p_r_s];var CalCulateRoofBasePrice=0;var CalCulateRoofEndClosePrice=0;var CalCulateRoofEndGablePrice=0;var CalCulateRoofUtilityEndPrice=0;if(_reducer.params.add_storage_check_front==true){data.side=data.side;data.panel=data.panel;}else{data.side=data.full_length_side!=undefined?data.full_length_side:data.side;data.panel=data.full_length_panel!=undefined?data.full_length_panel:data.panel;}if(_reducer.const_var.UpdatedPriceData.leanto.length>0){var leantoData=_reducer.const_var.UpdatedPriceData.leanto.filter(function(data){return data.leanto_type==3;});if(leantoData.length>0){UpdatePriceRecord=true;frontLeanData=leantoData[0];}}// console.log(const_var.UpdatedPriceData.front_lean_roof_style_price_changed,"const_var.UpdatedPriceData.front_lean_roof_style_price_changed",const_var.g_v)
for(var i=0;i<data.base.length;i++){if(_reducer.const_var.g_v==data.base[i].gauge){b.basic_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_roof_style_price_changed!=true?frontLeanData.basic_price:data.base[i][mapVal];t_c_b=parseFloat(t_c_b)+parseFloat(b.basic_price);CalCulateRoofBasePrice=b.basic_price;}}if(_reducer.params.add_left_front_lean_porch==true){b.porch={'type':'front','length':_reducer.params.lean_p_w+_reducer.params.leanF_p_d};}if(_reducer.params.add_right_front_lean_porch==true){b.porch={'type':'front','length':_reducer.params.leanR_p_w+_reducer.params.leanF_p_d};}if(_reducer.params.add_right_front_lean_porch==true&&_reducer.params.add_left_front_lean_porch==true){b.porch={'type':'front','length':_reducer.params.leanR_p_w+_reducer.params.lean_p_w+_reducer.params.leanF_p_d};}var heightFullData=data.full_length_side!=undefined&&data.full_length_side.length>0?data.full_length_side:undefined;if(_reducer.const_var.g_v==14){if(heightFullData[0].double_leg_baserail_cost!=0&&_reducer.params.p_e_l==true){b.height_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_height_price_changed!=true?frontLeanData.height_price:heightFullData[0].double_leg_baserail_cost!=0?heightFullData[0].double_leg_baserail_cost:heightFullData[0].leg_height_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}else{b.height_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_height_price_changed!=true?frontLeanData.height_price:heightFullData[0].leg_height_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}}if(_reducer.const_var.g_v==12){if(_reducer.params.p_e_l==true){if(heightFullData[0].double_leg_baserail_cost_12==0&&heightFullData[0].double_leg_baserail_cost==0){b.height_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_height_price_changed!=true?frontLeanData.height_price:heightFullData[0].double_leg_baserail_cost_12!=0?heightFullData[0].double_leg_baserail_cost_12:heightFullData[0].leg_height_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}else{b.height_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_height_price_changed!=true?frontLeanData.height_price:heightFullData[0].double_leg_baserail_cost_12!=0?heightFullData[0].double_leg_baserail_cost_12:heightFullData[0].double_leg_baserail_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}}else{b.height_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_height_price_changed!=true?frontLeanData.height_price:heightFullData[0].leg_height_cost_12!=0?heightFullData[0].leg_height_cost_12:heightFullData[0].leg_height_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}}// b.height_price = (UpdatePriceRecord==true && const_var.UpdatedPriceData.front_lean_height_price_changed!=true)?frontLeanData.height_price:(data.full_length_side!=undefined && data.full_length_side.length>0)?data.full_length_side[0].leg_height_cost:0;
// t_c_b = parseFloat(t_c_b) + parseFloat(b.height_price); 
if(_reducer.params.p_b_c_b_f_f=="Gable"){var ShowPrice="";if(_reducer.params.p_v_w==true){//t_c_b = t_c_b + (data.gable_end[0].vertical);
if(_reducer.params.leanF_p_e_i!=""&&_reducer.params.leanF_p_e_i!="other"&&_reducer.params.leanF_p_e_i!="0"&&_reducer.const_var.makeCertificateArrayFront[_reducer.params.leanF_p_e_i].certified==1){//t_c_b = ((data.gable_end[0].certified)==0)?parseFloat(t_c_b)+ (parseFloat(data.gable_end[0].uncertified) + parseFloat(data.gable_end[0].vertical)):(parseFloat(data.gable_end[0].vertical_certified)+parseFloat(data.gable_end[0].certified)) + parseFloat(t_c_b);
ShowPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_front_wall_price_changed!=true?frontLeanData.front_wall_price:data.gable_end[0].vertical_certified+data.gable_end[0].certified;}else{//t_c_b = parseFloat(t_c_b)+ (parseFloat(data.gable_end[0].uncertified) + parseFloat(data.gable_end[0].vertical));
ShowPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_front_wall_price_changed!=true?frontLeanData.front_wall_price:data.gable_end[0].uncertified+data.gable_end[0].vertical;}}else{if(_reducer.params.leanF_p_e_i!=""&&_reducer.params.leanF_p_e_i!="other"&&_reducer.params.leanF_p_e_i!="0"&&_reducer.const_var.makeCertificateArrayFront[_reducer.params.leanF_p_e_i].certified==1){//t_c_b = ((data.gable_end[0].certified)==0)?parseFloat(t_c_b)+ parseFloat((data.gable_end[0].uncertified)):parseFloat((data.gable_end[0].certified)) + parseFloat(t_c_b);
ShowPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_front_wall_price_changed!=true?frontLeanData.front_wall_price:data.gable_end[0].certified;}else{//t_c_b = parseFloat(t_c_b)+ parseFloat((data.gable_end[0].uncertified));
ShowPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_front_wall_price_changed!=true?frontLeanData.front_wall_price:data.gable_end[0].uncertified;}}b.front_wall_price=ShowPrice;//(params.p_v_w==true)?(data.gable_end[0].vertical):(data.gable_end[0].uncertified);
t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);CalCulateRoofEndGablePrice=b.front_wall_price;//b.back_wall_price = ShowPrice;//(params.p_v_w==true)?(data.gable_end[0].vertical):(data.gable_end[0].uncertified);
}if(_reducer.params.p_b_c_b_f_b=="Gable"&&_reducer.params.add_storage_check_front!=true){var ShowPrice="";if(_reducer.params.p_v_w==true){//t_c_b = t_c_b + (data.gable_end[0].vertical);
if(_reducer.params.leanF_p_e_i!=""&&_reducer.params.leanF_p_e_i!="other"&&_reducer.params.leanF_p_e_i!="0"&&_reducer.const_var.makeCertificateArrayFront[_reducer.params.leanF_p_e_i].certified==1){//t_c_b = ((data.gable_end[0].certified)==0)?parseFloat(t_c_b)+ (parseFloat(data.gable_end[0].uncertified) + parseFloat(data.gable_end[0].vertical)) :(parseFloat(data.gable_end[0].vertical_certified)+parseFloat(data.gable_end[0].certified)) + parseFloat(t_c_b);
ShowPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_back_wall_price_changed!=true?frontLeanData.back_wall_price:data.gable_end[0].vertical_certified+data.gable_end[0].certified;}else{//t_c_b = parseFloat(t_c_b)+ (parseFloat(data.gable_end[0].uncertified) + parseFloat(data.gable_end[0].vertical));
ShowPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_back_wall_price_changed!=true?frontLeanData.back_wall_price:data.gable_end[0].uncertified+data.gable_end[0].vertical;}}else{if(_reducer.params.leanF_p_e_i!=""&&_reducer.params.leanF_p_e_i!="other"&&_reducer.params.leanF_p_e_i!="0"&&_reducer.const_var.makeCertificateArrayFront[_reducer.params.leanF_p_e_i].certified==1){//t_c_b = ((data.gable_end[0].certified)==0)?parseFloat(t_c_b)+ parseFloat((data.gable_end[0].uncertified)):parseFloat((data.gable_end[0].certified)) + parseFloat(t_c_b);
ShowPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_back_wall_price_changed!=true?frontLeanData.back_wall_price:data.gable_end[0].certified;}else{//t_c_b = parseFloat(t_c_b)+ parseFloat((data.gable_end[0].uncertified));
ShowPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_back_wall_price_changed!=true?frontLeanData.back_wall_price:data.gable_end[0].uncertified;}}//b.front_wall_price = ShowPrice;//(params.p_v_w==true)?(data.gable_end[0].vertical):(data.gable_end[0].uncertified);
b.back_wall_price=ShowPrice;//(params.p_v_w==true)?(data.gable_end[0].vertical):(data.gable_end[0].uncertified);
t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);CalCulateRoofEndGablePrice=CalCulateRoofEndGablePrice+b.back_wall_price;}if(_reducer.params.p_b_c_b_f_f=="Half_Close"){b.front_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_front_wall_price_changed!=true?frontLeanData.front_wall_price:_reducer.params.p_v_w==true?(data.end[0].half_vertical_ends_cost+data.end[0].half_end_close_cost).toFixed(2):data.end[0].half_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);}if(_reducer.params.p_b_c_b_f_f=="One_Fourth_Close"){b.front_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_front_wall_price_changed!=true?frontLeanData.front_wall_price:_reducer.params.p_v_w==true?(data.end[0].one_fourth_vertical_ends_cost+data.end[0].one_fourth_end_close_cost).toFixed(2):data.end[0].one_fourth_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);}if(_reducer.params.p_b_c_b_f_f=="Three_Fourth_Close"){b.front_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_front_wall_price_changed!=true?frontLeanData.front_wall_price:_reducer.params.p_v_w==true?(data.end[0].three_fourth_vertical_ends_cost+data.end[0].three_fourth_end_close_cost).toFixed(2):data.end[0].three_fourth_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);}if(_reducer.params.p_b_c_b_f_f=="Close"){// console.log(params.p_b_c_b_f_f,"params.p_b_c_b_f_f");
b.front_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_front_wall_price_changed!=true?frontLeanData.front_wall_price:_reducer.params.p_v_w==true?data.end[0].vertical_ends_cost+data.end[0].end_close_cost:data.end[0].end_close_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);CalCulateRoofEndClosePrice=b.front_wall_price;//b.back_wall_price  = (params.p_v_w==true )?((data.end[0].vertical_ends_cost)) + (data.end[0].end_close_cost):(data.end[0].end_close_cost);
}// console.log(params.p_b_c_b_f_f,"params.p_b_c_b_f_f");
if(_reducer.params.p_b_c_b_f_b=="Half_Close"){b.back_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_back_wall_price_changed!=true?frontLeanData.back_wall_price:_reducer.params.p_v_w==true?(data.end[0].half_vertical_ends_cost+data.end[0].half_end_close_cost).toFixed(2):data.end[0].half_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);}if(_reducer.params.p_b_c_b_f_b=="One_Fourth_Close"){b.back_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_back_wall_price_changed!=true?frontLeanData.back_wall_price:_reducer.params.p_v_w==true?(data.end[0].one_fourth_vertical_ends_cost+data.end[0].one_fourth_end_close_cost).toFixed(2):data.end[0].one_fourth_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);}if(_reducer.params.p_b_c_b_f_b=="Three_Fourth_Close"){b.back_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_back_wall_price_changed!=true?frontLeanData.back_wall_price:_reducer.params.p_v_w==true?(data.end[0].three_fourth_vertical_ends_cost+data.end[0].three_fourth_end_close_cost).toFixed(2):data.end[0].three_fourth_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);}if(_reducer.params.p_b_c_b_f_b=="Close"&&_reducer.params.add_storage_check_front!=true){b.back_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_back_wall_price_changed!=true?frontLeanData.back_wall_price:_reducer.params.p_v_w==true?data.end[0].vertical_ends_cost+data.end[0].end_close_cost:data.end[0].end_close_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);CalCulateRoofEndClosePrice=CalCulateRoofEndClosePrice+b.back_wall_price;}if(_reducer.params.p_b_c_b_f_l=="Close"){b.side_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_left_wall_price_changed!=true?frontLeanData.side_wall_price:_reducer.params.p_v_w==true?data.side[0].vertical_side_cost+data.side[0].side_close_cost:data.side[0].side_close_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(_reducer.params.p_b_c_b_f_l=="Half_Close"){b.side_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_left_wall_price_changed!=true?frontLeanData.side_wall_price:_reducer.params.p_v_w==true?(data.side[0].half_vertical_side_cost+data.side[0].half_side_close_cost).toFixed(2):data.side[0].half_side_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(_reducer.params.p_b_c_b_f_l=="One_Fourth_Close"){b.side_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_left_wall_price_changed!=true?frontLeanData.side_wall_price:_reducer.params.p_v_w==true?(data.side[0].one_fourth_vertical_side_cost+data.side[0].one_fourth_side_close_cost).toFixed(2):data.side[0].one_fourth_side_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(_reducer.params.p_b_c_b_f_l=="Three_Fourth_Close"){b.side_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_left_wall_price_changed!=true?frontLeanData.side_wall_price:_reducer.params.p_v_w==true?(data.side[0].three_fourth_vertical_side_cost+data.side[0].three_fourth_side_close_cost).toFixed(2):data.side[0].three_fourth_side_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(_reducer.params.p_b_c_b_f_l!=="Close"&&_reducer.params.p_b_c_b_f_l!=="Open"&&_reducer.params.p_b_c_b_f_l!="Half_Close"&&_reducer.params.p_b_c_b_f_l!="One_Fourth_Close"&&_reducer.params.p_b_c_b_f_l!="Three_Fourth_Close"){b.side_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_left_wall_price_changed!=true?frontLeanData.side_wall_price:_reducer.params.p_v_w==true?data.panel[0].vertical_panel_cost*_reducer.params.p_b_c_b_f_l:data.panel[0].cost*_reducer.params.p_b_c_b_f_l;t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(_reducer.params.add_storage_check_front==true&&data.utility_side.length>0){b.utility_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_utility_price_changed!=true?frontLeanData.utility_price:_reducer.params.p_v_w==true?data.utility_side[0].vertical_side_cost*2+data.end[0].vertical_ends_cost*2+data.utility_side[0].side_close_cost*2+data.end[0].end_close_cost*2:data.utility_side[0].side_close_cost*2+data.end[0].end_close_cost*2;t_c_b=parseFloat(t_c_b)+parseFloat(b.utility_price);b.utility_length=_reducer.params.add_storage_front;b.has_utility=true;b.utility_vertical=_reducer.params.p_v_w?true:false;b.utility_on_centers=_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s]==undefined?5:_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s];CalCulateRoofUtilityEndPrice=_reducer.params.p_v_w==true?data.end[0].vertical_ends_cost*2+data.end[0].end_close_cost*2:data.end[0].end_close_cost*2;}if(_reducer.const_var.b_r_p_l_to_a.length>0&&_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pF]!=undefined){if(_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pF].cost_type=="%"){var splitVal=_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pF].percentage_of!=undefined&&_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pF].percentage_of!=0?_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pF].percentage_of.split(","):0;var splval=0;if(splitVal!=0){if(splitVal.includes("1")!=false){splval=splval+CalCulateRoofBasePrice;}if(splitVal.includes("2")!=false){splval=splval+CalCulateRoofEndClosePrice;}if(splitVal.includes("3")!=false){splval=splval+CalCulateRoofEndGablePrice;}if(CalCulateRoofUtilityEndPrice!=0){splval=splval+CalCulateRoofUtilityEndPrice;}}else{splval=splval+CalCulateRoofBasePrice;}var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_roof_pitch_price_changed!=true?frontLeanData.roof_pitch_price:_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pF]?splval*_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pF].cost/100:0;b.roof_pitch=_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pF].roof_pitch;b.roof_pitch_name=_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pF].roof_pitch;b.roof_pitch_price=finalCertPrice;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);}else{var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_roof_pitch_price_changed!=true?frontLeanData.roof_pitch_price:_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pF]?_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pF].cost:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.roof_pitch=_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pF].roof_pitch;b.roof_pitch_name=_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pF].roof_pitch;b.roof_pitch_price=finalCertPrice;}}else{b.roof_pitch="3/12";b.roof_pitch_name="3/12";b.roof_pitch_price=0;}if(_reducer.params.leanF_p_e_i!=""&&_reducer.params.leanF_p_e_i!="0"&&_reducer.params.leanF_p_e_i!="other"){if(_reducer.params.p_i_s=="1"){if(_reducer.const_var.makeCertificateArrayFront[_reducer.params.leanF_p_e_i].percentage_of_cost!=0){if(_reducer.const_var.makeCertificateArrayFront[_reducer.params.leanF_p_e_i].percentage_of!=undefined&&_reducer.const_var.makeCertificateArrayFront[_reducer.params.leanF_p_e_i].percentage_of=="building_amount"){var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_certificate_price_changed!=true?frontLeanData.certificate_price:_reducer.const_var.makeCertificateArrayFront[_reducer.params.leanF_p_e_i].percentage_of_cost?t_c_b*_reducer.const_var.makeCertificateArrayFront[_reducer.params.leanF_p_e_i].percentage_of_cost/100:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}else{var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_certificate_price_changed!=true?frontLeanData.certificate_price:_reducer.const_var.makeCertificateArrayFront[_reducer.params.leanF_p_e_i].percentage_of_cost?CalCulateRoofBasePrice*_reducer.const_var.makeCertificateArrayFront[_reducer.params.leanF_p_e_i].percentage_of_cost/100:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}}else{var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_certificate_price_changed!=true?frontLeanData.certificate_price:_reducer.const_var.makeCertificateArrayFront[_reducer.params.leanF_p_e_i].certification_concrete_cost?_reducer.const_var.makeCertificateArrayFront[_reducer.params.leanF_p_e_i].certification_concrete_cost:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}}else{if(_reducer.const_var.makeCertificateArrayFront[_reducer.params.leanF_p_e_i].percentage_of_cost!=0){if(_reducer.const_var.makeCertificateArrayFront[_reducer.params.leanF_p_e_i].percentage_of!=undefined&&_reducer.const_var.makeCertificateArrayFront[_reducer.params.leanF_p_e_i].percentage_of=="building_amount"){var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_certificate_price_changed!=true?frontLeanData.certificate_price:_reducer.const_var.makeCertificateArrayFront[_reducer.params.leanF_p_e_i].percentage_of_cost?t_c_b*_reducer.const_var.makeCertificateArrayFront[_reducer.params.leanF_p_e_i].percentage_of_cost/100:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}else{var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_certificate_price_changed!=true?frontLeanData.certificate_price:_reducer.const_var.makeCertificateArrayFront[_reducer.params.leanF_p_e_i].percentage_of_cost?CalCulateRoofBasePrice*_reducer.const_var.makeCertificateArrayFront[_reducer.params.leanF_p_e_i].percentage_of_cost/100:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}//console.log(b.certificate_price,"b.certificate_price",b.certificate_price * certVal);
}else{var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_certificate_price_changed!=true?frontLeanData.certificate_price:_reducer.const_var.makeCertificateArrayFront[_reducer.params.leanF_p_e_i].cost?_reducer.const_var.makeCertificateArrayFront[_reducer.params.leanF_p_e_i].cost:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}}}if(_reducer.params.leanF_p_e_i=="other"){b.certificate={'gauge':0,'certified':1,'has_double_leg':0,'has_ladder_leg':0,'has_other_leg':0,'height':0,'id':-1,'cost':0,'is_default':"no",'length':0,'map_id':0,'name':"Other"};b.certificate_other_name=_reducer.params.leanF_p_e_i_other!=''?_reducer.params.leanF_p_e_i_other:'Other';b.certificate_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.front_lean_certificate_price_changed!=true?frontLeanData.certificate_price:0;t_c_b=parseFloat(t_c_b)+parseFloat(b.certificate_price);}if(_reducer.params.continous_left_lean==true){b.continous_lean=true;}else{b.continous_lean=false;}b.pricing_data=data;b.t_c_b=parseFloat(t_c_b);_reducer.const_var.leanto.push(b);// console.log(const_var.leanto,"const_var.leanto")
_reducer.const_var.UpdatedPriceData.leanto.push(b);}else{removeDataFromArray(3);}cP(_reducer.const_var.a_p_d_a);};exports.cPforFLeanOnly=cPforFLeanOnly;var cPforBLeanOnly=function cPforBLeanOnly(data,objIndex,newDW){var t_c_b=0;var b={};// console.log(data,"datatatatat")
if(_reducer.params.add_back_lean==true){removeDataFromArray(4);if(newDW!=undefined){_reducer.const_var.UpdatedPriceData.leanto.push(newDW);}var UpdatePriceRecord=false;var backLeanData="";b={"leanto_type":4,"width":_reducer.params.leanB_p_w,"height":_reducer.params.leanB_p_h,'length':_reducer.params.leanB_p_d,"leanto_drop":"","front_wall":ConvStr(_reducer.params.p_b_c_b_b_f),"back_wall":ConvStr(_reducer.params.p_b_c_b_b_b),"side_wall":ConvStr(_reducer.params.p_b_c_b_b_l),"front_wall_price":0,"back_wall_price":0,"side_wall_price":0,"front_wall_vertical":_reducer.params.p_v_w,"back_wall_vertical":_reducer.params.p_v_w,"side_wall_vertical":_reducer.params.p_v_w,"certificate":_reducer.const_var.makeCertificateArrayBack[_reducer.params.leanB_p_e_i]};//a.concat(b);
var data=data;var mapVal=_reducer.const_var.map[_reducer.params.p_r_s];var CalCulateRoofBasePrice=0;var CalCulateRoofEndClosePrice=0;var CalCulateRoofEndGablePrice=0;var CalCulateRoofUtilityEndPrice=0;if(_reducer.params.add_storage_check_back==true){data.side=data.side;data.panel=data.panel;}else{data.side=data.full_length_side!=undefined?data.full_length_side:data.side;data.panel=data.full_length_panel!=undefined?data.full_length_panel:data.panel;}if(_reducer.const_var.UpdatedPriceData.leanto.length>0){var leantoData=_reducer.const_var.UpdatedPriceData.leanto.filter(function(data){return data.leanto_type==4;});if(leantoData.length>0){UpdatePriceRecord=true;backLeanData=leantoData[0];}}for(var i=0;i<data.base.length;i++){if(_reducer.const_var.g_v==data.base[i].gauge){b.basic_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_roof_style_price_changed!=true?backLeanData.basic_price:data.base[i][mapVal];t_c_b=parseFloat(t_c_b)+parseFloat(b.basic_price);CalCulateRoofBasePrice=b.basic_price;}}if(_reducer.params.add_left_back_lean_porch==true){b.porch={'type':'back','length':_reducer.params.lean_p_w+_reducer.params.leanB_p_d};}if(_reducer.params.add_right_back_lean_porch==true){b.porch={'type':'back','length':_reducer.params.leanR_p_w+_reducer.params.leanB_p_d};}if(_reducer.params.add_right_back_lean_porch==true&&_reducer.params.add_left_back_lean_porch==true){b.porch={'type':'back','length':_reducer.params.leanR_p_w+_reducer.params.lean_p_w+_reducer.params.leanB_p_d};}var heightFullData=data.full_length_side!=undefined&&data.full_length_side.length>0?data.full_length_side:undefined;if(_reducer.const_var.g_v==14){if(heightFullData[0].double_leg_baserail_cost!=0&&_reducer.params.p_e_l==true){b.height_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_height_price_changed!=true?backLeanData.height_price:heightFullData[0].double_leg_baserail_cost!=0?heightFullData[0].double_leg_baserail_cost:heightFullData[0].leg_height_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}else{b.height_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_height_price_changed!=true?backLeanData.height_price:heightFullData[0].leg_height_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}}if(_reducer.const_var.g_v==12){if(_reducer.params.p_e_l==true){if(heightFullData[0].double_leg_baserail_cost_12==0&&heightFullData[0].double_leg_baserail_cost==0){b.height_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_height_price_changed!=true?backLeanData.height_price:heightFullData[0].double_leg_baserail_cost_12!=0?heightFullData[0].double_leg_baserail_cost_12:heightFullData[0].leg_height_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}else{b.height_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_height_price_changed!=true?backLeanData.height_price:heightFullData[0].double_leg_baserail_cost_12!=0?heightFullData[0].double_leg_baserail_cost_12:heightFullData[0].double_leg_baserail_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}}else{b.height_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_height_price_changed!=true?backLeanData.height_price:heightFullData[0].leg_height_cost_12!=0?heightFullData[0].leg_height_cost_12:heightFullData[0].leg_height_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}}// b.height_price = (UpdatePriceRecord==true && const_var.UpdatedPriceData.back_lean_height_price_changed!=true)?backLeanData.height_price:(data.full_length_side!=undefined && data.full_length_side.length>0)?data.full_length_side[0].leg_height_cost:0;
// t_c_b = parseFloat(t_c_b) + parseFloat(b.height_price); 
if(_reducer.params.p_b_c_b_b_f=="Gable"){var ShowPrice="";if(_reducer.params.p_v_w==true){//t_c_b = t_c_b + (data.gable_end[0].vertical);
if(_reducer.params.leanB_p_e_i!=""&&_reducer.params.leanB_p_e_i!="other"&&_reducer.params.leanB_p_e_i!="0"&&_reducer.const_var.makeCertificateArrayBack[_reducer.params.leanB_p_e_i].certified==1){//t_c_b = ((data.gable_end[0].certified)==0)?parseFloat(t_c_b)+ (parseFloat(data.gable_end[0].uncertified) + parseFloat(data.gable_end[0].vertical)):(parseFloat(data.gable_end[0].vertical_certified)+parseFloat(data.gable_end[0].certified)) + parseFloat(t_c_b);
ShowPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_front_wall_price_changed!=true?backLeanData.front_wall_price:data.gable_end[0].vertical_certified+data.gable_end[0].certified;}else{//t_c_b = parseFloat(t_c_b)+ (parseFloat(data.gable_end[0].uncertified) + parseFloat(data.gable_end[0].vertical));
ShowPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_front_wall_price_changed!=true?backLeanData.front_wall_price:data.gable_end[0].uncertified+data.gable_end[0].vertical;}}else{if(_reducer.params.leanB_p_e_i!=""&&_reducer.params.leanB_p_e_i!="other"&&_reducer.params.leanB_p_e_i!="0"&&_reducer.const_var.makeCertificateArrayBack[_reducer.params.leanB_p_e_i].certified==1){//t_c_b = ((data.gable_end[0].certified)==0)?parseFloat(t_c_b)+ parseFloat((data.gable_end[0].uncertified)):parseFloat((data.gable_end[0].certified)) + parseFloat(t_c_b);
ShowPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_front_wall_price_changed!=true?backLeanData.front_wall_price:data.gable_end[0].certified;}else{//t_c_b = parseFloat(t_c_b)+ parseFloat((data.gable_end[0].uncertified));
ShowPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_front_wall_price_changed!=true?backLeanData.front_wall_price:data.gable_end[0].uncertified;}}b.front_wall_price=ShowPrice;//(params.p_v_w==true)?(data.gable_end[0].vertical):(data.gable_end[0].uncertified);
t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);CalCulateRoofEndGablePrice=b.front_wall_price;//b.back_wall_price = ShowPrice;//(params.p_v_w==true)?(data.gable_end[0].vertical):(data.gable_end[0].uncertified);
}if(_reducer.params.p_b_c_b_b_b=="Gable"&&_reducer.params.add_storage_check_back!=true){var ShowPrice="";if(_reducer.params.p_v_w==true){//t_c_b = t_c_b + (data.gable_end[0].vertical);
if(_reducer.params.leanB_p_e_i!=""&&_reducer.params.leanB_p_e_i!="other"&&_reducer.params.leanB_p_e_i!="0"&&_reducer.const_var.makeCertificateArrayBack[_reducer.params.leanB_p_e_i].certified==1){//t_c_b = ((data.gable_end[0].certified)==0)?parseFloat(t_c_b)+ (parseFloat(data.gable_end[0].uncertified) + parseFloat(data.gable_end[0].vertical)) :(parseFloat(data.gable_end[0].vertical_certified)+parseFloat(data.gable_end[0].certified)) + parseFloat(t_c_b);
ShowPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_back_wall_price_changed!=true?backLeanData.back_wall_price:data.gable_end[0].vertical_certified+data.gable_end[0].certified;}else{//t_c_b = parseFloat(t_c_b)+ (parseFloat(data.gable_end[0].uncertified) + parseFloat(data.gable_end[0].vertical));
ShowPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_back_wall_price_changed!=true?backLeanData.back_wall_price:data.gable_end[0].uncertified+data.gable_end[0].vertical;}}else{if(_reducer.params.leanB_p_e_i!=""&&_reducer.params.leanB_p_e_i!="other"&&_reducer.params.leanB_p_e_i!="0"&&_reducer.const_var.makeCertificateArrayBack[_reducer.params.leanB_p_e_i].certified==1){//t_c_b = ((data.gable_end[0].certified)==0)?parseFloat(t_c_b)+ parseFloat((data.gable_end[0].uncertified)):parseFloat((data.gable_end[0].certified)) + parseFloat(t_c_b);
ShowPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_back_wall_price_changed!=true?backLeanData.back_wall_price:data.gable_end[0].certified;}else{//t_c_b = parseFloat(t_c_b)+ parseFloat((data.gable_end[0].uncertified));
ShowPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_back_wall_price_changed!=true?backLeanData.back_wall_price:data.gable_end[0].uncertified;}}//b.front_wall_price = ShowPrice;//(params.p_v_w==true)?(data.gable_end[0].vertical):(data.gable_end[0].uncertified);
b.back_wall_price=ShowPrice;//(params.p_v_w==true)?(data.gable_end[0].vertical):(data.gable_end[0].uncertified);
t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);CalCulateRoofEndGablePrice=CalCulateRoofEndGablePrice+b.back_wall_price;}if(_reducer.params.p_b_c_b_b_f=="Half_Close"){b.front_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_front_wall_price_changed!=true?backLeanData.front_wall_price:_reducer.params.p_v_w==true?(data.end[0].half_vertical_ends_cost+data.end[0].half_end_close_cost).toFixed(2):data.end[0].half_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);}if(_reducer.params.p_b_c_b_b_f=="One_Fourth_Close"){b.front_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_front_wall_price_changed!=true?backLeanData.front_wall_price:_reducer.params.p_v_w==true?(data.end[0].one_fourth_vertical_ends_cost+data.end[0].one_fourth_end_close_cost).toFixed(2):data.end[0].one_fourth_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);}if(_reducer.params.p_b_c_b_b_f=="Three_Fourth_Close"){b.front_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_front_wall_price_changed!=true?backLeanData.front_wall_price:_reducer.params.p_v_w==true?(data.end[0].three_fourth_vertical_ends_cost+data.end[0].three_fourth_end_close_cost).toFixed(2):data.end[0].three_fourth_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);}if(_reducer.params.p_b_c_b_b_f=="Close"){b.front_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_front_wall_price_changed!=true?backLeanData.front_wall_price:_reducer.params.p_v_w==true?data.end[0].vertical_ends_cost+data.end[0].end_close_cost:data.end[0].end_close_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);CalCulateRoofEndClosePrice=b.front_wall_price;//b.back_wall_price  = (params.p_v_w==true )?((data.end[0].vertical_ends_cost)) + (data.end[0].end_close_cost):(data.end[0].end_close_cost);
}// console.log(t_c_b,"t_c_b111",t_c_b)
if(_reducer.params.p_b_c_b_b_b=="Half_Close"){b.back_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_back_wall_price_changed!=true?backLeanData.back_wall_price:_reducer.params.p_v_w==true?(data.end[0].half_vertical_ends_cost+data.end[0].half_end_close_cost).toFixed(2):data.end[0].half_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);}if(_reducer.params.p_b_c_b_b_b=="One_Fourth_Close"){b.back_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_back_wall_price_changed!=true?backLeanData.back_wall_price:_reducer.params.p_v_w==true?(data.end[0].one_fourth_vertical_ends_cost+data.end[0].one_fourth_end_close_cost).toFixed(2):data.end[0].one_fourth_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);}if(_reducer.params.p_b_c_b_b_b=="Three_Fourth_Close"){b.back_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_back_wall_price_changed!=true?backLeanData.back_wall_price:_reducer.params.p_v_w==true?(data.end[0].three_fourth_vertical_ends_cost+data.end[0].three_fourth_end_close_cost).toFixed(2):data.end[0].three_fourth_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);}if(_reducer.params.p_b_c_b_b_b=="Close"&&_reducer.params.add_storage_check_back!=true){b.back_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_back_wall_price_changed!=true?backLeanData.back_wall_price:_reducer.params.p_v_w==true?data.end[0].vertical_ends_cost+data.end[0].end_close_cost:data.end[0].end_close_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);CalCulateRoofEndClosePrice=CalCulateRoofEndClosePrice+b.back_wall_price;}// console.log(t_c_b,"t_c_b2222",t_c_b)
if(_reducer.params.p_b_c_b_b_l=="Close"){b.side_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_left_wall_price_changed!=true?backLeanData.side_wall_price:_reducer.params.p_v_w==true?data.side[0].vertical_side_cost+data.side[0].side_close_cost:data.side[0].side_close_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(_reducer.params.p_b_c_b_b_l=="Half_Close"){b.side_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_left_wall_price_changed!=true?backLeanData.side_wall_price:_reducer.params.p_v_w==true?(data.side[0].half_vertical_side_cost+data.side[0].half_side_close_cost).toFixed(2):data.side[0].half_side_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(_reducer.params.p_b_c_b_b_l=="One_Fourth_Close"){b.side_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_left_wall_price_changed!=true?backLeanData.side_wall_price:_reducer.params.p_v_w==true?(data.side[0].one_fourth_vertical_side_cost+data.side[0].one_fourth_side_close_cost).toFixed(2):data.side[0].one_fourth_side_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(_reducer.params.p_b_c_b_b_l=="Three_Fourth_Close"){b.side_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_left_wall_price_changed!=true?backLeanData.side_wall_price:_reducer.params.p_v_w==true?(data.side[0].three_fourth_vertical_side_cost+data.side[0].three_fourth_side_close_cost).toFixed(2):data.side[0].three_fourth_side_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(_reducer.params.p_b_c_b_b_l!=="Close"&&_reducer.params.p_b_c_b_b_l!=="Open"&&_reducer.params.p_b_c_b_b_l!="Half_Close"&&_reducer.params.p_b_c_b_b_l!="One_Fourth_Close"&&_reducer.params.p_b_c_b_b_l!="Three_Fourth_Close"){b.side_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_left_wall_price_changed!=true?backLeanData.side_wall_price:_reducer.params.p_v_w==true?data.panel[0].vertical_panel_cost*_reducer.params.p_b_c_b_b_l:data.panel[0].cost*_reducer.params.p_b_c_b_b_l;t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}// console.log(t_c_b,"t_c_b22223333",t_c_b)
if(_reducer.params.add_storage_check_back==true&&data.utility_side.length>0){// console.log(backLeanData.utility_price,const_var.UpdatedPriceData.back_lean_utility_price_changed,(data.utility_side[0].vertical_side_cost *2)+(data.end[0].vertical_ends_cost * 2)+(data.utility_side[0].side_close_cost * 2)+(data.end[0].end_close_cost * 2),"(data.utility_side[0].vertical_side_cost *2)+(data.end[0].vertical_ends_cost * 2)+(data.utility_side[0].side_close_cost * 2)+(data.end[0].end_close_cost * 2)")
b.utility_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_utility_price_changed!=true?backLeanData.utility_price:_reducer.params.p_v_w==true?data.utility_side[0].vertical_side_cost*2+data.end[0].vertical_ends_cost*2+data.utility_side[0].side_close_cost*2+data.end[0].end_close_cost*2:data.utility_side[0].side_close_cost*2+data.end[0].end_close_cost*2;// console.log(b.utility_price,"b.utility_price",t_c_b,(data.utility_side[0].side_close_cost * 2)+(data.end[0].end_close_cost * 2))
t_c_b=parseFloat(t_c_b)+parseFloat(b.utility_price);b.utility_length=_reducer.params.add_storage_front;b.has_utility=true;b.utility_vertical=_reducer.params.p_v_w?true:false;b.utility_on_centers=_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s]==undefined?5:_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s];CalCulateRoofUtilityEndPrice=_reducer.params.p_v_w==true?data.end[0].vertical_ends_cost*2+data.end[0].end_close_cost*2:data.end[0].end_close_cost*2;}// console.log(t_c_b,"t_c_b2222444444",t_c_b)
if(_reducer.const_var.b_r_p_l_to_a.length>0&&_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pB]!=undefined){if(_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pB].cost_type=="%"){var splitVal=_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pB].percentage_of!=undefined&&_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pB].percentage_of!=0?_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pB].percentage_of.split(","):0;var splval=0;if(splitVal!=0){if(splitVal.includes("1")!=false){splval=splval+CalCulateRoofBasePrice;}if(splitVal.includes("2")!=false){splval=splval+CalCulateRoofEndClosePrice;}if(splitVal.includes("3")!=false){splval=splval+CalCulateRoofEndGablePrice;}if(CalCulateRoofUtilityEndPrice!=0){splval=splval+CalCulateRoofUtilityEndPrice;}}else{splval=splval+CalCulateRoofBasePrice;}var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_roof_pitch_price_changed!=true?backLeanData.roof_pitch_price:_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pB]?splval*_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pB].cost/100:0;b.roof_pitch=_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pB].roof_pitch;b.roof_pitch_name=_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pB].roof_pitch;b.roof_pitch_price=finalCertPrice;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);}else{var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_roof_pitch_price_changed!=true?backLeanData.roof_pitch_price:_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pB]?_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pB].cost:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.roof_pitch=_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pB].roof_pitch;b.roof_pitch_name=_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pB].roof_pitch;b.roof_pitch_price=finalCertPrice;}}else{b.roof_pitch="3/12";b.roof_pitch_name="3/12";b.roof_pitch_price=0;}if(_reducer.params.leanB_p_e_i!=""&&_reducer.params.leanB_p_e_i!="0"&&_reducer.params.leanB_p_e_i!="other"){if(_reducer.params.p_i_s=="1"){if(_reducer.const_var.makeCertificateArrayBack[_reducer.params.leanB_p_e_i].percentage_of_cost!=0){if(_reducer.const_var.makeCertificateArrayBack[_reducer.params.leanB_p_e_i].percentage_of!=undefined&&_reducer.const_var.makeCertificateArrayBack[_reducer.params.leanB_p_e_i].percentage_of=="building_amount"){var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_certificate_price_changed!=true?backLeanData.certificate_price:_reducer.const_var.makeCertificateArrayBack[_reducer.params.leanB_p_e_i].percentage_of_cost?t_c_b*_reducer.const_var.makeCertificateArrayBack[_reducer.params.leanB_p_e_i].percentage_of_cost/100:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}else{var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_certificate_price_changed!=true?backLeanData.certificate_price:_reducer.const_var.makeCertificateArrayBack[_reducer.params.leanB_p_e_i].percentage_of_cost?CalCulateRoofBasePrice*_reducer.const_var.makeCertificateArrayBack[_reducer.params.leanB_p_e_i].percentage_of_cost/100:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}}else{var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_certificate_price_changed!=true?backLeanData.certificate_price:_reducer.const_var.makeCertificateArrayBack[_reducer.params.leanB_p_e_i].certification_concrete_cost?_reducer.const_var.makeCertificateArrayBack[_reducer.params.leanB_p_e_i].certification_concrete_cost:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}}else{if(_reducer.const_var.makeCertificateArrayBack[_reducer.params.leanB_p_e_i].percentage_of_cost!=0){if(_reducer.const_var.makeCertificateArrayBack[_reducer.params.leanB_p_e_i].percentage_of!=undefined&&_reducer.const_var.makeCertificateArrayBack[_reducer.params.leanB_p_e_i].percentage_of=="building_amount"){var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_certificate_price_changed!=true?backLeanData.certificate_price:_reducer.const_var.makeCertificateArrayBack[_reducer.params.leanB_p_e_i].percentage_of_cost?t_c_b*_reducer.const_var.makeCertificateArrayBack[_reducer.params.leanB_p_e_i].percentage_of_cost/100:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}else{var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_certificate_price_changed!=true?backLeanData.certificate_price:_reducer.const_var.makeCertificateArrayBack[_reducer.params.leanB_p_e_i].percentage_of_cost?CalCulateRoofBasePrice*_reducer.const_var.makeCertificateArrayBack[_reducer.params.leanB_p_e_i].percentage_of_cost/100:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}//console.log(b.certificate_price,"b.certificate_price",b.certificate_price * certVal);
}else{var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_certificate_price_changed!=true?backLeanData.certificate_price:_reducer.const_var.makeCertificateArrayBack[_reducer.params.leanB_p_e_i].cost?_reducer.const_var.makeCertificateArrayBack[_reducer.params.leanB_p_e_i].cost:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}}}if(_reducer.params.leanB_p_e_i=="other"){b.certificate={'gauge':0,'certified':1,'has_double_leg':0,'has_ladder_leg':0,'has_other_leg':0,'height':0,'id':-1,'cost':0,'is_default':"no",'length':0,'map_id':0,'name':"Other"};b.certificate_other_name=_reducer.params.leanB_p_e_i_other!=''?_reducer.params.leanB_p_e_i_other:'Other';b.certificate_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.back_lean_certificate_price_changed!=true?backLeanData.certificate_price:0;t_c_b=parseFloat(t_c_b)+parseFloat(b.certificate_price);}if(_reducer.params.continous_left_lean==true){b.continous_lean=true;}else{b.continous_lean=false;}b.pricing_data=data;b.t_c_b=parseFloat(t_c_b);_reducer.const_var.leanto.push(b);// console.log(const_var.leanto,"const_var.leanto")
_reducer.const_var.UpdatedPriceData.leanto.push(b);}else{removeDataFromArray(4);}cP(_reducer.const_var.a_p_d_a);};exports.cPforBLeanOnly=cPforBLeanOnly;var cPforLLeanOnly=function cPforLLeanOnly(data,objIndex,newDW){var t_c_b=0;var b={};if(_reducer.params.add_left_lean==true){removeDataFromArray(1);if(newDW!=undefined){_reducer.const_var.UpdatedPriceData.leanto.push(newDW);}var UpdatePriceRecord=false;var leftLeanData="";b={"leanto_type":1,"width":_reducer.params.lean_p_w,"height":_reducer.params.lean_p_h,'length':_reducer.params.lean_p_d,"leanto_drop":"","front_wall":ConvStr(_reducer.params.p_b_c_b_l_f),"back_wall":ConvStr(_reducer.params.p_b_c_b_l_b),"side_wall":ConvStr(_reducer.params.p_b_c_b_l),"front_wall_price":0,"back_wall_price":0,"side_wall_price":0,"front_wall_vertical":_reducer.params.p_v_w,"back_wall_vertical":_reducer.params.p_v_w,"side_wall_vertical":_reducer.params.p_v_w,"certificate":_reducer.const_var.makeCertificateArrayLeft[_reducer.params.lean_p_e_i]};//a.concat(b);
var data=data;var mapVal=_reducer.const_var.map[_reducer.params.p_r_s];var CalCulateRoofBasePrice=0;var CalCulateRoofEndClosePrice=0;var CalCulateRoofEndGablePrice=0;var CalCulateRoofUtilityEndPrice=0;if(_reducer.params.add_storage_check==true){data.side=data.side;data.panel=data.panel;}else{data.side=data.full_length_side!=undefined?data.full_length_side:data.side;data.panel=data.full_length_panel!=undefined?data.full_length_panel:data.panel;}// console.log(const_var.UpdatedPriceData.left_lean_roof_style_price_changed,"const_var.UpdatedPriceData.left_lean_roof_style_price_changed111")
if(_reducer.const_var.UpdatedPriceData.leanto.length>0){var FindIndex=_reducer.const_var.UpdatedPriceData.leanto.filter(function(data){return data.leanto_type==1;});// console.log(FindIndex,"FindIndex")
if(FindIndex.length>0){UpdatePriceRecord=true;leftLeanData=FindIndex[0];}// if(const_var.UpdatedPriceData.leanto[0]!=undefined && const_var.UpdatedPriceData.leanto[0].leanto_type==1)
// {
//     UpdatePriceRecord = true;
//     leftLeanData = const_var.UpdatedPriceData.leanto[letFindIndex];
// }if(const_var.UpdatedPriceData.leanto[1]!=undefined && const_var.UpdatedPriceData.leanto[1].leanto_type==1)
// {
//     UpdatePriceRecord = true;
//     leftLeanData = const_var.UpdatedPriceData.leanto[1];
// }
}// console.log(const_var.UpdatedPriceData.left_lean_roof_style_price_changed,"const_var.UpdatedPriceData.left_lean_roof_style_price_changed")
for(var i=0;i<data.base.length;i++){if(_reducer.const_var.g_v==data.base[i].gauge){b.basic_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_roof_style_price_changed!=true?leftLeanData.basic_price:data.base[i][mapVal];t_c_b=parseFloat(t_c_b)+parseFloat(b.basic_price);CalCulateRoofBasePrice=b.basic_price;}}if(_reducer.params.add_left_front_lean_porch==true){b.porch={'type':'left','length':_reducer.params.lean_p_d+_reducer.params.leanF_p_d};}if(_reducer.params.add_left_back_lean_porch==true){b.porch={'type':'left','length':_reducer.params.lean_p_d+_reducer.params.leanB_p_d};}if(_reducer.params.add_left_back_lean_porch==true&&_reducer.params.add_left_front_lean_porch==true){b.porch={'type':'left','length':_reducer.params.lean_p_d+_reducer.params.leanB_p_d+_reducer.params.leanF_p_d};}var heightFullData=data.full_length_side!=undefined&&data.full_length_side.length>0?data.full_length_side:undefined;if(_reducer.const_var.g_v==14){if(heightFullData[0].double_leg_baserail_cost!=0&&_reducer.params.p_e_l==true){b.height_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_height_price_changed!=true?leftLeanData.height_price:heightFullData[0].double_leg_baserail_cost!=0?heightFullData[0].double_leg_baserail_cost:heightFullData[0].leg_height_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}else{b.height_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_height_price_changed!=true?leftLeanData.height_price:heightFullData[0].leg_height_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}}if(_reducer.const_var.g_v==12){if(_reducer.params.p_e_l==true){if(heightFullData[0].double_leg_baserail_cost_12==0&&heightFullData[0].double_leg_baserail_cost==0){b.height_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_height_price_changed!=true?leftLeanData.height_price:heightFullData[0].leg_height_cost_12!=0?heightFullData[0].leg_height_cost_12:heightFullData[0].leg_height_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}else{b.height_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_height_price_changed!=true?leftLeanData.height_price:heightFullData[0].double_leg_baserail_cost_12!=0?heightFullData[0].double_leg_baserail_cost_12:heightFullData[0].double_leg_baserail_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}}else{b.height_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_height_price_changed!=true?leftLeanData.height_price:heightFullData[0].leg_height_cost_12!=0?heightFullData[0].leg_height_cost_12:heightFullData[0].leg_height_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}}// b.height_price = (UpdatePriceRecord==true && const_var.UpdatedPriceData.left_lean_height_price_changed!=true)?leftLeanData.height_price:(data.full_length_side!=undefined && data.full_length_side.length>0)?data.full_length_side[0].leg_height_cost:0;
// t_c_b = parseFloat(t_c_b) + parseFloat(b.height_price); 
if(_reducer.params.p_b_c_b_l_f=="Gable"){var ShowPrice="";if(_reducer.params.p_v_w==true){//t_c_b = t_c_b + (data.gable_end[0].vertical);
if(_reducer.params.lean_p_e_i!=""&&_reducer.params.lean_p_e_i!="other"&&_reducer.params.lean_p_e_i!="0"&&_reducer.const_var.makeCertificateArrayLeft[_reducer.params.lean_p_e_i].certified==1){//t_c_b = ((data.gable_end[0].certified)==0)?parseFloat(t_c_b)+ (parseFloat(data.gable_end[0].uncertified) + parseFloat(data.gable_end[0].vertical)):(parseFloat(data.gable_end[0].vertical_certified)+parseFloat(data.gable_end[0].certified)) + parseFloat(t_c_b);
ShowPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_front_wall_price_changed!=true?leftLeanData.front_wall_price:data.gable_end[0].vertical_certified+data.gable_end[0].certified;}else{//t_c_b = parseFloat(t_c_b)+ (parseFloat(data.gable_end[0].uncertified) + parseFloat(data.gable_end[0].vertical));
ShowPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_front_wall_price_changed!=true?leftLeanData.front_wall_price:data.gable_end[0].uncertified+data.gable_end[0].vertical;}}else{if(_reducer.params.lean_p_e_i!=""&&_reducer.params.lean_p_e_i!="other"&&_reducer.params.lean_p_e_i!="0"&&_reducer.const_var.makeCertificateArrayLeft[_reducer.params.lean_p_e_i].certified==1){//t_c_b = ((data.gable_end[0].certified)==0)?parseFloat(t_c_b)+ parseFloat((data.gable_end[0].uncertified)):parseFloat((data.gable_end[0].certified)) + parseFloat(t_c_b);
ShowPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_front_wall_price_changed!=true?leftLeanData.front_wall_price:data.gable_end[0].certified;}else{//t_c_b = parseFloat(t_c_b)+ parseFloat((data.gable_end[0].uncertified));
ShowPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_front_wall_price_changed!=true?leftLeanData.front_wall_price:data.gable_end[0].uncertified;}}b.front_wall_price=ShowPrice;//(params.p_v_w==true)?(data.gable_end[0].vertical):(data.gable_end[0].uncertified);
t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);CalCulateRoofEndGablePrice=b.front_wall_price;//b.back_wall_price = ShowPrice;//(params.p_v_w==true)?(data.gable_end[0].vertical):(data.gable_end[0].uncertified);
}if(_reducer.params.p_b_c_b_l_b=="Gable"&&_reducer.params.add_storage_check!=true){var ShowPrice="";if(_reducer.params.p_v_w==true){//t_c_b = t_c_b + (data.gable_end[0].vertical);
if(_reducer.params.lean_p_e_i!=""&&_reducer.params.lean_p_e_i!="other"&&_reducer.params.lean_p_e_i!="0"&&_reducer.const_var.makeCertificateArrayLeft[_reducer.params.lean_p_e_i].certified==1){//t_c_b = ((data.gable_end[0].certified)==0)?parseFloat(t_c_b)+ (parseFloat(data.gable_end[0].uncertified) + parseFloat(data.gable_end[0].vertical)) :(parseFloat(data.gable_end[0].vertical_certified)+parseFloat(data.gable_end[0].certified)) + parseFloat(t_c_b);
ShowPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_back_wall_price_changed!=true?leftLeanData.back_wall_price:data.gable_end[0].vertical_certified+data.gable_end[0].certified;}else{//t_c_b = parseFloat(t_c_b)+ (parseFloat(data.gable_end[0].uncertified) + parseFloat(data.gable_end[0].vertical));
ShowPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_back_wall_price_changed!=true?leftLeanData.back_wall_price:data.gable_end[0].uncertified+data.gable_end[0].vertical;}}else{if(_reducer.params.lean_p_e_i!=""&&_reducer.params.lean_p_e_i!="other"&&_reducer.params.lean_p_e_i!="0"&&_reducer.const_var.makeCertificateArrayLeft[_reducer.params.lean_p_e_i].certified==1){//t_c_b = ((data.gable_end[0].certified)==0)?parseFloat(t_c_b)+ parseFloat((data.gable_end[0].uncertified)):parseFloat((data.gable_end[0].certified)) + parseFloat(t_c_b);
ShowPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_back_wall_price_changed!=true?leftLeanData.back_wall_price:data.gable_end[0].certified;}else{//t_c_b = parseFloat(t_c_b)+ parseFloat((data.gable_end[0].uncertified));
ShowPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_back_wall_price_changed!=true?leftLeanData.back_wall_price:data.gable_end[0].uncertified;}}//b.front_wall_price = ShowPrice;//(params.p_v_w==true)?(data.gable_end[0].vertical):(data.gable_end[0].uncertified);
b.back_wall_price=ShowPrice;//(params.p_v_w==true)?(data.gable_end[0].vertical):(data.gable_end[0].uncertified);
t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);CalCulateRoofEndGablePrice=CalCulateRoofEndGablePrice+b.back_wall_price;}if(_reducer.params.p_b_c_b_l_f=="Half_Close"){b.front_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_front_wall_price_changed!=true?leftLeanData.front_wall_price:_reducer.params.p_v_w==true?(data.end[0].half_vertical_ends_cost+data.end[0].half_end_close_cost).toFixed(2):data.end[0].half_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);}if(_reducer.params.p_b_c_b_l_f=="One_Fourth_Close"){b.front_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_front_wall_price_changed!=true?leftLeanData.front_wall_price:_reducer.params.p_v_w==true?(data.end[0].one_fourth_vertical_ends_cost+data.end[0].one_fourth_end_close_cost).toFixed(2):data.end[0].one_fourth_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);}if(_reducer.params.p_b_c_b_l_f=="Three_Fourth_Close"){b.front_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_front_wall_price_changed!=true?leftLeanData.front_wall_price:_reducer.params.p_v_w==true?(data.end[0].three_fourth_vertical_ends_cost+data.end[0].three_fourth_end_close_cost).toFixed(2):data.end[0].three_fourth_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);}// console.log(params.p_b_c_b_l_f,params.b_h_t2,"params.b_h_t2")
if(_reducer.params.p_b_c_b_l_f=="Close"){//   console.log(const_var.UpdatedPriceData.left_lean_front_wall_price_changed,"const_var.UpdatedPriceData.left_lean_front_wall_price_changed",data.end[0].end_close_cost)
b.front_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_front_wall_price_changed!=true?leftLeanData.front_wall_price:_reducer.params.p_v_w==true?data.end[0].vertical_ends_cost+data.end[0].end_close_cost:data.end[0].end_close_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);CalCulateRoofEndClosePrice=b.front_wall_price;//b.back_wall_price  = (params.p_v_w==true )?((data.end[0].vertical_ends_cost)) + (data.end[0].end_close_cost):(data.end[0].end_close_cost);
}if(_reducer.params.p_b_c_b_l_b=="Half_Close"){b.back_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_back_wall_price_changed!=true?leftLeanData.back_wall_price:_reducer.params.p_v_w==true?(data.end[0].half_vertical_ends_cost+data.end[0].half_end_close_cost).toFixed(2):data.end[0].half_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);}if(_reducer.params.p_b_c_b_l_b=="One_Fourth_Close"){b.back_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_back_wall_price_changed!=true?leftLeanData.back_wall_price:_reducer.params.p_v_w==true?(data.end[0].one_fourth_vertical_ends_cost+data.end[0].one_fourth_end_close_cost).toFixed(2):data.end[0].one_fourth_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);}if(_reducer.params.p_b_c_b_l_b=="Three_Fourth_Close"){b.back_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_back_wall_price_changed!=true?leftLeanData.back_wall_price:_reducer.params.p_v_w==true?(data.end[0].three_fourth_vertical_ends_cost+data.end[0].three_fourth_end_close_cost).toFixed(2):data.end[0].three_fourth_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);}if(_reducer.params.p_b_c_b_l_b=="Close"&&_reducer.params.add_storage_check!=true){b.back_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_back_wall_price_changed!=true?leftLeanData.back_wall_price:_reducer.params.p_v_w==true?data.end[0].vertical_ends_cost+data.end[0].end_close_cost:data.end[0].end_close_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);CalCulateRoofEndClosePrice=CalCulateRoofEndClosePrice+b.back_wall_price;}if(_reducer.params.p_b_c_b_l=="Close"){b.side_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_left_wall_price_changed!=true?leftLeanData.side_wall_price:_reducer.params.p_v_w==true?data.side[0].vertical_side_cost+data.side[0].side_close_cost:data.side[0].side_close_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(_reducer.params.p_b_c_b_l=="Half_Close"){b.side_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_left_wall_price_changed!=true?leftLeanData.side_wall_price:_reducer.params.p_v_w==true?(data.side[0].half_vertical_side_cost+data.side[0].half_side_close_cost).toFixed(2):data.side[0].half_side_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(_reducer.params.p_b_c_b_l=="One_Fourth_Close"){b.side_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_left_wall_price_changed!=true?leftLeanData.side_wall_price:_reducer.params.p_v_w==true?(data.side[0].one_fourth_vertical_side_cost+data.side[0].one_fourth_side_close_cost).toFixed(2):data.side[0].one_fourth_side_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(_reducer.params.p_b_c_b_l=="Three_Fourth_Close"){b.side_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_left_wall_price_changed!=true?leftLeanData.side_wall_price:_reducer.params.p_v_w==true?(data.side[0].three_fourth_vertical_side_cost+data.side[0].three_fourth_side_close_cost).toFixed(2):data.side[0].three_fourth_side_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(_reducer.params.p_b_c_b_l!=="Close"&&_reducer.params.p_b_c_b_l!=="Open"&&_reducer.params.p_b_c_b_l!="Half_Close"&&_reducer.params.p_b_c_b_l!="One_Fourth_Close"&&_reducer.params.p_b_c_b_l!="Three_Fourth_Close"){b.side_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_left_wall_price_changed!=true?leftLeanData.side_wall_price:_reducer.params.p_v_w==true?data.panel[0].vertical_panel_cost*_reducer.params.p_b_c_b_l:data.panel[0].cost*_reducer.params.p_b_c_b_l;t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(_reducer.params.add_storage_check==true&&data.utility_side.length>0){b.utility_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_utility_price_changed!=true?leftLeanData.utility_price:_reducer.params.p_v_w==true?data.utility_side[0].vertical_side_cost*2+data.end[0].vertical_ends_cost*2+data.utility_side[0].side_close_cost*2+data.end[0].end_close_cost*2:data.utility_side[0].side_close_cost*2+data.end[0].end_close_cost*2;t_c_b=parseFloat(t_c_b)+parseFloat(b.utility_price);b.utility_length=_reducer.params.add_storage;b.has_utility=true;b.utility_vertical=_reducer.params.p_v_w?true:false;b.utility_on_centers=_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s]==undefined?5:_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s];CalCulateRoofUtilityEndPrice=_reducer.params.p_v_w==true?data.end[0].vertical_ends_cost*2+data.end[0].end_close_cost*2:data.end[0].end_close_cost*2;}if(_reducer.const_var.b_r_p_l_to_a.length>0&&_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_p]!=undefined){if(_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_p].cost_type=="%"){var splitVal=_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_p].percentage_of!=undefined&&_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_p].percentage_of!=0?_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_p].percentage_of.split(","):0;var splval=0;if(splitVal!=0){if(splitVal.includes("1")!=false){splval=splval+CalCulateRoofBasePrice;}if(splitVal.includes("2")!=false){splval=splval+CalCulateRoofEndClosePrice;}if(splitVal.includes("3")!=false){splval=splval+CalCulateRoofEndGablePrice;}if(CalCulateRoofUtilityEndPrice!=0){splval=splval+CalCulateRoofUtilityEndPrice;}}else{splval=splval+CalCulateRoofBasePrice;}var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_roof_pitch_price_changed!=true?leftLeanData.roof_pitch_price:_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_p]?splval*_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_p].cost/100:0;b.roof_pitch=_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_p].roof_pitch;b.roof_pitch_name=_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_p].roof_pitch;b.roof_pitch_price=finalCertPrice;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);}else{var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_roof_pitch_price_changed!=true?leftLeanData.roof_pitch_price:_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_p]?_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_p].cost:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.roof_pitch=_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_p].roof_pitch;b.roof_pitch_name=_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_p].roof_pitch;b.roof_pitch_price=finalCertPrice;}}else{b.roof_pitch="3/12";b.roof_pitch_name="3/12";b.roof_pitch_price=0;}// console.log(const_var.makeCertificateArrayLeft,"const_var.makeCertificateArrayLeft",params.lean_p_e_i)
if(_reducer.params.lean_p_e_i!=""&&_reducer.params.lean_p_e_i!="0"&&_reducer.params.lean_p_e_i!="other"){if(_reducer.params.p_i_s=="1"){if(_reducer.const_var.makeCertificateArrayLeft[_reducer.params.lean_p_e_i].percentage_of_cost!=0){if(_reducer.const_var.makeCertificateArrayLeft[_reducer.params.lean_p_e_i].percentage_of!=undefined&&_reducer.const_var.makeCertificateArrayLeft[_reducer.params.lean_p_e_i].percentage_of=="building_amount"){var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_certificate_price_changed!=true?leftLeanData.certificate_price:_reducer.const_var.makeCertificateArrayLeft[_reducer.params.lean_p_e_i].percentage_of_cost?t_c_b*_reducer.const_var.makeCertificateArrayLeft[_reducer.params.lean_p_e_i].percentage_of_cost/100:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}else{var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_certificate_price_changed!=true?leftLeanData.certificate_price:_reducer.const_var.makeCertificateArrayLeft[_reducer.params.lean_p_e_i].percentage_of_cost?CalCulateRoofBasePrice*_reducer.const_var.makeCertificateArrayLeft[_reducer.params.lean_p_e_i].percentage_of_cost/100:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}}else{var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_certificate_price_changed!=true?leftLeanData.certificate_price:_reducer.const_var.makeCertificateArrayLeft[_reducer.params.lean_p_e_i].certification_concrete_cost?_reducer.const_var.makeCertificateArrayLeft[_reducer.params.lean_p_e_i].certification_concrete_cost:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}}else{if(_reducer.const_var.makeCertificateArrayLeft[_reducer.params.lean_p_e_i].percentage_of_cost!=0){if(_reducer.const_var.makeCertificateArrayLeft[_reducer.params.lean_p_e_i].percentage_of!=undefined&&_reducer.const_var.makeCertificateArrayLeft[_reducer.params.lean_p_e_i].percentage_of=="building_amount"){var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_certificate_price_changed!=true?leftLeanData.certificate_price:_reducer.const_var.makeCertificateArrayLeft[_reducer.params.lean_p_e_i].percentage_of_cost?t_c_b*_reducer.const_var.makeCertificateArrayLeft[_reducer.params.lean_p_e_i].percentage_of_cost/100:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}else{var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_certificate_price_changed!=true?leftLeanData.certificate_price:_reducer.const_var.makeCertificateArrayLeft[_reducer.params.lean_p_e_i].percentage_of_cost?CalCulateRoofBasePrice*_reducer.const_var.makeCertificateArrayLeft[_reducer.params.lean_p_e_i].percentage_of_cost/100:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}//console.log(b.certificate_price,"b.certificate_price",b.certificate_price * certVal);
}else{var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_certificate_price_changed!=true?leftLeanData.certificate_price:_reducer.const_var.makeCertificateArrayLeft[_reducer.params.lean_p_e_i].cost?_reducer.const_var.makeCertificateArrayLeft[_reducer.params.lean_p_e_i].cost:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}}}if(_reducer.params.lean_p_e_i=="other"){b.certificate={'gauge':0,'certified':1,'has_double_leg':0,'has_ladder_leg':0,'has_other_leg':0,'height':0,'id':-1,'cost':0,'is_default':"no",'length':0,'map_id':0,'name':"Other"};b.certificate_other_name=_reducer.params.lean_p_e_i_other!=''?_reducer.params.lean_p_e_i_other:'Other';b.certificate_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.left_lean_certificate_price_changed!=true?leftLeanData.certificate_price:0;t_c_b=parseFloat(t_c_b)+parseFloat(b.certificate_price);}if(_reducer.params.continous_left_lean==true){b.continous_lean=true;}else{b.continous_lean=false;}b.pricing_data=data;b.t_c_b=parseFloat(t_c_b);_reducer.const_var.leanto.push(b);_reducer.const_var.UpdatedPriceData.leanto.push(b);}else{removeDataFromArray(1);}cP(_reducer.const_var.a_p_d_a);};exports.cPforLLeanOnly=cPforLLeanOnly;var cPforRLeanOnly=function cPforRLeanOnly(data,objIndex,newDW){var activeLean;var t_c;var t_c_b=0;if(_reducer.params.add_right_lean==true){removeDataFromArray(2);if(newDW!=undefined){_reducer.const_var.UpdatedPriceData.leanto.push(newDW);}var UpdatePriceRecord=false;var rightLeanData="";// if(const_var.UpdatedPriceData.leanto.length>0)
// {
//     if(const_var.UpdatedPriceData.leanto[0]!=undefined && const_var.UpdatedPriceData.leanto[0].leanto_type==2)
//     {
//         UpdatePriceRecord = true;
//         rightLeanData = const_var.UpdatedPriceData.leanto[0];
//     }if(const_var.UpdatedPriceData.leanto[1]!=undefined && const_var.UpdatedPriceData.leanto[1].leanto_type==2)
//     {
//         UpdatePriceRecord = true;
//         rightLeanData = const_var.UpdatedPriceData.leanto[1];
//     }
// }
if(_reducer.const_var.UpdatedPriceData.leanto.length>0){var FindIndex=_reducer.const_var.UpdatedPriceData.leanto.filter(function(data){return data.leanto_type==2;});if(FindIndex.length>0){UpdatePriceRecord=true;rightLeanData=FindIndex[0];}// if(const_var.UpdatedPriceData.leanto[0]!=undefined && const_var.UpdatedPriceData.leanto[0].leanto_type==1)
// {
//     UpdatePriceRecord = true;
//     leftLeanData = const_var.UpdatedPriceData.leanto[letFindIndex];
// }if(const_var.UpdatedPriceData.leanto[1]!=undefined && const_var.UpdatedPriceData.leanto[1].leanto_type==1)
// {
//     UpdatePriceRecord = true;
//     leftLeanData = const_var.UpdatedPriceData.leanto[1];
// }
}var b={"leanto_type":2,"width":_reducer.params.leanR_p_w,"height":_reducer.params.leanR_p_h,'length':_reducer.params.leanR_p_d,"leanto_drop":"","front_wall":ConvStr(_reducer.params.p_b_c_b_r_f),"back_wall":ConvStr(_reducer.params.p_b_c_b_r_b),"side_wall":ConvStr(_reducer.params.p_b_c_b_r),"front_wall_price":0,"back_wall_price":0,"side_wall_price":0,"front_wall_vertical":_reducer.params.p_v_w,"back_wall_vertical":_reducer.params.p_v_w,"side_wall_vertical":_reducer.params.p_v_w,"certificate":_reducer.const_var.makeCertificateArrayRight[_reducer.params.leanR_p_e_i]};//a.concat(b);
var data=data;var mapVal=_reducer.const_var.map[_reducer.params.p_r_s];var CalCulateRoofBasePrice=0;var CalCulateRoofEndClosePrice=0;var CalCulateRoofEndGablePrice=0;var CalCulateRoofUtilityEndPrice=0;if(_reducer.params.add_storage_check_right==true){data.side=data.side;data.panel=data.panel;}else{data.side=data.full_length_side!=undefined?data.full_length_side:data.side;data.panel=data.full_length_panel!=undefined?data.full_length_panel:data.panel;}for(var i=0;i<data.base.length;i++){if(_reducer.const_var.g_v==data.base[i].gauge){b.basic_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_roof_style_price_changed!=true?rightLeanData.basic_price:data.base[i][mapVal];t_c_b=parseFloat(t_c_b)+parseFloat(b.basic_price);CalCulateRoofBasePrice=b.basic_price;}}if(_reducer.params.add_right_front_lean_porch==true){b.porch={'type':'right','length':_reducer.params.leanR_p_d+_reducer.params.leanF_p_d};}if(_reducer.params.add_right_back_lean_porch==true){b.porch={'type':'right','length':_reducer.params.leanR_p_d+_reducer.params.leanB_p_d};}if(_reducer.params.add_right_back_lean_porch==true&&_reducer.params.add_right_front_lean_porch==true){b.porch={'type':'right','length':_reducer.params.leanR_p_d+_reducer.params.leanB_p_d+_reducer.params.leanF_p_d};}var heightFullData=data.full_length_side!=undefined&&data.full_length_side.length>0?data.full_length_side:undefined;if(_reducer.const_var.g_v==14){if(heightFullData[0].double_leg_baserail_cost!=0&&_reducer.params.p_e_l==true){b.height_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_height_price_changed!=true?rightLeanData.height_price:heightFullData[0].double_leg_baserail_cost!=0?heightFullData[0].double_leg_baserail_cost:heightFullData[0].leg_height_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}else{b.height_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_height_price_changed!=true?rightLeanData.height_price:heightFullData[0].leg_height_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}}if(_reducer.const_var.g_v==12){if(_reducer.params.p_e_l==true){if(heightFullData[0].double_leg_baserail_cost_12==0&&heightFullData[0].double_leg_baserail_cost==0){b.height_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_height_price_changed!=true?rightLeanData.height_price:heightFullData[0].leg_height_cost_12!=0?heightFullData[0].leg_height_cost_12:heightFullData[0].leg_height_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}else{b.height_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_height_price_changed!=true?rightLeanData.height_price:heightFullData[0].double_leg_baserail_cost_12!=0?heightFullData[0].double_leg_baserail_cost_12:heightFullData[0].double_leg_baserail_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}}else{b.height_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_height_price_changed!=true?rightLeanData.height_price:heightFullData[0].leg_height_cost_12!=0?heightFullData[0].leg_height_cost_12:heightFullData[0].leg_height_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.height_price);}}// b.height_price = (UpdatePriceRecord==true && const_var.UpdatedPriceData.right_lean_height_price_changed!=true)?rightLeanData.height_price:(data.full_length_side!=undefined && data.full_length_side.length>0)?data.full_length_side[0].leg_height_cost:0;
// t_c_b = parseFloat(t_c_b) + parseFloat(b.height_price); 
if(_reducer.params.p_b_c_b_r_f=="Gable"){var ShowPrice="";if(_reducer.params.p_v_w==true){//t_c_b = t_c_b + (data.gable_end[0].vertical);
if(_reducer.params.leanR_p_e_i!=""&&_reducer.params.leanR_p_e_i!="other"&&_reducer.params.leanR_p_e_i!="0"&&_reducer.const_var.makeCertificateArrayRight[_reducer.params.leanR_p_e_i].certified==1){//t_c_b = ((data.gable_end[0].certified)==0)?parseFloat(t_c_b)+ (parseFloat(data.gable_end[0].uncertified) + parseFloat(data.gable_end[0].vertical)):(parseFloat(data.gable_end[0].vertical_certified) + parseFloat(data.gable_end[0].certified)) + parseFloat(t_c_b);
ShowPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_front_wall_price_changed!=true?rightLeanData.front_wall_price:data.gable_end[0].vertical_certified+data.gable_end[0].certified;}else{//t_c_b = parseFloat(t_c_b) + (parseFloat(data.gable_end[0].uncertified) + parseFloat(data.gable_end[0].vertical));
ShowPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_front_wall_price_changed!=true?rightLeanData.front_wall_price:data.gable_end[0].uncertified+data.gable_end[0].vertical;}}else{if(_reducer.params.leanR_p_e_i!=""&&_reducer.params.leanR_p_e_i!="other"&&_reducer.params.leanR_p_e_i!="0"&&_reducer.const_var.makeCertificateArrayRight[_reducer.params.leanR_p_e_i].certified==1){//t_c_b = ((data.gable_end[0].certified)==0)?parseFloat(t_c_b)+ (parseFloat(data.gable_end[0].uncertified)):(parseFloat(data.gable_end[0].certified)) + parseFloat(t_c_b);
ShowPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_front_wall_price_changed!=true?rightLeanData.front_wall_price:data.gable_end[0].certified;}else{//t_c_b = parseFloat(t_c_b)+ ((data.gable_end[0].uncertified));
ShowPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_front_wall_price_changed!=true?rightLeanData.front_wall_price:data.gable_end[0].uncertified;}}b.front_wall_price=ShowPrice;//(params.p_v_w==true )?(data.gable_end[0].vertical):(data.gable_end[0].uncertified);
t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);CalCulateRoofEndGablePrice=b.front_wall_price;//b.back_wall_price = ShowPrice / 2;//(params.p_v_w==true )?(data.gable_end[0].vertical):(data.gable_end[0].uncertified);
}if(_reducer.params.p_b_c_b_r_b=="Gable"&&_reducer.params.add_storage_check_right!=true){var ShowPrice="";if(_reducer.params.p_v_w==true){//t_c_b = t_c_b + (data.gable_end[0].vertical);
if(_reducer.params.leanR_p_e_i!=""&&_reducer.params.leanR_p_e_i!="other"&&_reducer.params.leanR_p_e_i!="0"&&_reducer.const_var.makeCertificateArrayRight[_reducer.params.leanR_p_e_i].certified==1){//t_c_b = ((data.gable_end[0].certified)==0)?parseFloat(t_c_b)+ (parseFloat(data.gable_end[0].uncertified) + parseFloat(data.gable_end[0].vertical)):(parseFloat(data.gable_end[0].vertical_certified) + parseFloat(data.gable_end[0].certified)) + parseFloat(t_c_b);
ShowPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_back_wall_price_changed!=true?rightLeanData.back_wall_price:data.gable_end[0].vertical_certified+data.gable_end[0].certified;}else{//t_c_b = parseFloat(t_c_b) + (parseFloat(data.gable_end[0].uncertified) + parseFloat(data.gable_end[0].vertical));
ShowPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_back_wall_price_changed!=true?rightLeanData.back_wall_price:data.gable_end[0].uncertified+data.gable_end[0].vertical;}}else{if(_reducer.params.leanR_p_e_i!=""&&_reducer.params.leanR_p_e_i!="other"&&_reducer.params.leanR_p_e_i!="0"&&_reducer.const_var.makeCertificateArrayRight[_reducer.params.leanR_p_e_i].certified==1){//t_c_b = ((data.gable_end[0].certified)==0)?parseFloat(t_c_b)+ (parseFloat(data.gable_end[0].uncertified)):(parseFloat(data.gable_end[0].certified)) + parseFloat(t_c_b);
ShowPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_back_wall_price_changed!=true?rightLeanData.back_wall_price:data.gable_end[0].certified;}else{//t_c_b = parseFloat(t_c_b)+ (parseFloat(data.gable_end[0].uncertified));
ShowPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_back_wall_price_changed!=true?rightLeanData.back_wall_price:data.gable_end[0].uncertified;}}//b.front_wall_price = ShowPrice / 2;//(params.p_v_w==true )?(data.gable_end[0].vertical):(data.gable_end[0].uncertified);
b.back_wall_price=ShowPrice;//(params.p_v_w==true )?(data.gable_end[0].vertical):(data.gable_end[0].uncertified);
t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);CalCulateRoofEndGablePrice=CalCulateRoofEndGablePrice+b.back_wall_price;}if(_reducer.params.p_b_c_b_r_f=="Close"){b.front_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_front_wall_price_changed!=true?rightLeanData.front_wall_price:_reducer.params.p_v_w==true?data.end[0].vertical_ends_cost+data.end[0].end_close_cost:data.end[0].end_close_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);CalCulateRoofEndClosePrice=b.front_wall_price;//b.back_wall_price  = (params.p_v_w==true )?((data.end[0].vertical_ends_cost) )+(data.end[0].end_close_cost):(data.end[0].end_close_cost);       
}if(_reducer.params.p_b_c_b_r_b=="Close"&&_reducer.params.add_storage_check_right!=true){b.back_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_back_wall_price_changed!=true?rightLeanData.back_wall_price:_reducer.params.p_v_w==true?data.end[0].vertical_ends_cost+data.end[0].end_close_cost:data.end[0].end_close_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);CalCulateRoofEndClosePrice=CalCulateRoofEndClosePrice+b.back_wall_price;}if(_reducer.params.p_b_c_b_r_f=="Half_Close"){b.front_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_front_wall_price_changed!=true?rightLeanData.front_wall_price:_reducer.params.p_v_w==true?(data.end[0].half_vertical_ends_cost+data.end[0].half_end_close_cost).toFixed(2):data.end[0].half_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);}if(_reducer.params.p_b_c_b_r_f=="One_Fourth_Close"){b.front_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_front_wall_price_changed!=true?rightLeanData.front_wall_price:_reducer.params.p_v_w==true?(data.end[0].one_fourth_vertical_ends_cost+data.end[0].one_fourth_end_close_cost).toFixed(2):data.end[0].one_fourth_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);}if(_reducer.params.p_b_c_b_r_f=="Three_Fourth_Close"){b.front_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_front_wall_price_changed!=true?rightLeanData.front_wall_price:_reducer.params.p_v_w==true?(data.end[0].three_fourth_vertical_ends_cost+data.end[0].three_fourth_end_close_cost).toFixed(2):data.end[0].three_fourth_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.front_wall_price);}if(_reducer.params.p_b_c_b_r_b=="Half_Close"){b.back_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_back_wall_price_changed!=true?rightLeanData.back_wall_price:_reducer.params.p_v_w==true?(data.end[0].half_vertical_ends_cost+data.end[0].half_end_close_cost).toFixed(2):data.end[0].half_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);}if(_reducer.params.p_b_c_b_r_b=="One_Fourth_Close"){b.back_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_back_wall_price_changed!=true?rightLeanData.back_wall_price:_reducer.params.p_v_w==true?(data.end[0].one_fourth_vertical_ends_cost+data.end[0].one_fourth_end_close_cost).toFixed(2):data.end[0].one_fourth_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);}if(_reducer.params.p_b_c_b_r_b=="Three_Fourth_Close"){b.back_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_back_wall_price_changed!=true?rightLeanData.back_wall_price:_reducer.params.p_v_w==true?(data.end[0].three_fourth_vertical_ends_cost+data.end[0].three_fourth_end_close_cost).toFixed(2):data.end[0].three_fourth_end_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.back_wall_price);}if(_reducer.params.p_b_c_b_r=="Close"){b.side_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_right_wall_price_changed!=true?rightLeanData.side_wall_price:_reducer.params.p_v_w==true?data.side[0].vertical_side_cost+data.side[0].side_close_cost:data.side[0].side_close_cost;t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(_reducer.params.p_b_c_b_r!=="Close"&&_reducer.params.p_b_c_b_r!=="Open"&&_reducer.params.p_b_c_b_r!="Half_Close"&&_reducer.params.p_b_c_b_r!="One_Fourth_Close"&&_reducer.params.p_b_c_b_r!="Three_Fourth_Close"){b.side_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_right_wall_price_changed!=true?rightLeanData.side_wall_price:_reducer.params.p_v_w==true?data.panel[0].vertical_panel_cost*_reducer.params.p_b_c_b_r:data.panel[0].cost*_reducer.params.p_b_c_b_r;t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(_reducer.params.p_b_c_b_r=="Half_Close"){b.side_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_right_wall_price_changed!=true?rightLeanData.side_wall_price:_reducer.params.p_v_w==true?(data.side[0].half_vertical_side_cost+data.side[0].half_side_close_cost).toFixed(2):data.side[0].half_side_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(_reducer.params.p_b_c_b_r=="One_Fourth_Close"){b.side_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_right_wall_price_changed!=true?rightLeanData.side_wall_price:_reducer.params.p_v_w==true?(data.side[0].one_fourth_vertical_side_cost+data.side[0].one_fourth_side_close_cost).toFixed(2):data.side[0].one_fourth_side_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}if(_reducer.params.p_b_c_b_r=="Three_Fourth_Close"){b.side_wall_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_right_wall_price_changed!=true?rightLeanData.side_wall_price:_reducer.params.p_v_w==true?(data.side[0].three_fourth_vertical_side_cost+data.side[0].three_fourth_side_close_cost).toFixed(2):data.side[0].three_fourth_side_close_cost.toFixed(2);t_c_b=parseFloat(t_c_b)+parseFloat(b.side_wall_price);}//t_c_b = (params.p_v_w==true && params.p_b_c_b=="Close")?(data.lengths[0].vertical_side_close_height_prices.length>0)?t_c_b +(data.lengths[0].vertical_side_close_height_prices[0].cost)*2:t_c_b+0:t_c_b + 0;
//t_c_b = (params.b_h_t4==false)?0:t_c_b;
if(_reducer.params.add_storage_check_right==true&&data.utility_side.length>0){b.utility_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_utility_price_changed!=true?rightLeanData.utility_price:_reducer.params.p_v_w==true?data.utility_side[0].vertical_side_cost*2+data.end[0].vertical_ends_cost*2+data.utility_side[0].side_close_cost*2+data.end[0].end_close_cost*2:data.utility_side[0].side_close_cost*2+data.end[0].end_close_cost*2;t_c_b=parseFloat(t_c_b)+parseFloat(b.utility_price);b.utility_length=_reducer.params.add_storage_right;b.has_utility=true;b.utility_vertical=_reducer.params.p_v_w?true:false;b.utility_on_centers=_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s]==undefined?5:_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s];CalCulateRoofUtilityEndPrice=_reducer.params.p_v_w==true?data.end[0].vertical_ends_cost*2+data.end[0].end_close_cost*2:data.end[0].end_close_cost*2;}if(_reducer.const_var.b_r_p_l_to_a.length>0&&_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pR]!=undefined){if(_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pR].cost_type=="%"){var splitVal=_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pR].percentage_of!=undefined&&_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pR].percentage_of!=0?_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pR].percentage_of.split(","):0;var splval=0;if(splitVal!=0){if(splitVal.includes("1")!=false){splval=splval+CalCulateRoofBasePrice;}if(splitVal.includes("2")!=false){splval=splval+CalCulateRoofEndClosePrice;}if(splitVal.includes("3")!=false){splval=splval+CalCulateRoofEndGablePrice;}if(CalCulateRoofUtilityEndPrice!=0){splval=splval+CalCulateRoofUtilityEndPrice;}}else{splval=splval+CalCulateRoofBasePrice;}var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_roof_pitch_price_changed!=true?rightLeanData.roof_pitch_price:_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pR]?splval*_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pR].cost/100:0;b.roof_pitch=_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pR].roof_pitch;b.roof_pitch_name=_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pR].roof_pitch;b.roof_pitch_price=finalCertPrice;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);}else{var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_roof_pitch_price_changed!=true?rightLeanData.roof_pitch_price:_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pR]?_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pR].cost:0;b.roof_pitch=_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pR].roof_pitch;b.roof_pitch_name=_reducer.const_var.b_r_p_l_to_a[_reducer.params.b_l_t_r_pR].roof_pitch;b.roof_pitch_price=finalCertPrice;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);}}else{b.roof_pitch="3/12";b.roof_pitch_name="3/12";b.roof_pitch_price=0;}if(_reducer.params.leanR_p_e_i!=""&&_reducer.params.leanR_p_e_i!="0"&&_reducer.params.leanR_p_e_i!="other"){if(_reducer.params.p_i_s=="1"){if(_reducer.const_var.makeCertificateArrayRight[_reducer.params.leanR_p_e_i].percentage_of_cost!=0){if(_reducer.const_var.makeCertificateArrayRight[_reducer.params.leanR_p_e_i].percentage_of!=undefined&&_reducer.const_var.makeCertificateArrayRight[_reducer.params.leanR_p_e_i].percentage_of=="building_amount"){var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_certificate_price_changed!=true?rightLeanData.certificate_price:_reducer.const_var.makeCertificateArrayRight[_reducer.params.leanR_p_e_i].percentage_of_cost?t_c_b*_reducer.const_var.makeCertificateArrayRight[_reducer.params.leanR_p_e_i].percentage_of_cost/100:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}else{var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_certificate_price_changed!=true?rightLeanData.certificate_price:_reducer.const_var.makeCertificateArrayRight[_reducer.params.leanR_p_e_i].percentage_of_cost?CalCulateRoofBasePrice*_reducer.const_var.makeCertificateArrayRight[_reducer.params.leanR_p_e_i].percentage_of_cost/100:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}}else{var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_certificate_price_changed!=true?rightLeanData.certificate_price:_reducer.const_var.makeCertificateArrayRight[_reducer.params.leanR_p_e_i].certification_concrete_cost?_reducer.const_var.makeCertificateArrayRight[_reducer.params.leanR_p_e_i].certification_concrete_cost:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}}else{if(_reducer.const_var.makeCertificateArrayRight[_reducer.params.leanR_p_e_i].percentage_of_cost!=0){if(_reducer.const_var.makeCertificateArrayRight[_reducer.params.leanR_p_e_i].percentage_of!=undefined&&_reducer.const_var.makeCertificateArrayRight[_reducer.params.leanR_p_e_i].percentage_of=="building_amount"){var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_certificate_price_changed!=true?rightLeanData.certificate_price:_reducer.const_var.makeCertificateArrayRight[_reducer.params.leanR_p_e_i].percentage_of_cost?t_c_b*_reducer.const_var.makeCertificateArrayRight[_reducer.params.leanR_p_e_i].percentage_of_cost/100:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}else{var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_certificate_price_changed!=true?rightLeanData.certificate_price:_reducer.const_var.makeCertificateArrayRight[_reducer.params.leanR_p_e_i].percentage_of_cost?CalCulateRoofBasePrice*_reducer.const_var.makeCertificateArrayRight[_reducer.params.leanR_p_e_i].percentage_of_cost/100:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}//console.log(b.certificate_price,"b.certificate_price",b.certificate_price * certVal);
}else{var finalCertPrice=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_certificate_price_changed!=true?rightLeanData.certificate_price:_reducer.const_var.makeCertificateArrayRight[_reducer.params.leanR_p_e_i].cost?_reducer.const_var.makeCertificateArrayRight[_reducer.params.leanR_p_e_i].cost:0;t_c_b=parseFloat(t_c_b)+parseFloat(finalCertPrice);b.certificate_price=finalCertPrice;}}}if(_reducer.params.leanR_p_e_i=="other"){b.certificate={'gauge':0,'certified':1,'has_double_leg':0,'has_ladder_leg':0,'has_other_leg':0,'height':0,'id':-1,'cost':0,'is_default':"no",'length':0,'map_id':0,'name':"Other"};b.certificate_other_name=_reducer.params.leanR_p_e_i_other!=''?_reducer.params.leanR_p_e_i_other:'Other';b.certificate_price=UpdatePriceRecord==true&&_reducer.const_var.UpdatedPriceData.right_lean_certificate_price_changed!=true?rightLeanData.certificate_price:0;t_c_b=parseFloat(t_c_b)+parseFloat(b.certificate_price);}if(_reducer.params.continous_right_lean==true){b.continous_lean=true;}else{b.continous_lean=false;}b.pricing_data=data;b.t_c_b=parseFloat(t_c_b);_reducer.const_var.leanto.push(b);_reducer.const_var.UpdatedPriceData.leanto.push(b);}else{removeDataFromArray(2);}cP(_reducer.const_var.a_p_d_a);};exports.cPforRLeanOnly=cPforRLeanOnly;var removeDataFromArray=function removeDataFromArray(val){// console.log(const_var.leanto,"const_var.leanto",val);
for(var i=0;i<=_reducer.const_var.leanto.length-1;i++){if(_reducer.const_var.leanto[i].leanto_type==val){_reducer.const_var.leanto.splice(i,1);}}// console.log(const_var.leanto,"const_var.leanto",val);
};exports.removeDataFromArray=removeDataFromArray;var removeDataFromArrayCompare=function removeDataFromArrayCompare(val){for(var i=0;i<=_reducer.const_var.leantoCompare.length-1;i++){if(_reducer.const_var.leantoCompare[i].leanto_type==val){_reducer.const_var.leantoCompare.splice(i,1);}}};exports.removeDataFromArrayCompare=removeDataFromArrayCompare;var SetPriceforComponent=function SetPriceforComponent(data){//const_var.entry_points = data;
data.map(function(val,index){_reducer.const_var.entry_points.map(function(res,i){if(res.uniqueId==val.uniqueId){_reducer.const_var.entry_points[i].entry_price=val.entry_price;_reducer.const_var.entry_points[i].entry_trim_kit_price=val.entry_trim_kit_price;_reducer.const_var.entry_points[i].entry_header_seal_price=val.entry_header_seal_price;_reducer.const_var.entry_points[i].entry_chain_hoist_price=val.entry_chain_hoist_price;_reducer.const_var.entry_points[i].entry_automatic_openers_price=val.entry_automatic_openers_price;_reducer.const_var.entry_points[i].entry_garageDoor_color_price=val.entry_garageDoor_color_price==undefined?0:Number(val.entry_garageDoor_color_price);}});});// console.log(const_var.entry_points,"const_var.entry_points")
// data.entry_points.map((val, index) => {
//     var i = const_var.d_w_a_r.length;
//     while (i--) {
//         if(const_var.d_w_a_r[i].uniqueId==val.uniqueId)
//         {
//             if((const_var.d_w_a_r[i].pos=="left" || const_var.d_w_a_r[i].pos=="right"))
//             {
//                const_var.d_w_a_r[i].SidePrice = parseInt(val.entry_price);
//             }if((const_var.d_w_a_r[i].pos=="front" || const_var.d_w_a_r[i].pos=="back"))
//             {
//                 const_var.d_w_a_r[i].price = parseInt(val.entry_price);
//             }
//             const_var.d_w_a_r[i].trimkitPrice = parseInt(val.entry_trim_kit_price);
//             const_var.d_w_a_r[i].header_seal_price = parseInt(val.entry_header_seal_price);
//             const_var.d_w_a_r[i].chain_hoist_price = parseInt(val.entry_chain_hoist_price);
//         } 
//     }
//     var ii = const_var.entry_points.length;
//     while (ii--) {
//         if(const_var.entry_points[ii].uniqueId ==val.uniqueId)
//         {
//             const_var.entry_points[ii]['entry_price'] = parseInt(val.entry_price);
//             const_var.entry_points[ii]['entry_chain_hoist_price'] = parseInt(val.entry_chain_hoist_price);
//             const_var.entry_points[ii]['entry_header_seal_price'] = parseInt(val.entry_header_seal_price);
//             const_var.entry_points[ii]['entry_trim_kit_price'] = parseInt(val.entry_trim_kit_price);
//         }
//     }  
// })
};exports.SetPriceforComponent=SetPriceforComponent;var IsNumeric=function IsNumeric(newVal){return /^-{0,1}\d*\.{0,1}\d+$/.test(newVal);};var updatePriceCalculation=function updatePriceCalculation(newVal,oldVal,pointKey,leanVal,objIndex,uniqueId,elementObjIndex,extraItemType){//newVal = parseFloat(newVal);
var data=IsNumeric(newVal);var finalPrice=0;newVal=newVal.replace(/^0+/,'');var regex=/^\d+(\.\d{0,2})?$/g;if(!regex.test(newVal)){if(isNaN(parseFloat(newVal))==true||newVal==""){newVal=0;}else{newVal=newVal.split(".");newVal=newVal[0]+'.'+newVal[1].substring(0,2);}}// var regex = /^\d+(\.\d{0,2})?$/g;
// if (!regex.test(newVal)) {
//     newVal = 0;
// }
if(isNaN(parseFloat(newVal))==true){newVal=0;_reducer.const_var.UpdatedPriceData[pointKey]=0;}if(oldVal!="extraitems"&&leanVal==undefined){_reducer.const_var.UpdatedPriceData[pointKey]=newVal;}// if(oldVal=="extraitems" && isNaN(pointKey)==false && leanVal==undefined)
// {
//     const_var.ExtraItemsFeaturesArray[pointKey].cost = parseInt(newVal);
// }
if(uniqueId!=undefined){var ii=_reducer.const_var.entry_points.length;while(ii--){if(_reducer.const_var.entry_points[ii].uniqueId==uniqueId){_reducer.const_var.entry_points[ii][pointKey]=newVal;}}}if(oldVal=="extraitems"&&leanVal==undefined){_reducer.const_var.UpdatedPriceData.elements[pointKey].item_price=newVal;_reducer.const_var.UpdatedPriceData.elements[pointKey].is_edit=true;if(elementObjIndex!==undefined&&extraItemType=="extraitemsCheckbox"){_reducer.const_var.ExtraItemsFeaturesArray[elementObjIndex].cost=newVal;}if(elementObjIndex!==undefined&&extraItemType=="extraitemsCheckboxwithQuantity"){_reducer.const_var.ExtraItemsFeaturesQuantityArray[elementObjIndex].cost=newVal;}}// if(const_var.UpdatedPriceData['roof_style_price']==0)
// {
//     const_var.UpdatedPriceData['roof_style_price'] = oldVal;
// }
if(leanVal!=undefined){if(_reducer.const_var.UpdatedPriceData.leanto.length>0){_reducer.const_var.UpdatedPriceData.leanto[objIndex][pointKey]=newVal;// if(const_var.UpdatedPriceData.leanto[objIndex]['basic_price']==0)
// {
//     const_var.UpdatedPriceData.leanto[objIndex]['basic_price'] = oldVal;
// }
if(leanVal=="left"){cPforLLeanOnly(_reducer.const_var.leanGetDataLeft,objIndex,_reducer.const_var.UpdatedPriceData.leanto[objIndex]);}if(leanVal=="right"){cPforRLeanOnly(_reducer.const_var.leanGetDataRight,objIndex,_reducer.const_var.UpdatedPriceData.leanto[objIndex]);}}}else{cP();}};exports.updatePriceCalculation=updatePriceCalculation;var makeCertificateArrayLeft=function makeCertificateArrayLeft(type){// console.log(const_var.makeCertificateArrayLeft,"const_var.makeCertificateArrayLeft")
if(type=="left"){// const_var.leftCertArr = {};
_reducer.const_var.leftCertArr["Select"]=0;// console.log(const_var.leanGetDataLeft.certificate.length,"const_var.leanGetDataLeft.certificate.length");
if(_reducer.const_var.leanGetDataLeft.certificate!=undefined){if(_reducer.const_var.leanGetDataLeft!=undefined&&_reducer.const_var.leanGetDataLeft.certificate.length>0){var newData=_reducer.const_var.leanGetDataLeft.certificate.filter(function(certificate){return certificate.certificate_id==_reducer.params.lean_p_e_i;});if(newData!=undefined&&newData.length==0){_reducer.params.lean_p_e_i="0";}}}if(_reducer.const_var.leanGetDataLeft!=undefined&&_reducer.const_var.leanGetDataLeft.certificate!=undefined&&_reducer.const_var.leanGetDataLeft.certificate.length>0){for(var i=0;i<=_reducer.const_var.leanGetDataLeft.certificate.length-1;i++){if(_reducer.params.p_e_l==true){if(_reducer.const_var.leanGetDataLeft.certificate[i].has_other_leg==1){_reducer.const_var.makeCertificateArrayLeft[_reducer.const_var.leanGetDataLeft.certificate[i].certificate_id]=_reducer.const_var.leanGetDataLeft.certificate[i];if(_reducer.const_var.leanGetDataLeft.certificate[i].gauge==0||_reducer.params.gauge_val==_reducer.const_var.leanGetDataLeft.certificate[i].gauge){_reducer.const_var.leftCertArr[_reducer.const_var.leanGetDataLeft.certificate[i].name]=_reducer.const_var.leanGetDataLeft.certificate[i].certificate_id;}if(_reducer.const_var.leanGetDataLeft.certificate[i].is_default=="yes"&&(_reducer.const_var.leanGetDataLeft.certificate[i].gauge==0||_reducer.params.gauge_val==_reducer.const_var.leanGetDataLeft.certificate[i].gauge)){//params.lean_p_e_i =(params.lean_p_e_i=="Select")?const_var.leanGetDataLeft.certificate[i].certificate_id:params.lean_p_e_i;
if(_reducer.const_var.crmSetting.is_Edit==true){_reducer.params.lean_p_e_i=_reducer.params.lean_p_e_i!=""||_reducer.params.lean_p_e_i!="Select"?_reducer.params.lean_p_e_i:_reducer.const_var.leanGetDataLeft.certificate[i].certificate_id;}else{_reducer.params.lean_p_e_i=_reducer.params.lean_p_e_i=="Select"?_reducer.const_var.leanGetDataLeft.certificate[i].certificate_id:_reducer.params.lean_p_e_i;if(_reducer.params.lean_p_e_i==0){_reducer.params.lean_p_e_i=_reducer.params.lean_p_e_i==0?_reducer.const_var.leanGetDataLeft.certificate[i].certificate_id:_reducer.params.lean_p_e_i;}}}}}else{if(_reducer.const_var.leanGetDataLeft.certificate[i].has_other_leg==0){_reducer.const_var.makeCertificateArrayLeft[_reducer.const_var.leanGetDataLeft.certificate[i].certificate_id]=_reducer.const_var.leanGetDataLeft.certificate[i];if(_reducer.const_var.leanGetDataLeft.certificate[i].gauge==0||_reducer.params.gauge_val==_reducer.const_var.leanGetDataLeft.certificate[i].gauge){_reducer.const_var.leftCertArr[_reducer.const_var.leanGetDataLeft.certificate[i].name]=_reducer.const_var.leanGetDataLeft.certificate[i].certificate_id;}if(_reducer.const_var.leanGetDataLeft.certificate[i].is_default=="yes"&&(_reducer.const_var.leanGetDataLeft.certificate[i].gauge==0||_reducer.params.gauge_val==_reducer.const_var.leanGetDataLeft.certificate[i].gauge)){//params.lean_p_e_i =(params.lean_p_e_i=="Select")?const_var.leanGetDataLeft.certificate[i].certificate_id:params.lean_p_e_i;
if(_reducer.const_var.crmSetting.is_Edit==true){_reducer.params.lean_p_e_i=_reducer.params.lean_p_e_i!=""||_reducer.params.lean_p_e_i!="Select"?_reducer.params.lean_p_e_i:_reducer.const_var.leanGetDataLeft.certificate[i].certificate_id;}else{_reducer.params.lean_p_e_i=_reducer.params.lean_p_e_i=="Select"?_reducer.const_var.leanGetDataLeft.certificate[i].certificate_id:_reducer.params.lean_p_e_i;if(_reducer.params.lean_p_e_i==0){_reducer.params.lean_p_e_i=_reducer.params.lean_p_e_i==0?_reducer.const_var.leanGetDataLeft.certificate[i].certificate_id:_reducer.params.lean_p_e_i;}}}}}}}if(_reducer.const_var.loginSession==true){_reducer.const_var.leftCertArr['Other Rating/Certification']='other';}}if(type=="front"){// const_var.leftCertArr = {};
_reducer.const_var.frontCertArr["Select"]=0;// console.log(const_var.leanGetDataFront.certificate.length,"const_var.leanGetDataLeft.certificate.length");
if(_reducer.const_var.leanGetDataFront!=undefined&&_reducer.const_var.leanGetDataFront.certificate.length>0){var _newData=_reducer.const_var.leanGetDataFront.certificate.filter(function(certificate){return certificate.certificate_id==_reducer.params.leanF_p_e_i;});if(_newData!=undefined&&_newData.length==0){_reducer.params.leanF_p_e_i="0";}}if(_reducer.const_var.leanGetDataFront!=undefined&&_reducer.const_var.leanGetDataFront.certificate!=undefined&&_reducer.const_var.leanGetDataFront.certificate.length>0){for(var i=0;i<=_reducer.const_var.leanGetDataFront.certificate.length-1;i++){if(_reducer.params.p_e_l==true){if(_reducer.const_var.leanGetDataFront.certificate[i].has_other_leg==1){_reducer.const_var.makeCertificateArrayFront[_reducer.const_var.leanGetDataFront.certificate[i].certificate_id]=_reducer.const_var.leanGetDataFront.certificate[i];if(_reducer.const_var.leanGetDataFront.certificate[i].gauge==0||_reducer.params.gauge_val==_reducer.const_var.leanGetDataFront.certificate[i].gauge){_reducer.const_var.leftCertArr[_reducer.const_var.leanGetDataFront.certificate[i].name]=_reducer.const_var.leanGetDataFront.certificate[i].certificate_id;}if(_reducer.const_var.leanGetDataFront.certificate[i].is_default=="yes"&&(_reducer.const_var.leanGetDataFront.certificate[i].gauge==0||_reducer.params.gauge_val==_reducer.const_var.leanGetDataFront.certificate[i].gauge)){//params.leanF_p_e_i =(params.leanF_p_e_i=="Select")?const_var.leanGetDataFront.certificate[i].certificate_id:params.leanF_p_e_i;
if(_reducer.const_var.crmSetting.is_Edit==true){_reducer.params.leanF_p_e_i=_reducer.params.leanF_p_e_i!=""||_reducer.params.leanF_p_e_i!="Select"?_reducer.params.leanF_p_e_i:_reducer.const_var.leanGetDataFront.certificate[i].certificate_id;}else{_reducer.params.leanF_p_e_i=_reducer.params.leanF_p_e_i=="Select"?_reducer.const_var.leanGetDataFront.certificate[i].certificate_id:_reducer.params.leanF_p_e_i;if(_reducer.params.leanF_p_e_i==0){_reducer.params.leanF_p_e_i=_reducer.params.leanF_p_e_i==0?_reducer.const_var.leanGetDataFront.certificate[i].certificate_id:_reducer.params.leanF_p_e_i;}}}}}else{if(_reducer.const_var.leanGetDataFront.certificate[i].has_other_leg==0){_reducer.const_var.makeCertificateArrayFront[_reducer.const_var.leanGetDataFront.certificate[i].certificate_id]=_reducer.const_var.leanGetDataFront.certificate[i];if(_reducer.const_var.leanGetDataFront.certificate[i].gauge==0||_reducer.params.gauge_val==_reducer.const_var.leanGetDataFront.certificate[i].gauge){_reducer.const_var.leftCertArr[_reducer.const_var.leanGetDataFront.certificate[i].name]=_reducer.const_var.leanGetDataFront.certificate[i].certificate_id;}if(_reducer.const_var.leanGetDataFront.certificate[i].is_default=="yes"&&(_reducer.const_var.leanGetDataFront.certificate[i].gauge==0||_reducer.params.gauge_val==_reducer.const_var.leanGetDataFront.certificate[i].gauge)){//params.leanF_p_e_i =(params.leanF_p_e_i=="Select")?const_var.leanGetDataFront.certificate[i].certificate_id:params.leanF_p_e_i;
if(_reducer.const_var.crmSetting.is_Edit==true){_reducer.params.leanF_p_e_i=_reducer.params.leanF_p_e_i!=""||_reducer.params.leanF_p_e_i!="Select"?_reducer.params.leanF_p_e_i:_reducer.const_var.leanGetDataFront.certificate[i].certificate_id;}else{_reducer.params.leanF_p_e_i=_reducer.params.leanF_p_e_i=="Select"?_reducer.const_var.leanGetDataFront.certificate[i].certificate_id:_reducer.params.leanF_p_e_i;if(_reducer.params.leanF_p_e_i==0){_reducer.params.leanF_p_e_i=_reducer.params.leanF_p_e_i==0?_reducer.const_var.leanGetDataFront.certificate[i].certificate_id:_reducer.params.leanF_p_e_i;}}}}}}}if(_reducer.const_var.loginSession==true){_reducer.const_var.frontCertArr['Other Rating/Certification']='other';}}if(type=="back"){// const_var.leftCertArr = {};
_reducer.const_var.backCertArr["Select"]=0;if(_reducer.const_var.leanGetDataBack!=''&&_reducer.const_var.leanGetDataBack!=undefined&&_reducer.const_var.leanGetDataBack.certificate.length>0){var _newData2=_reducer.const_var.leanGetDataBack.certificate.filter(function(certificate){return certificate.certificate_id==_reducer.params.leanB_p_e_i;});if(_newData2!=undefined&&_newData2.length==0){_reducer.params.leanB_p_e_i="0";}}if(_reducer.const_var.leanGetDataBack!=undefined&&_reducer.const_var.leanGetDataBack.certificate!=undefined&&_reducer.const_var.leanGetDataBack.certificate.length>0){for(var i=0;i<=_reducer.const_var.leanGetDataBack.certificate.length-1;i++){if(_reducer.params.p_e_l==true){if(_reducer.const_var.leanGetDataBack.certificate[i].has_other_leg==1){_reducer.const_var.makeCertificateArrayBack[_reducer.const_var.leanGetDataBack.certificate[i].certificate_id]=_reducer.const_var.leanGetDataBack.certificate[i];if(_reducer.const_var.leanGetDataBack.certificate[i].gauge==0||_reducer.params.gauge_val==_reducer.const_var.leanGetDataBack.certificate[i].gauge){_reducer.const_var.leftCertArr[_reducer.const_var.leanGetDataBack.certificate[i].name]=_reducer.const_var.leanGetDataBack.certificate[i].certificate_id;}if(_reducer.const_var.leanGetDataBack.certificate[i].is_default=="yes"&&(_reducer.const_var.leanGetDataBack.certificate[i].gauge==0||_reducer.params.gauge_val==_reducer.const_var.leanGetDataBack.certificate[i].gauge)){//params.leanB_p_e_i =(params.leanB_p_e_i=="Select")?const_var.leanGetDataBack.certificate[i].certificate_id:params.leanB_p_e_i;
if(_reducer.const_var.crmSetting.is_Edit==true){_reducer.params.leanB_p_e_i=_reducer.params.leanB_p_e_i!=""||_reducer.params.leanB_p_e_i!="Select"?_reducer.params.leanB_p_e_i:_reducer.const_var.leanGetDataBack.certificate[i].certificate_id;}else{_reducer.params.leanB_p_e_i=_reducer.params.leanB_p_e_i=="Select"?_reducer.const_var.leanGetDataBack.certificate[i].certificate_id:_reducer.params.leanB_p_e_i;if(_reducer.params.leanB_p_e_i==0){_reducer.params.leanB_p_e_i=_reducer.params.leanB_p_e_i==0?_reducer.const_var.leanGetDataBack.certificate[i].certificate_id:_reducer.params.leanB_p_e_i;}}}}}else{if(_reducer.const_var.leanGetDataBack.certificate[i].has_other_leg==0){_reducer.const_var.makeCertificateArrayBack[_reducer.const_var.leanGetDataBack.certificate[i].certificate_id]=_reducer.const_var.leanGetDataBack.certificate[i];if(_reducer.const_var.leanGetDataBack.certificate[i].gauge==0||_reducer.params.gauge_val==_reducer.const_var.leanGetDataBack.certificate[i].gauge){_reducer.const_var.leftCertArr[_reducer.const_var.leanGetDataBack.certificate[i].name]=_reducer.const_var.leanGetDataBack.certificate[i].certificate_id;}if(_reducer.const_var.leanGetDataBack.certificate[i].is_default=="yes"&&(_reducer.const_var.leanGetDataBack.certificate[i].gauge==0||_reducer.params.gauge_val==_reducer.const_var.leanGetDataBack.certificate[i].gauge)){//params.leanB_p_e_i =(params.leanB_p_e_i=="Select")?const_var.leanGetDataBack.certificate[i].certificate_id:params.leanB_p_e_i;
if(_reducer.const_var.crmSetting.is_Edit==true){_reducer.params.leanB_p_e_i=_reducer.params.leanB_p_e_i!=""||_reducer.params.leanB_p_e_i!="Select"?_reducer.params.leanB_p_e_i:_reducer.const_var.leanGetDataBack.certificate[i].certificate_id;}else{_reducer.params.leanB_p_e_i=_reducer.params.leanB_p_e_i=="Select"?_reducer.const_var.leanGetDataBack.certificate[i].certificate_id:_reducer.params.leanB_p_e_i;if(_reducer.params.leanB_p_e_i==0){_reducer.params.leanB_p_e_i=_reducer.params.leanB_p_e_i==0?_reducer.const_var.leanGetDataBack.certificate[i].certificate_id:_reducer.params.leanB_p_e_i;}}}}}}}if(_reducer.const_var.loginSession==true){_reducer.const_var.backCertArr['Other Rating/Certification']='other';}}if(type=="right"){// const_var.rightCertArr = {};
_reducer.const_var.rightCertArr['Select']=0;if(_reducer.const_var.leanGetDataRight!=''&&_reducer.const_var.leanGetDataRight!=undefined&&_reducer.const_var.leanGetDataRight.certificate.length>0){var _newData3=_reducer.const_var.leanGetDataRight.certificate.filter(function(certificate){return certificate.certificate_id==_reducer.params.leanR_p_e_i;});if(_newData3!=undefined&&_newData3.length==0){_reducer.params.leanR_p_e_i="0";}}if(_reducer.const_var.leanGetDataRight!=undefined&&_reducer.const_var.leanGetDataRight.certificate!=undefined&&_reducer.const_var.leanGetDataRight.certificate.length>0){for(var i=0;i<=_reducer.const_var.leanGetDataRight.certificate.length-1;i++){if(_reducer.params.p_e_l==true){if(_reducer.const_var.leanGetDataRight.certificate[i].has_other_leg==1){_reducer.const_var.makeCertificateArrayRight[_reducer.const_var.leanGetDataRight.certificate[i].certificate_id]=_reducer.const_var.leanGetDataRight.certificate[i];if(_reducer.const_var.leanGetDataRight.certificate[i].gauge==0||_reducer.params.gauge_val==_reducer.const_var.leanGetDataRight.certificate[i].gauge){_reducer.const_var.rightCertArr[_reducer.const_var.leanGetDataRight.certificate[i].name]=_reducer.const_var.leanGetDataRight.certificate[i].certificate_id;}if(_reducer.const_var.leanGetDataRight.certificate[i].is_default=="yes"&&(_reducer.const_var.leanGetDataRight.certificate[i].gauge==0||_reducer.params.gauge_val==_reducer.const_var.leanGetDataRight.certificate[i].gauge)){if(_reducer.const_var.crmSetting.is_Edit==true){_reducer.params.leanR_p_e_i=_reducer.params.leanR_p_e_i!=""||_reducer.params.leanR_p_e_i!="Select"?_reducer.params.leanR_p_e_i:_reducer.const_var.leanGetDataRight.certificate[i].certificate_id;}else{_reducer.params.leanR_p_e_i=_reducer.params.leanR_p_e_i=="Select"?_reducer.const_var.leanGetDataRight.certificate[i].certificate_id:_reducer.params.leanR_p_e_i;if(_reducer.params.leanR_p_e_i==0){_reducer.params.leanR_p_e_i=_reducer.params.leanR_p_e_i==0?_reducer.const_var.leanGetDataRight.certificate[i].certificate_id:_reducer.params.leanR_p_e_i;}}}}}else{if(_reducer.const_var.leanGetDataRight.certificate[i].has_other_leg==0){_reducer.const_var.makeCertificateArrayRight[_reducer.const_var.leanGetDataRight.certificate[i].certificate_id]=_reducer.const_var.leanGetDataRight.certificate[i];if(_reducer.const_var.leanGetDataRight.certificate[i].gauge==0||_reducer.params.gauge_val==_reducer.const_var.leanGetDataRight.certificate[i].gauge){_reducer.const_var.rightCertArr[_reducer.const_var.leanGetDataRight.certificate[i].name]=_reducer.const_var.leanGetDataRight.certificate[i].certificate_id;}if(_reducer.const_var.leanGetDataRight.certificate[i].is_default=="yes"&&(_reducer.const_var.leanGetDataRight.certificate[i].gauge==0||_reducer.params.gauge_val==_reducer.const_var.leanGetDataRight.certificate[i].gauge)){if(_reducer.const_var.crmSetting.is_Edit==true){_reducer.params.leanR_p_e_i=_reducer.params.leanR_p_e_i!=""||_reducer.params.leanR_p_e_i!="Select"?_reducer.params.leanR_p_e_i:_reducer.const_var.leanGetDataRight.certificate[i].certificate_id;}else{_reducer.params.leanR_p_e_i=_reducer.params.leanR_p_e_i=="Select"?_reducer.const_var.leanGetDataRight.certificate[i].certificate_id:_reducer.params.leanR_p_e_i;if(_reducer.params.leanR_p_e_i==0){_reducer.params.leanR_p_e_i=_reducer.params.leanR_p_e_i==0?_reducer.const_var.leanGetDataRight.certificate[i].certificate_id:_reducer.params.leanR_p_e_i;}}//params.leanR_p_e_i =(params.leanR_p_e_i=="Select")?const_var.leanGetDataRight.certificate[i].certificate_id:params.leanR_p_e_i;
}}}}}if(_reducer.const_var.loginSession==true){_reducer.const_var.rightCertArr['Other Rating/Certification']='other';}}};exports.makeCertificateArrayLeft=makeCertificateArrayLeft;var makeCertificateArray=function makeCertificateArray(){_reducer.const_var.c_f_a=[];_reducer.const_var.c_f_a_per=[];_reducer.const_var.c_f_a_sCer=[];_reducer.const_var.c_f_aCer=[];_reducer.const_var.c_f_i_a=[];_reducer.const_var.main_extraItems_arr={"Select":"Select"};_reducer.const_var.c_f_b_a=[];_reducer.const_var.e_i_a=[];var data=_reducer.const_var.a_p_d_a;_reducer.params.p_e_i=_reducer.params.p_e_i!=""?_reducer.params.p_e_i:"Select";if(data.certificate.length==0){_reducer.const_var.main_extraItems_arr=[];}for(var i=0;i<=data.certificate.length-1;i++){if(_reducer.params.p_e_l==true){if(data.certificate[i].has_other_leg==1){_reducer.const_var.c_f_aCer[data.certificate[i].certificate_id]=data.certificate[i];_reducer.const_var.c_f_a_sCer[data.certificate[i].certificate_id]=data.certificate[i].certified;_reducer.const_var.c_f_a[data.certificate[i].certificate_id]=data.certificate[i].cost;// + (data.Certificate[i].certification_concrete_cost);
_reducer.const_var.c_f_a_per[data.certificate[i].certificate_id]=data.certificate[i].percentage_of_cost!=undefined?data.certificate[i].percentage_of_cost:0;_reducer.const_var.c_f_i_a[data.certificate[i].certificate_id]=data.certificate[i].certification_concrete_cost;_reducer.const_var.e_i_a.push(data.certificate[i]);if(data.certificate[i].gauge==0||_reducer.params.gauge_val==data.certificate[i].gauge){_reducer.const_var.main_extraItems_arr[data.certificate[i].name]=data.certificate[i].certificate_id;}_reducer.const_var.g_v_a[data.certificate[i].certificate_id]=data.certificate[i].gauge;if(data.certificate[i].is_default=="yes"&&(data.certificate[i].gauge==0||_reducer.params.gauge_val==data.certificate[i].gauge)){if(_reducer.const_var.crmSetting.is_Edit==true){_reducer.params.p_e_i=_reducer.params.p_e_i!=""||_reducer.params.p_e_i!="Select"?_reducer.params.p_e_i:data.certificate[i].certificate_id;}else{_reducer.params.p_e_i=data.certificate[i].certificate_id;}}}}else{if(data.certificate[i].has_other_leg==0){_reducer.const_var.c_f_aCer[data.certificate[i].certificate_id]=data.certificate[i];_reducer.const_var.c_f_a_sCer[data.certificate[i].certificate_id]=data.certificate[i].certified;_reducer.const_var.c_f_a[data.certificate[i].certificate_id]=data.certificate[i].cost;// + (data.Certificate[i].certification_concrete_cost);
_reducer.const_var.c_f_a_per[data.certificate[i].certificate_id]=data.certificate[i].percentage_of_cost!=undefined?data.certificate[i].percentage_of_cost:0;_reducer.const_var.c_f_i_a[data.certificate[i].certificate_id]=data.certificate[i].certification_concrete_cost;_reducer.const_var.e_i_a.push(data.certificate[i]);if(data.certificate[i].gauge==0||_reducer.params.gauge_val==data.certificate[i].gauge){_reducer.const_var.main_extraItems_arr[data.certificate[i].name]=data.certificate[i].certificate_id;}_reducer.const_var.g_v_a[data.certificate[i].certificate_id]=data.certificate[i].gauge;if(data.certificate[i].is_default=="yes"&&(data.certificate[i].gauge==0||_reducer.params.gauge_val==data.certificate[i].gauge)){if(_reducer.const_var.crmSetting.is_Edit==true){_reducer.params.p_e_i=_reducer.params.p_e_i!=""||_reducer.params.p_e_i!="Select"?_reducer.params.p_e_i:data.certificate[i].certificate_id;}else{_reducer.params.p_e_i=data.certificate[i].certificate_id;}}}}}if(_reducer.const_var.loginSession==true){if(_reducer.const_var.b_o_J_1[_reducer.params.p_b_t]=="Custom Buildings"){_reducer.params.p_e_i="other";}_reducer.const_var.main_extraItems_arr['Other Rating/Certification']="other";}//console.log(params.gauge_val,"params.gauge_val",const_var.main_extraItems_arr) 
};exports.makeCertificateArray=makeCertificateArray;var EditloadDefaultBuilding=function EditloadDefaultBuilding(state,data,sourceData,building_images,personlInfo,statesRec){var installationValueArray={"Concrete":1,"Asphalt":2,"Ground":3,"Gravel":4};var editData=data.building;_reducer.const_var.defaultProData=editData;_reducer.params.p_w=editData.width;_reducer.params.p_d=editData.length;_reducer.params.p_h=editData.height;_reducer.params.p_w_c_n=editData.wainscot?true:false;_reducer.params.p_b_t=editData.building_type;var deductVal=parseInt(editData.roof_style)-1;state.defaultRoof=_reducer.const_var.TypeEnumINDEX[editData.roof_style];//String(deductVal);
_reducer.params.p_r_s=parseInt(editData.roof_style);//const_var.roof_style[state.defaultRoof].roof_id;
_reducer.params.building_type_name=editData.display_building_type_name!=undefined?editData.display_building_type_name:editData.building_type_name;_reducer.params.other_building_type_name=editData.other_building_type_name;_reducer.params.p_s_n=editData.state;_reducer.params.m_s_n=editData.manufacturer;_reducer.params.checkeditName=editData.checkeditName!=undefined?editData.checkeditName:false;var newVal=editData.installation_surface.substring(0,4);if(newVal=="grav"){editData.installation_surface="gravel";}else if(newVal=="asph"){editData.installation_surface="asphalt";}else if(newVal=="grou"){editData.installation_surface="ground";}else{editData.installation_surface="concrete";}_reducer.params.p_i_s=installationValueArray[upperCaseFirst(editData.installation_surface)];_reducer.params.p_b_c_b_l_f=_reducer.const_var.newLeanArr['left']!=undefined&&_reducer.const_var.newLeanArr['left'].front_wall!=null?_reducer.const_var.TypeWallNameForEdit[_reducer.const_var.newLeanArr['left'].front_wall]:_reducer.params.p_b_c_b_l_f;_reducer.params.p_b_c_b_l_b=_reducer.const_var.newLeanArr['left']!=undefined&&_reducer.const_var.newLeanArr['left'].back_wall!=null?_reducer.const_var.TypeWallNameForEdit[_reducer.const_var.newLeanArr['left'].back_wall]:_reducer.params.p_b_c_b_l_b;if(_reducer.const_var.newLeanArr['left']!=undefined&&_reducer.const_var.newLeanArr['left'].side_wall!=null){if(_reducer.const_var.newLeanArr['left'].side_wall=="one_fourth_close"||_reducer.const_var.newLeanArr['left'].side_wall=="three_fourth_close"||_reducer.const_var.newLeanArr['left'].side_wall=="half_close"){_reducer.params.p_b_c_b_l=_reducer.const_var.TypeWallNameForEdit[_reducer.const_var.newLeanArr['left'].side_wall];}else{_reducer.params.p_b_c_b_l=_reducer.const_var.newLeanArr['left']!=undefined&&_reducer.const_var.newLeanArr['left'].side_wall!=null?upperCaseFirst(_reducer.const_var.newLeanArr['left'].side_wall):_reducer.params.p_b_c_b_l;}}else{_reducer.params.p_b_c_b_l=_reducer.const_var.newLeanArr['left']!=undefined&&_reducer.const_var.newLeanArr['left'].side_wall!=null?upperCaseFirst(_reducer.const_var.newLeanArr['left'].side_wall):_reducer.params.p_b_c_b_l;}_reducer.params.p_b_c_b_r_f=_reducer.const_var.newLeanArr['right']!=undefined&&_reducer.const_var.newLeanArr['right']!=null&&_reducer.const_var.newLeanArr['right'].front_wall!=null?_reducer.const_var.TypeWallNameForEdit[_reducer.const_var.newLeanArr['right'].front_wall]:_reducer.params.p_b_c_b_r_f;_reducer.params.p_b_c_b_r_b=_reducer.const_var.newLeanArr['right']!=undefined&&_reducer.const_var.newLeanArr['right']!=null&&_reducer.const_var.newLeanArr['right'].back_wall!=null?_reducer.const_var.TypeWallNameForEdit[_reducer.const_var.newLeanArr['right'].back_wall]:_reducer.params.p_b_c_b_r_b;if(_reducer.const_var.newLeanArr['right']!=undefined&&_reducer.const_var.newLeanArr['right'].side_wall!=null){if(_reducer.const_var.newLeanArr['right'].side_wall=="one_fourth_close"||_reducer.const_var.newLeanArr['right'].side_wall=="three_fourth_close"||_reducer.const_var.newLeanArr['right'].side_wall=="half_close"){_reducer.params.p_b_c_b_r=_reducer.const_var.TypeWallNameForEdit[_reducer.const_var.newLeanArr['right'].side_wall];}else{_reducer.params.p_b_c_b_r=_reducer.const_var.newLeanArr['right']!=undefined&&_reducer.const_var.newLeanArr['right']!=null&&_reducer.const_var.newLeanArr['right'].side_wall!=null?upperCaseFirst(_reducer.const_var.newLeanArr['right'].side_wall):_reducer.params.p_b_c_b_r;}}else{_reducer.params.p_b_c_b_r=_reducer.const_var.newLeanArr['right']!=undefined&&_reducer.const_var.newLeanArr['right']!=null&&_reducer.const_var.newLeanArr['right'].side_wall!=null?upperCaseFirst(_reducer.const_var.newLeanArr['right'].side_wall):_reducer.params.p_b_c_b_r;}_reducer.params.p_b_c_b_f_f=_reducer.const_var.newLeanArr['front']!=undefined&&_reducer.const_var.newLeanArr['front'].front_wall!=null?_reducer.const_var.TypeWallNameForEdit[_reducer.const_var.newLeanArr['front'].front_wall]:_reducer.params.p_b_c_b_f_f;_reducer.params.p_b_c_b_f_b=_reducer.const_var.newLeanArr['front']!=undefined&&_reducer.const_var.newLeanArr['front'].back_wall!=null?_reducer.const_var.TypeWallNameForEdit[_reducer.const_var.newLeanArr['front'].back_wall]:_reducer.params.p_b_c_b_f_b;if(_reducer.const_var.newLeanArr['front']!=undefined&&_reducer.const_var.newLeanArr['front'].side_wall!=null){if(_reducer.const_var.newLeanArr['front'].side_wall=="one_fourth_close"||_reducer.const_var.newLeanArr['front'].side_wall=="three_fourth_close"||_reducer.const_var.newLeanArr['front'].side_wall=="half_close"){_reducer.params.p_b_c_b_f_l=_reducer.const_var.TypeWallNameForEdit[_reducer.const_var.newLeanArr['front'].side_wall];}else{_reducer.params.p_b_c_b_f_l=_reducer.const_var.newLeanArr['front']!=undefined&&_reducer.const_var.newLeanArr['front'].side_wall!=null?upperCaseFirst(_reducer.const_var.newLeanArr['front'].side_wall):_reducer.params.p_b_c_b_f_l;}}else{_reducer.params.p_b_c_b_f_l=_reducer.const_var.newLeanArr['front']!=undefined&&_reducer.const_var.newLeanArr['front'].side_wall!=null?upperCaseFirst(_reducer.const_var.newLeanArr['front'].side_wall):_reducer.params.p_b_c_b_f_l;}_reducer.params.p_b_c_b_b_f=_reducer.const_var.newLeanArr['back']!=undefined&&_reducer.const_var.newLeanArr['back'].front_wall!=null?_reducer.const_var.TypeWallNameForEdit[_reducer.const_var.newLeanArr['back'].front_wall]:_reducer.params.p_b_c_b_b_f;_reducer.params.p_b_c_b_b_b=_reducer.const_var.newLeanArr['back']!=undefined&&_reducer.const_var.newLeanArr['back'].back_wall!=null?_reducer.const_var.TypeWallNameForEdit[_reducer.const_var.newLeanArr['back'].back_wall]:_reducer.params.p_b_c_b_b_b;if(_reducer.const_var.newLeanArr['back']!=undefined&&_reducer.const_var.newLeanArr['back'].side_wall!=null){if(_reducer.const_var.newLeanArr['back'].side_wall=="one_fourth_close"||_reducer.const_var.newLeanArr['back'].side_wall=="three_fourth_close"||_reducer.const_var.newLeanArr['back'].side_wall=="half_close"){_reducer.params.p_b_c_b_b_l=_reducer.const_var.TypeWallNameForEdit[_reducer.const_var.newLeanArr['back'].side_wall];}else{_reducer.params.p_b_c_b_b_l=_reducer.const_var.newLeanArr['back']!=undefined&&_reducer.const_var.newLeanArr['back'].side_wall!=null?upperCaseFirst(_reducer.const_var.newLeanArr['back'].side_wall):_reducer.params.p_b_c_b_b_l;}}else{_reducer.params.p_b_c_b_b_l=_reducer.const_var.newLeanArr['back']!=undefined&&_reducer.const_var.newLeanArr['back'].side_wall!=null?upperCaseFirst(_reducer.const_var.newLeanArr['back'].side_wall):_reducer.params.p_b_c_b_b_l;}_reducer.params.b_l_l_t_l=_reducer.params.p_b_c_b_l;_reducer.params.b_l_l_t_f=_reducer.params.p_b_c_b_l_f;_reducer.params.b_l_l_t_b=_reducer.params.p_b_c_b_l_b;_reducer.params.b_r_l_t_r=_reducer.params.p_b_c_b_r;_reducer.params.b_r_l_t_f=_reducer.params.p_b_c_b_r_f;_reducer.params.b_r_l_t_b=_reducer.params.p_b_c_b_r_b;_reducer.params.p_b_c_b_f_f=_reducer.params.p_b_c_b_f_f;_reducer.params.p_b_c_b_f_b=_reducer.params.p_b_c_b_f_b;_reducer.params.p_b_c_b_f_l=_reducer.params.p_b_c_b_f_l;_reducer.params.p_b_c_b_b_f=_reducer.params.p_b_c_b_b_f;_reducer.params.p_b_c_b_b_b=_reducer.params.p_b_c_b_b_b;_reducer.params.p_b_c_b_b_l=_reducer.params.p_b_c_b_b_l;_reducer.params.leantoHeight=editData.leanto_height!=null?editData.leanto_height:_reducer.params.leantoHeight;_reducer.params.p_l_b_l=_reducer.const_var.newLeanArr['left']!=undefined&&_reducer.const_var.newLeanArr['left'].leanto_type==1?false:true;_reducer.params.p_r_b_l=_reducer.const_var.newLeanArr['right']!=undefined&&_reducer.const_var.newLeanArr['right'].leanto_type==2?false:true;_reducer.params.p_f_w=_reducer.const_var.TypeWallNameForEdit[editData.front_wall];_reducer.params.p_f_w_f=_reducer.params.p_f_w;_reducer.params.b_r_p=editData.roof_pitch;_reducer.params.p_c_p_l=editData.left_wall_cutpanel==true?editData.left_wall_cutpanel:false;_reducer.params.p_c_p_r=editData.right_wall_cutpanel==true?editData.right_wall_cutpanel:false;_reducer.params.p_b_w=_reducer.const_var.TypeWallNameForEdit[editData.back_wall];if(editData.left_wall=="one_fourth_close"||editData.left_wall=="three_fourth_close"||editData.left_wall=="half_close"){_reducer.params.p_l_w=_reducer.const_var.TypeWallNameForEdit[editData.left_wall];}else{_reducer.params.p_l_w=upperCaseFirst(editData.left_wall);}//params.p_l_w=upperCaseFirst(editData.left_wall);
if(editData.right_wall=="one_fourth_close"||editData.right_wall=="three_fourth_close"||editData.right_wall=="half_close"){_reducer.params.p_r_w=_reducer.const_var.TypeWallNameForEdit[editData.right_wall];}else{_reducer.params.p_r_w=upperCaseFirst(editData.right_wall);}if(_reducer.params.p_c_p_l==true&&editData.left_wall_cut_panel_price!=undefined&&editData.left_wall_cut_panel_price!=0){_reducer.const_var.UpdatedPriceData.left_wall_price=parseFloat(editData.left_wall_price)-parseFloat(editData.left_wall_cut_panel_price);}if(_reducer.params.p_c_p_r==true&&editData.right_wall_cut_panel_price!=undefined&&editData.right_wall_cut_panel_price!=0){_reducer.const_var.UpdatedPriceData.right_wall_price=parseFloat(editData.right_wall_price)-parseFloat(editData.right_wall_cut_panel_price);}if(_reducer.params.p_c_p_r==true&&editData.right_wall_cut_panel_price==undefined&&_reducer.params.p_r_w=="Open"){_reducer.const_var.UpdatedPriceData.right_wall_cut_panel_price=parseFloat(editData.right_wall_price);}if(_reducer.params.p_c_p_l==true&&editData.left_wall_cut_panel_price==undefined&&_reducer.params.p_l_w=="Open"){_reducer.const_var.UpdatedPriceData.left_wall_cut_panel_price=parseFloat(editData.left_wall_price);}//console.log(editData.left_wall_price, const_var.UpdatedPriceData.left_wall_price," const_var.UpdatedPriceData.left_wall_price")
_reducer.params.p_c_a_w=_reducer.params.p_b_w=="Close"&&_reducer.params.p_l_w=="Close"&&_reducer.params.p_r_w=="Close"&&_reducer.params.p_f_w=="Close"?true:false;_reducer.params.p_c_a_l_l_w=_reducer.params.p_b_c_b_l_f=="Close"&&_reducer.params.p_b_c_b_l_b=="Close"&&_reducer.params.p_b_c_b_l=="Close"?true:false;_reducer.params.p_c_a_r_l_w=_reducer.params.p_b_c_b_r_f=="Close"&&_reducer.params.p_b_c_b_r_b=="Close"&&_reducer.params.p_b_c_b_r=="Close"?true:false;_reducer.params.p_c_a_f_l_w=_reducer.params.p_b_c_b_f_f=="Close"&&_reducer.params.p_b_c_b_f_b=="Close"&&_reducer.params.p_b_c_b_f_l=="Close"?true:false;_reducer.params.p_c_a_b_l_w=_reducer.params.p_b_c_b_b_f=="Close"&&_reducer.params.p_b_c_b_b_b=="Close"&&_reducer.params.p_b_c_b_b_l=="Close"?true:false;_reducer.params.tax_zipcode=editData.tax_zipcode?editData.tax_zipcode:_reducer.params.tax_zipcode;_reducer.const_var.showDefaultInsullation=editData.insulation_type&&editData.insulation_type.insulation_id!=0?true:false;_reducer.params.p_e_l=editData.has_double_leg?editData.has_double_leg:false;_reducer.params.p_t_u=0;_reducer.params.singleSlope=editData.singleSlope!=undefined?editData.singleSlope:false;_reducer.params.p_i_o=editData.insulation_type?editData.insulation_type.insulation_id:0;_reducer.const_var.showDefaultInsullation=editData.insulation_type&&editData.insulation_type.insulation_id!=0?true:false;if(editData.insulation_type!=undefined&&editData.insulation=="roof_only"){_reducer.params.p_r_o=true;}else{_reducer.params.p_r_o=_reducer.params.p_r_o;}_reducer.const_var.CheckSnowLoadValue=editData.heavy_snow?editData.heavy_snow==0?35:65:35;if(editData.certificate!=undefined&&editData.certificate.certificate_id==undefined){_reducer.params.p_e_i=editData.certificate.name.toLowerCase();}if(editData.certificate!=undefined&&editData.certificate.certificate_id!=undefined){_reducer.params.p_e_i=editData.certificate!=undefined?editData.certificate.certificate_id:_reducer.params.p_e_i;}if(_reducer.params.p_e_i=="other"){_reducer.params.p_e_i_other=editData.certificate_name;}if(_reducer.const_var.newLeanArr['left']!=undefined&&_reducer.const_var.newLeanArr['left'].leanto_type==1){_reducer.params.ShowLeanRecord=true;_reducer.params.continous_left_lean=_reducer.const_var.newLeanArr['left'].continous_lean==true?true:false;_reducer.params.add_left_lean=true;_reducer.params.lean_p_w=parseInt(_reducer.const_var.newLeanArr['left'].width);_reducer.params.lean_p_d=parseInt(_reducer.const_var.newLeanArr['left'].length);_reducer.params.lean_p_h=parseInt(_reducer.const_var.newLeanArr['left'].height);if(_reducer.const_var.newLeanArr['left'].has_utility==undefined){_reducer.params.add_storage_check=false;_reducer.params.add_storage=5;}else{_reducer.params.add_storage_check=_reducer.const_var.newLeanArr['left'].has_utility==true?true:false;_reducer.params.add_storage=_reducer.const_var.newLeanArr['left'].utility_length?_reducer.const_var.newLeanArr['left'].utility_length:5;}if(_reducer.const_var.newLeanArr['left'].certificate!=undefined&&_reducer.const_var.newLeanArr['left'].certificate.certificate_id==undefined){_reducer.params.lean_p_e_i=_reducer.const_var.newLeanArr['left'].certificate.name.toLowerCase();}if(_reducer.const_var.newLeanArr['left'].certificate!=undefined&&_reducer.const_var.newLeanArr['left'].certificate.certificate_id!=undefined){_reducer.params.lean_p_e_i=_reducer.const_var.newLeanArr['left'].certificate!=undefined?_reducer.const_var.newLeanArr['left'].certificate.certificate_id:_reducer.params.lean_p_e_i;}if(_reducer.params.lean_p_e_i=="other"){_reducer.params.lean_p_e_i_other=_reducer.const_var.newLeanArr['left'].certificate_other_name;}_reducer.params.leantoAlignmentLeft=_reducer.const_var.TypeAlingnmentReverse[_reducer.const_var.newLeanArr['left'].alignment];_reducer.params.leantoAlignmentLeft=_reducer.params.leantoAlignmentLeft!=undefined?_reducer.params.leantoAlignmentLeft:1;if(_reducer.params.add_storage_check==true){_reducer.params.p_b_c_b_l_b="Close";}if(_reducer.const_var.newLeanArr['left'].roof_pitch_name!=undefined){_reducer.params.b_l_t_r_p=_reducer.const_var.newLeanArr['left'].roof_pitch_name.slice(0,1);//params.b_l_t_r_p = const_var.newLeanArr['left'].roof_pitch.replace("/","");
}console.log(_reducer.const_var.newLeanArr['left'],"const_var.newLeanArr['left']");if(_reducer.const_var.newLeanArr['left'].porch!=undefined){for(var i=0;i<=_reducer.const_var.newLeanArr['left'].porch.wrap_with.length-1;i++){if(_reducer.const_var.newLeanArr['left'].porch.wrap_with[i]=="front"){_reducer.params.add_left_front_lean_porch=true;}if(_reducer.const_var.newLeanArr['left'].porch.wrap_with[i]=="back"){_reducer.params.add_left_back_lean_porch=true;}}// if(const_var.newLeanArr['right'].porch.wrap_with[0]!=undefined && const_var.newLeanArr['right'].porch.wrap_with[0]=="")
}}else{_reducer.params.continous_left_lean=false;_reducer.params.add_left_lean=false;_reducer.params.lean_p_w=12;_reducer.params.lean_p_d=21;_reducer.params.lean_p_h=6;//$(".LeftBranLean input:checkbox").prop('checked',false);
}// console.log(const_var.newLeanArr['front'],"const_var.newLeanArr['front']")
if(_reducer.const_var.newLeanArr['front']!=undefined&&_reducer.const_var.newLeanArr['front'].leanto_type==3){_reducer.params.ShowLeanRecord=true;_reducer.params.continous_left_lean=_reducer.const_var.newLeanArr['front'].continous_lean==true?true:false;_reducer.params.add_front_lean=true;_reducer.params.leanF_p_w=parseInt(_reducer.const_var.newLeanArr['front'].width);_reducer.params.leanF_p_d=parseInt(_reducer.const_var.newLeanArr['front'].length);_reducer.params.leanF_p_h=parseInt(_reducer.const_var.newLeanArr['front'].height);if(_reducer.const_var.newLeanArr['front'].has_utility==undefined){_reducer.params.add_storage_check_front=false;_reducer.params.add_storage_front=5;}else{_reducer.params.add_storage_check_front=_reducer.const_var.newLeanArr['front'].has_utility==true?true:false;_reducer.params.add_storage_front=_reducer.const_var.newLeanArr['front'].utility_length?_reducer.const_var.newLeanArr['front'].utility_length:5;}if(_reducer.const_var.newLeanArr['front'].certificate!=undefined&&_reducer.const_var.newLeanArr['front'].certificate.certificate_id==undefined){_reducer.params.leanF_p_e_i=_reducer.const_var.newLeanArr['front'].certificate.name.toLowerCase();}if(_reducer.const_var.newLeanArr['front'].certificate!=undefined&&_reducer.const_var.newLeanArr['front'].certificate.certificate_id!=undefined){_reducer.params.leanF_p_e_i=_reducer.const_var.newLeanArr['front'].certificate!=undefined?_reducer.const_var.newLeanArr['front'].certificate.certificate_id:_reducer.params.leanF_p_e_i;}if(_reducer.params.leanF_p_e_i=="other"){_reducer.params.leanF_p_e_i_other=_reducer.const_var.newLeanArr['front'].certificate_other_name;}if(_reducer.const_var.newLeanArr['front'].alignment=="front"){_reducer.params.leantoAlignmentFront=2;}if(_reducer.const_var.newLeanArr['front'].alignment=="back"){_reducer.params.leantoAlignmentFront=3;}if(_reducer.const_var.newLeanArr['front'].alignment=="center"){_reducer.params.leantoAlignmentFront=1;}_reducer.params.leantoAlignmentFront=_reducer.params.leantoAlignmentFront!=undefined?_reducer.params.leantoAlignmentFront:1;// console.log(params.leantoAlignmentFront,"params.leantoAlignmentFront",const_var.newLeanArr['front'],const_var.TypeAlingnment,const_var.newLeanArr['front'],const_var.TypeAlingnment[const_var.newLeanArr['front'].alignment])
if(_reducer.params.add_storage_check_front==true){_reducer.params.p_b_c_b_f_b="Close";}if(_reducer.const_var.newLeanArr['front'].roof_pitch_name!=undefined){_reducer.params.b_l_t_r_pF=_reducer.const_var.newLeanArr['front'].roof_pitch_name.slice(0,1);//params.b_l_t_r_p = const_var.newLeanArr['left'].roof_pitch.replace("/","");
}}else{_reducer.params.continous_left_lean=false;_reducer.params.add_front_lean=false;_reducer.params.leanF_p_w=12;_reducer.params.leanF_p_d=21;_reducer.params.leanF_p_h=6;//$(".LeftBranLean input:checkbox").prop('checked',false);
}if(_reducer.const_var.newLeanArr['back']!=undefined&&_reducer.const_var.newLeanArr['back'].leanto_type==4){_reducer.params.ShowLeanRecord=true;_reducer.params.continous_left_lean=_reducer.const_var.newLeanArr['back'].continous_lean==true?true:false;_reducer.params.add_back_lean=true;_reducer.params.leanB_p_w=parseInt(_reducer.const_var.newLeanArr['back'].width);_reducer.params.leanB_p_d=parseInt(_reducer.const_var.newLeanArr['back'].length);_reducer.params.leanB_p_h=parseInt(_reducer.const_var.newLeanArr['back'].height);if(_reducer.const_var.newLeanArr['back'].has_utility==undefined){_reducer.params.add_storage_check_back=false;_reducer.params.add_storage_back=5;}else{_reducer.params.add_storage_check_back=_reducer.const_var.newLeanArr['back'].has_utility==true?true:false;_reducer.params.add_storage_back=_reducer.const_var.newLeanArr['back'].utility_length?_reducer.const_var.newLeanArr['back'].utility_length:5;}if(_reducer.const_var.newLeanArr['back'].certificate!=undefined&&_reducer.const_var.newLeanArr['back'].certificate.certificate_id==undefined){_reducer.params.leanB_p_e_i=_reducer.const_var.newLeanArr['back'].certificate.name.toLowerCase();}if(_reducer.const_var.newLeanArr['back'].certificate!=undefined&&_reducer.const_var.newLeanArr['back'].certificate.certificate_id!=undefined){_reducer.params.leanB_p_e_i=_reducer.const_var.newLeanArr['back'].certificate!=undefined?_reducer.const_var.newLeanArr['back'].certificate.certificate_id:_reducer.params.leanB_p_e_i;}if(_reducer.params.leanB_p_e_i=="other"){_reducer.params.leanB_p_e_i_other=_reducer.const_var.newLeanArr['back'].certificate_other_name;}if(_reducer.const_var.newLeanArr['back'].alignment=="front"){_reducer.params.leantoAlignmentBack=2;}if(_reducer.const_var.newLeanArr['back'].alignment=="back"){_reducer.params.leantoAlignmentBack=3;}if(_reducer.const_var.newLeanArr['back'].alignment=="center"){_reducer.params.leantoAlignmentBack=1;}_reducer.params.leantoAlignmentBack=_reducer.params.leantoAlignmentBack!=undefined?_reducer.params.leantoAlignmentBack:1;if(_reducer.params.add_storage_check_back==true){_reducer.params.p_b_c_b_b_b="Close";}if(_reducer.const_var.newLeanArr['back'].roof_pitch_name!=undefined){_reducer.params.b_l_t_r_pB=_reducer.const_var.newLeanArr['back'].roof_pitch_name.slice(0,1);//params.b_l_t_r_p = const_var.newLeanArr['left'].roof_pitch.replace("/","");
}}else{_reducer.params.continous_left_lean=false;_reducer.params.add_back_lean=false;_reducer.params.leanB_p_w=12;_reducer.params.leanB_p_d=21;_reducer.params.leanB_p_h=6;//$(".LeftBranLean input:checkbox").prop('checked',false);
}if(_reducer.const_var.newLeanArr['right']!=undefined&&_reducer.const_var.newLeanArr['right'].leanto_type==2){_reducer.params.ShowLeanRecord=true;_reducer.params.continous_right_lean=_reducer.const_var.newLeanArr['right'].continous_lean==true?true:false;_reducer.params.add_right_lean=true;_reducer.params.leanR_p_w=parseInt(_reducer.const_var.newLeanArr['right'].width);_reducer.params.leanR_p_d=parseInt(_reducer.const_var.newLeanArr['right'].length);_reducer.params.leanR_p_h=parseInt(_reducer.const_var.newLeanArr['right'].height);if(_reducer.const_var.newLeanArr['right'].has_utility==undefined){_reducer.params.add_storage_check_right=false;_reducer.params.add_storage_right=5;}else{_reducer.params.add_storage_check_right=_reducer.const_var.newLeanArr['right'].has_utility==true?true:false;_reducer.params.add_storage_right=_reducer.const_var.newLeanArr['right'].utility_length?_reducer.const_var.newLeanArr['right'].utility_length:5;}if(_reducer.const_var.newLeanArr['right'].certificate!=undefined&&_reducer.const_var.newLeanArr['right'].certificate.certificate_id==undefined){_reducer.params.leanR_p_e_i=_reducer.const_var.newLeanArr['right'].certificate.name.toLowerCase();}if(_reducer.const_var.newLeanArr['right'].certificate!=undefined&&_reducer.const_var.newLeanArr['right'].certificate.certificate_id!=undefined){_reducer.params.leanR_p_e_i=_reducer.const_var.newLeanArr['right'].certificate!=undefined?_reducer.const_var.newLeanArr['right'].certificate.certificate_id:_reducer.params.leanR_p_e_i;}if(_reducer.params.leanR_p_e_i=="other"){_reducer.params.leanR_p_e_i_other=_reducer.const_var.newLeanArr['right'].certificate_other_name;}_reducer.params.leantoAlignmentRight=_reducer.const_var.TypeAlingnmentReverse[_reducer.const_var.newLeanArr['right'].alignment];_reducer.params.leantoAlignmentRight=_reducer.params.leantoAlignmentRight!=undefined?_reducer.params.leantoAlignmentRight:1;if(_reducer.params.add_storage_check_right==true){_reducer.params.p_b_c_b_r_b="Close";}if(_reducer.const_var.newLeanArr['right'].roof_pitch_name!=undefined){_reducer.params.b_l_t_r_pR=_reducer.const_var.newLeanArr['right'].roof_pitch_name.slice(0,1);//params.b_l_t_r_pR = const_var.newLeanArr['right'].roof_pitch.replace("/","");
}// console.log(const_var.newLeanArr['right'].porch.wrap_with,"const_var.newLeanArr['right'].porch.wrap_with")
if(_reducer.const_var.newLeanArr['right'].porch!=undefined){for(var i=0;i<=_reducer.const_var.newLeanArr['right'].porch.wrap_with.length-1;i++){if(_reducer.const_var.newLeanArr['right'].porch.wrap_with[i]=="front"){_reducer.params.add_right_front_lean_porch=true;}if(_reducer.const_var.newLeanArr['right'].porch.wrap_with[i]=="back"){_reducer.params.add_right_back_lean_porch=true;}}// if(const_var.newLeanArr['right'].porch.wrap_with[0]!=undefined && const_var.newLeanArr['right'].porch.wrap_with[0]=="")
}}else{_reducer.params.continous_right_lean=false;_reducer.params.add_right_lean=false;_reducer.params.leanR_p_w=12;_reducer.params.leanR_p_d=21;_reducer.params.leanR_p_h=6;//$(".RightBranLean input:checkbox").prop('checked',false);
}if(editData.has_utility!=undefined&&editData.has_utility==true){if(editData.utility_name=="back"){_reducer.params.p_u_c=editData.has_utility==true?editData.has_utility:_reducer.params.p_u_c;_reducer.params.p_u_t=editData.utility_length!=null?editData.utility_length:_reducer.params.p_u_t;}if(editData.utility_name=="left"){_reducer.params.cB_addStorage_check_left=true;_reducer.params.cB_addStorage_left=editData.utility_length;}if(editData.utility_name=="right"){_reducer.params.cB_addStorage_check_right=true;_reducer.params.cB_addStorage_right=editData.utility_length;}}_reducer.params.display_product_status=data.status;_reducer.params.add_storage_check_1=_reducer.params.add_storage_check;_reducer.params.add_storage_check_right_1=_reducer.params.add_storage_check_right;_reducer.params.gauge_val=editData.gauge;_reducer.params.p_f_i=editData.insulation=="Fully Insulated"||editData.insulation=="full"?true:false;_reducer.params.p_r_o=editData.insulation=="Roof Only"||editData.insulation=="roof_only"?true:false;_reducer.params.p_v_w=editData.vertical_walls==true?true:false;_reducer.const_var.controls.maxPolarAngle=Math.PI;_reducer.const_var.controls.maxDistance=_reducer.params.p_d<=150?_reducer.params.p_d/2+_reducer.params.p_w/2+40:240;_reducer.const_var.controls.target.set(0,_reducer.params.p_h/2,0);//camera.position.set(0, params.p_h + 0, 2.05 * params.p_d);
_reducer.const_var.camera.position.set(1.25*_reducer.params.p_w,_reducer.params.p_h+0,1.25*_reducer.params.p_d);_reducer.const_var.controls.update();_reducer.params.tax_exempt=editData.tax_exempt==1?editData.tax_exempt:_reducer.params.tax_exempt;if(editData.garage_door_color!=undefined&&Object.keys(editData.garage_door_color).length>0){_reducer.params.g_d_c=editData.garage_door_color.hex_value.replace('#','0x');_reducer.params.g_d_c_name=editData.garage_door_color.name;_reducer.params.g_d_c_id=editData.garage_door_color;}for(var i=0;i<=editData.extra_items.length-1;i++){if(editData.extra_items[i].item_name=="Jtrim"){_reducer.params.p_j_t=true;}if(editData.extra_items[i].item_name=="End Jtrim"){_reducer.params.p_j_t_end=true;}if(editData.extra_items[i].item_name=="Side Cross Bracing"){_reducer.params.p_s_c_b=true;}if(editData.extra_items[i].item_name=="End Cross Bracing"){_reducer.params.p_e_c_b=true;}if(editData.extra_items[i].other_item_name=="fourth_center_cost"){_reducer.params.fourth_center_cost=true;}if(editData.extra_items[i].other_item_name=="overhang"){_reducer.params.o_v_h_n_g=true;if(editData.extra_items[i].item_name=="1' Overhang on Sides"){_reducer.params.o_v_h_n_g=true;}if(editData.extra_items[i].item_name=="1' Overhang on Ends"){_reducer.params.o_v_h_n_g_e=true;}//params.o_v_h_n_g_e
}if(editData.extra_items[i].is_edit!=undefined&&editData.extra_items[i].is_edit==false){editData.extra_items[i].is_edit=true;}}if(editData.surcharge_amount==undefined){editData.surcharge_amount=0;}if(editData.surcharge_amount){if(editData.surcharge_taxable==undefined){_reducer.const_var.UpdatedPriceData.surcharge_taxable=0;}}_reducer.const_var.estimator_QuestionAnswer=data.questions!=undefined?data.questions:_reducer.const_var.estimator_QuestionAnswer;if(editData.order_extra_items!=undefined&&editData.order_extra_items.surchargeFees==undefined){editData.order_extra_items.surchargeFees=0;}if(editData.order_extra_items!=undefined&&editData.order_extra_items.concrete_work==undefined){editData.order_extra_items.concrete_work=0;}if(editData.order_extra_items!=undefined&&editData.order_extra_items.ground_work==undefined){editData.order_extra_items.ground_work=0;}_reducer.const_var.order_extra_items=editData.order_extra_items!=undefined?editData.order_extra_items:_reducer.const_var.order_extra_items;_reducer.const_var.order_extra_items.grvy_value=_reducer.const_var.order_extra_items.grvy_value==undefined?0:_reducer.const_var.order_extra_items.grvy_value;_reducer.const_var.inputs=editData.inputs!=undefined?editData.inputs:_reducer.const_var.inputs;_reducer.const_var.Componentinputs=editData.Componentinputs!=undefined?editData.Componentinputs:_reducer.const_var.Componentinputs;_reducer.const_var.ExtraItemsFeaturesArray=editData.ExtraItemsFeaturesArray!=undefined?editData.ExtraItemsFeaturesArray:_reducer.const_var.ExtraItemsFeaturesArray;_reducer.const_var.ExtraItemsFeaturesQuantityArray=editData.ExtraItemsFeaturesQuantityArray!=undefined?editData.ExtraItemsFeaturesQuantityArray:_reducer.const_var.ExtraItemsFeaturesQuantityArray;if(editData.parentTax!=undefined){if(typeof editData.parentTax.percentage=='string'){editData.parentTax.percentage=editData.parentTax.percentage.replace(/[^\d.-]/g,'');}if(editData.parentTax.percentage.length>0){editData.parentTax.percentage=editData.parentTax.percentage[0].replace(/[^\d.-]/g,'');}if(editData.parentTax.type=="amt"){if(typeof editData.parentTax.amount=='string'){editData.parentTax.amount=editData.parentTax.amount.replace(/[^\d.-]/g,'');}if(editData.parentTax.amount.length>0){editData.parentTax.amount=editData.parentTax.amount[0].replace(/[^\d.-]/g,'');}}}//console.log(editData.parentTax,"editData.parentTax1")
_reducer.const_var.tax=editData.parentTax!=undefined?editData.parentTax:_reducer.const_var.tax;_reducer.const_var.MoreTaxinputs=editData.MoreTaxinputs!=undefined?editData.MoreTaxinputs:_reducer.const_var.MoreTaxinputs;if(_reducer.const_var.MoreTaxinputs!=undefined){_reducer.const_var.MoreTaxinputs.map(function(val,index){if(typeof val.percentage=="string"){_reducer.const_var.MoreTaxinputs[index].percentage=val.percentage.replace(/[^\d.-]/g,'');}if(val.percentage.length>0){_reducer.const_var.MoreTaxinputs[index].percentage=val.percentage[0].replace(/[^\d.-]/g,'');}if(typeof val.more_tax_amount=="string"){_reducer.const_var.MoreTaxinputs[index].more_tax_amount=val.more_tax_amount.replace(/[^\d.-]/g,'');}if(val.more_tax_amount.length>0){_reducer.const_var.MoreTaxinputs[index].more_tax_amount=val.more_tax_amount[0].replace(/[^\d.-]/g,'');}if(val.type=="amt"){if(typeof val.amount=="string"){_reducer.const_var.MoreTaxinputs[index].amount=val.amount.replace(/[^\d.-]/g,'');}if(val.amount.length>0){_reducer.const_var.MoreTaxinputs[index].amount=val.amount[0].replace(/[^\d.-]/g,'');}}});}//     const_var.ExtraItemsFeaturesArray = const_var.ExtraItemsFeaturesArray.filter(function (el) {
//   return el != null;
// });
//     const_var.ExtraItemsFeaturesQuantityArray = const_var.ExtraItemsFeaturesQuantityArray.filter(function (el) {
//   return el != null;
// });
if(sourceData!=undefined&&sourceData!=''){if(Object.keys(sourceData).length>0){sourceData.map(function(val,index){if(editData.parentTax!=undefined){if(index==0){_reducer.const_var.tax=val;}if(index>0){_reducer.const_var.MoreTaxinputs[index-1]=val;_reducer.const_var.MoreTaxinputs[index-1].more_tax_amount=val.more_tax_amount;}}else{_reducer.const_var.MoreTaxinputs[index]=val;_reducer.const_var.MoreTaxinputs[index].more_tax_amount=val.more_tax_amount;}});}//const_var.tax = (Object.keys(sourceData).length>0)?sourceData[0]:const_var.tax;
}_reducer.const_var.additionalFeaturesArray=editData.additionalFeaturesArray!=undefined?editData.additionalFeaturesArray:_reducer.const_var.additionalFeaturesArray;_reducer.const_var.UpdatedPriceData.elements=[];editData.extra_items.map(function(val,index){_reducer.const_var.UpdatedPriceData['elements'][val.item_name.toString()]=val;});_reducer.const_var.LeadCustomerData['first_name']=personlInfo.first_name==''?undefined:personlInfo.first_name;_reducer.const_var.LeadCustomerData['last_name']=personlInfo.last_name;_reducer.const_var.LeadCustomerData['email']=personlInfo.email;_reducer.const_var.LeadCustomerData['phone_no']=personlInfo.phone_no!=undefined?personlInfo.phone_no:'';_reducer.const_var.LeadCustomerData['mobile_no']=personlInfo.mobile_no!=undefined?personlInfo.mobile_no:'';_reducer.const_var.leadSourceStateData=statesRec!=undefined?statesRec:'';var priceData=personlInfo.address.filter(function(address){return address.is_billing==1;});_reducer.const_var.LeadCustomerData['address']=personlInfo.address;personlInfo.address.map(function(val,index){_reducer.const_var.LeadCustomerData['address'][index].notRemove=true;_reducer.const_var.addressBook.push({'new_address_line_1':val.address_line_1,'new_address_line_2':val.address_line_2,'new_zipcode':val.zipcode,'new_state':val.state,'new_city':val.city,'new_county':val.county});});// if(data.phone_no_2!=undefined)
// {
//     const_var.LeadCustomerData['phone_no_2'] = personlInfo.phone_no_2;
//     if(const_var.LeadCustomerData['phone_no']=='' || const_var.LeadCustomerData['phone_no']==undefined)
//     {
//         const_var.LeadCustomerData['phone_no'] = personlInfo.phone_no_2;
//     }
// }
// if(data.mobile_no!=undefined)
// {
//     const_var.LeadCustomerData['mobile_no'] = personlInfo.mobile_no;
//     if(const_var.LeadCustomerData['phone_no']=='' || const_var.LeadCustomerData['phone_no']==undefined)
//     {
//         const_var.LeadCustomerData['phone_no'] = personlInfo.mobile_no;
//     }
// }
_reducer.const_var.LeadCustomerData['billing_address_line_1']=_reducer.const_var.LeadCustomerData['address_line_1']=data.billing_address_line_1;_reducer.const_var.LeadCustomerData['billing_address_line_2']=_reducer.const_var.LeadCustomerData['address_line_2']=data.billing_address_line_2;_reducer.const_var.LeadCustomerData['billing_city']=_reducer.const_var.LeadCustomerData['city']=data.billing_city;_reducer.const_var.LeadCustomerData['billing_country']=_reducer.const_var.LeadCustomerData['country']=data.billing_country;_reducer.const_var.LeadCustomerData['billing_state']=_reducer.const_var.LeadCustomerData['state']=data.billing_state;_reducer.const_var.LeadCustomerData['billing_zipcode']=_reducer.const_var.LeadCustomerData['zipcode']=data.billing_zipcode;_reducer.const_var.LeadCustomerData['shipping_address_line_1']=data.shipping_address_line_1;_reducer.const_var.LeadCustomerData['shipping_address_line_2']=data.shipping_address_line_2;_reducer.const_var.LeadCustomerData['shipping_city']=data.shipping_city;_reducer.const_var.LeadCustomerData['shipping_state']=data.shipping_state;_reducer.const_var.LeadCustomerData['shipping_country']=data.shipping_country;_reducer.const_var.LeadCustomerData['shipping_zipcode']=data.shipping_zipcode;_reducer.const_var.LeadCustomerData['ShowEdit']=data.ShowEdit!=undefined?data.ShowEdit:true;_reducer.const_var.LeadCustomerData['is_Action']=data.is_Action;_reducer.const_var.LeadCustomerData['lead_source']=data.lead_source;if(building_images!=undefined&&building_images.length>0&&_reducer.const_var.crmSetting.form_action!="duplicate"){_reducer.const_var.checkCaptuareImage=true;//const_var.i_g_A_y = building_images;
building_images.map(function(val,index){converImageIntoBase64(val.image,function(dataUrl){if(val.image_name!="2D Layout"){_reducer.const_var.i_g_A_y[index]={"image":dataUrl,"image_name":val.image_name,'description':val.description};}});});}_reducer.const_var.crmSetting.sub_module=data.sub_module;_reducer.const_var.crmSetting.sub_module_id=data.sub_module_id;_reducer.const_var.editstateColorAcordingAPI[_reducer.params.p_s_n]={"wall_color":editData.wall_color,"roof_color":editData.roof_color,"trim_color":editData.trim_color,"wainscot":editData.wainscot,"garageDoorColor":editData.garageDoorColor};if(editData.roof_pitch!=undefined){_reducer.params.b_r_p=editData.roof_pitch.replace("/","");_reducer.params.p_r_p=editData.roof_pitch.split("/")[0];}};exports.EditloadDefaultBuilding=EditloadDefaultBuilding;var converImageIntoBase64=function converImageIntoBase64(url,callback){var xhr=new XMLHttpRequest();xhr.onload=function(){var reader=new FileReader();reader.onloadend=function(){callback(reader.result);};reader.readAsDataURL(xhr.response);};xhr.open('GET',url);xhr.responseType='blob';xhr.send();};exports.converImageIntoBase64=converImageIntoBase64;var loadDefaultBuilding=function loadDefaultBuilding(state,data){var editData=data;//const_var.defaultBuildingArr = data;
var filterRecord="";if(data!=''){var _loop=function _loop(i){if(_reducer.const_var.stateManufacturerAcordingAPI[_reducer.params.p_s_n].building_type!=undefined&&_reducer.const_var.stateManufacturerAcordingAPI[_reducer.params.p_s_n].building_type.length>0){filterRecord=_reducer.const_var.stateManufacturerAcordingAPI[_reducer.params.p_s_n].building_type.filter(function(newData){return newData==data[i].id;});if(filterRecord.length>0&&filterRecord[0]==data[i].id){if(data[i].heavy_snow==1&&_reducer.const_var.CheckSnowLoadValue==65){_reducer.const_var.defaultBuildingArr[data[i].id]=data[i];if(state.defaultBuilding==undefined){_reducer.params.p_b_t=data[0].building_id;}}if(_reducer.const_var.CheckSnowLoadValue!=65){_reducer.const_var.defaultBuildingArr[data[i].id]=data[i];if(state.defaultBuilding==undefined){_reducer.params.p_b_t=data[0].building_id;}}}else{if(data[i].heavy_snow==1&&_reducer.const_var.CheckSnowLoadValue==65){_reducer.const_var.defaultBuildingArr[data[i].id]=data[i];if(state.defaultBuilding==undefined){_reducer.params.p_b_t=data[0].building_id;}}if(_reducer.const_var.CheckSnowLoadValue!=65){_reducer.const_var.defaultBuildingArr[data[i].id]=data[i];if(state.defaultBuilding==undefined){_reducer.params.p_b_t=data[0].building_id;}}}}else{// console.log(filterRecord,"filterRecord")
if(data[i].heavy_snow==1&&_reducer.const_var.CheckSnowLoadValue==65){_reducer.const_var.defaultBuildingArr[data[i].id]=data[i];if(state.defaultBuilding==undefined){_reducer.params.p_b_t=data[0].building_id;}}if(_reducer.const_var.CheckSnowLoadValue!=65){_reducer.const_var.defaultBuildingArr[data[i].id]=data[i];if(state.defaultBuilding==undefined){_reducer.params.p_b_t=data[0].building_id;}}}};for(var i=0;i<data.length;i++){_loop(i);}}// console.log(const_var.defaultBuildingArr,"const_var.defaultBuildingArr",const_var.stateManufacturerAcordingAPI[params.p_s_n].building_type)
if(_reducer.const_var.defaultBuildingArr[state.defaultBuilding]==undefined){return true;}if(_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto=="both"){_reducer.const_var.leantoleft.width=parseInt(_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_size.split('x')[0]);_reducer.const_var.leantoleft.length=parseInt(_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_size.split('x')[1]);_reducer.const_var.leantoleft.height=parseInt(_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_size.split('x')[2]);_reducer.const_var.leantoleft.front_wall=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_wall;_reducer.const_var.leantoleft.back_wall=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_wall;_reducer.const_var.leantoleft.side_wall=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_wall;_reducer.const_var.leantoright.width=parseInt(_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_size.split('x')[0]);_reducer.const_var.leantoright.length=parseInt(_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_size.split('x')[1]);_reducer.const_var.leantoright.height=parseInt(_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_size.split('x')[2]);_reducer.const_var.leantoright.front_wall=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_wall;_reducer.const_var.leantoright.back_wall=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_wall;_reducer.const_var.leantoright.side_wall=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_wall;_reducer.const_var.newLeanArr['left']=_reducer.const_var.leantoleft;_reducer.const_var.newLeanArr['right']=_reducer.const_var.leantoright;_reducer.params.ShowLeanRecord=true;}else if(_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto=="left"){_reducer.const_var.leantoleft.width=parseInt(_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_size.split('x')[0]);_reducer.const_var.leantoleft.length=parseInt(_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_size.split('x')[1]);_reducer.const_var.leantoleft.height=parseInt(_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_size.split('x')[2]);_reducer.const_var.leantoleft.front_wall=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_wall;_reducer.const_var.leantoleft.back_wall=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_wall;_reducer.const_var.leantoleft.side_wall=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_wall;_reducer.const_var.newLeanArr['left']=_reducer.const_var.leantoleft;_reducer.const_var.newLeanArr['right']=undefined;_reducer.params.ShowLeanRecord=true;}else if(_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto=="right"){_reducer.const_var.leantoright.width=parseInt(_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_size.split('x')[0]);_reducer.const_var.leantoright.length=parseInt(_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_size.split('x')[1]);_reducer.const_var.leantoright.height=parseInt(_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_size.split('x')[2]);_reducer.const_var.leantoright.front_wall=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_wall;_reducer.const_var.leantoright.back_wall=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_wall;_reducer.const_var.leantoright.side_wall=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_wall;_reducer.const_var.newLeanArr['left']=undefined;_reducer.const_var.newLeanArr['right']=_reducer.const_var.leantoright;_reducer.params.ShowLeanRecord=true;}else{_reducer.const_var.newLeanArr=[];_reducer.params.ShowLeanRecord=false;}_reducer.const_var.defalutProductLoad=true;_reducer.const_var.defaultBuildingImgName=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].image_name.split(".")[0];_reducer.params.p_b_t=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].building_id!=undefined?_reducer.const_var.defaultBuildingArr[state.defaultBuilding].building_id:_reducer.params.p_b_t;_reducer.params.building_type_name=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].name!=undefined?_reducer.const_var.defaultBuildingArr[state.defaultBuilding].name:"Carport";_reducer.params.p_r_s=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].roof_id!=undefined?_reducer.const_var.defaultBuildingArr[state.defaultBuilding].roof_id:_reducer.params.p_r_s;_reducer.params.p_w=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].size!=undefined?parseInt(_reducer.const_var.defaultBuildingArr[state.defaultBuilding].size.split('x')[0]):_reducer.params.p_w;_reducer.params.p_d=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].size!=undefined?parseInt(_reducer.const_var.defaultBuildingArr[state.defaultBuilding].size.split('x')[1]):_reducer.params.p_d;_reducer.params.p_h=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].size!=undefined?parseInt(_reducer.const_var.defaultBuildingArr[state.defaultBuilding].size.split('x')[2]):_reducer.params.p_h;_reducer.params.other_building_type_name=_reducer.params.building_type_name+" - "+_reducer.params.p_w+" x "+_reducer.params.p_d+" x "+_reducer.params.p_h;_reducer.const_var.defaultBuildingColorArray['RoofColor']=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].roof_color!=undefined?_reducer.const_var.defaultBuildingArr[state.defaultBuilding].roof_color:'';_reducer.const_var.defaultBuildingColorArray['WallColor']=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].roof_color!=undefined?_reducer.const_var.defaultBuildingArr[state.defaultBuilding].wall_color:'';_reducer.const_var.defaultBuildingColorArray['TrimColor']=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].roof_color!=undefined?_reducer.const_var.defaultBuildingArr[state.defaultBuilding].trim_color:'';// params.p_r_c = const_var.defaultBuildingArr[state.defaultBuilding].roof_color!= undefined ? const_var.defaultBuildingArr[state.defaultBuilding].roof_color.replace("#","0x") : params.p_r_c;
// params.p_t_c = const_var.defaultBuildingArr[state.defaultBuilding].trim_color!= undefined ? const_var.defaultBuildingArr[state.defaultBuilding].trim_color.replace("#","0x") : params.p_t_c;
// params.p_w_c = const_var.defaultBuildingArr[state.defaultBuilding].wall_color!= undefined ? const_var.defaultBuildingArr[state.defaultBuilding].wall_color.replace("#","0x") : params.p_w_c;
_reducer.params.p_u_c=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].utility!=undefined&&_reducer.const_var.defaultBuildingArr[state.defaultBuilding].utility!=0?true:false;_reducer.params.p_u_t=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].utility!=undefined&&_reducer.const_var.defaultBuildingArr[state.defaultBuilding].utility!=0?parseInt(_reducer.const_var.defaultBuildingArr[state.defaultBuilding].utility):5;_reducer.params.p_i_s=_reducer.params.p_i_s;if(_reducer.params.p_u_c==true){_reducer.params.nostorage=false;}_reducer.params.lean_p_w=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto!=undefined&&_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto!=null?_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_size.split('x')[0]:_reducer.params.lean_p_w;_reducer.params.lean_p_d=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto!=undefined&&_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto!=null?_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_size.split('x')[1]:_reducer.params.lean_p_d;_reducer.params.lean_p_h=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto!=undefined&&_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto!=null?_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_size.split('x')[2]:_reducer.params.lean_p_h;_reducer.params.p_b_c_b_l_f=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_wall!=null?upperCaseFirst(_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_wall):_reducer.params.p_b_c_b_l_f;_reducer.params.p_b_c_b_l_b=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_wall!=null?upperCaseFirst(_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_wall):_reducer.params.p_b_c_b_l_b;_reducer.params.p_b_c_b_l=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_wall!=null?upperCaseFirst(_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_wall):_reducer.params.p_b_c_b_l;_reducer.params.p_b_c_b_r_f=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_wall!=null?upperCaseFirst(_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_wall):_reducer.params.p_b_c_b_r_f;_reducer.params.p_b_c_b_r_b=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_wall!=null?upperCaseFirst(_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_wall):_reducer.params.p_b_c_b_r_b;_reducer.params.p_b_c_b_r=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_wall!=null?upperCaseFirst(_reducer.const_var.defaultBuildingArr[state.defaultBuilding].leanto_wall):_reducer.params.p_b_c_b_r;_reducer.params.b_l_l_t_l=_reducer.params.p_b_c_b_l;_reducer.params.b_l_l_t_f=_reducer.params.p_b_c_b_l_f;_reducer.params.b_l_l_t_b=_reducer.params.p_b_c_b_l_b;_reducer.params.b_r_l_t_r=_reducer.params.p_b_c_b_r;_reducer.params.b_r_l_t_f=_reducer.params.p_b_c_b_r_f;_reducer.params.b_r_l_t_b=_reducer.params.p_b_c_b_r_b;_reducer.params.p_l_b_l=_reducer.const_var.newLeanArr['left']!=undefined&&_reducer.const_var.newLeanArr['left'].leanto_type==1?false:true;_reducer.params.p_r_b_l=_reducer.const_var.newLeanArr['right']!=undefined&&_reducer.const_var.newLeanArr['right'].leanto_type==2?false:true;_reducer.params.p_f_w=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].wall!=null?upperCaseFirst(_reducer.const_var.defaultBuildingArr[state.defaultBuilding].wall):_reducer.params.p_f_w;_reducer.params.p_b_w=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].wall!=null?upperCaseFirst(_reducer.const_var.defaultBuildingArr[state.defaultBuilding].wall):_reducer.params.p_b_w;_reducer.params.p_l_w=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].wall!=null?upperCaseFirst(_reducer.const_var.defaultBuildingArr[state.defaultBuilding].wall):_reducer.params.p_l_w;_reducer.params.p_r_w=_reducer.const_var.defaultBuildingArr[state.defaultBuilding].wall!=null?upperCaseFirst(_reducer.const_var.defaultBuildingArr[state.defaultBuilding].wall):_reducer.params.p_r_w;_reducer.params.p_f_w_f=_reducer.params.p_f_w;_reducer.params.p_c_a_w=_reducer.params.p_b_w=="Close"&&_reducer.params.p_l_w=="Close"&&_reducer.params.p_r_w=="Close"&&_reducer.params.p_f_w=="Close"?true:false;_reducer.params.p_c_a_l_l_w=_reducer.params.p_b_c_b_l_f=="Close"&&_reducer.params.p_b_c_b_l_b=="Close"&&_reducer.params.p_b_c_b_l=="Close"?true:false;_reducer.params.p_c_a_r_l_w=_reducer.params.p_b_c_b_r_f=="Close"&&_reducer.params.p_b_c_b_r_b=="Close"&&_reducer.params.p_b_c_b_r=="Close"?true:false;if(_reducer.const_var.newLeanArr['left']!=undefined&&_reducer.const_var.newLeanArr['left'].leanto_type==1){_reducer.params.continous_left_lean=_reducer.const_var.newLeanArr['left'].continous_lean==true?true:false;_reducer.params.add_left_lean=true;_reducer.params.lean_p_w=parseInt(_reducer.const_var.newLeanArr['left'].width);_reducer.params.lean_p_d=parseInt(_reducer.const_var.newLeanArr['left'].length);_reducer.params.lean_p_h=parseInt(_reducer.const_var.newLeanArr['left'].height);_reducer.params.add_storage_check=_reducer.const_var.newLeanArr['left'].has_utility==true?true:false;_reducer.params.add_storage=_reducer.const_var.newLeanArr['left'].utility_length?_reducer.const_var.newLeanArr['left'].utility_length:5;if(_reducer.params.add_storage_check==true){//$(".add_storage input:checkbox").prop('checked',true);
}if(_reducer.params.continous_left_lean==true){}//$(".continous_left_lean input:checkbox").prop('checked',true);
//$(".LeftBranLean input:checkbox").prop('checked',true);
// console.log(const_var.newLeanArr,editData.building.leanto,params.add_storage_check,params.add_storage);
}else{_reducer.params.continous_left_lean=false;_reducer.params.add_left_lean=false;_reducer.params.lean_p_w=12;_reducer.params.lean_p_d=21;_reducer.params.lean_p_h=6;_reducer.params.add_storage_check=false;//$(".LeftBranLean input:checkbox").prop('checked',false);
}if(_reducer.const_var.newLeanArr['right']!=undefined&&_reducer.const_var.newLeanArr['right'].leanto_type==2){_reducer.params.continous_right_lean=_reducer.const_var.newLeanArr['right'].continous_lean==true?true:false;_reducer.params.add_right_lean=true;_reducer.params.leanR_p_w=parseInt(_reducer.const_var.newLeanArr['right'].width);_reducer.params.leanR_p_d=parseInt(_reducer.const_var.newLeanArr['right'].length);_reducer.params.leanR_p_h=parseInt(_reducer.const_var.newLeanArr['right'].height);_reducer.params.add_storage_check_right=_reducer.const_var.newLeanArr['right'].has_utility==true?true:false;_reducer.params.add_storage_right=_reducer.const_var.newLeanArr['right'].utility_length?_reducer.const_var.newLeanArr['right'].utility_length:5;if(_reducer.params.add_storage_check_right==true){//$(".add_storage_right input:checkbox").prop('checked',true);
}if(_reducer.params.continous_right_lean==true){}// $(".continous_right_lean input:checkbox").prop('checked',true);
//$(".RightBranLean input:checkbox").prop('checked',true);
}else{_reducer.params.continous_right_lean=false;_reducer.params.add_right_lean=false;_reducer.params.leanR_p_w=12;_reducer.params.leanR_p_d=21;_reducer.params.leanR_p_h=6;_reducer.params.add_storage_check_right=false;//$(".RightBranLean input:checkbox").prop('checked',false);
}_reducer.params.add_storage_check_1=_reducer.params.add_storage_check;_reducer.params.add_storage_check_right_1=_reducer.params.add_storage_check_right;_reducer.const_var.ConditionArr=[];_reducer.const_var.ConditionArr[_reducer.params.p_b_t]=[];_reducer.const_var.DistanceArr=[];_reducer.const_var.DistanceArr[_reducer.params.p_b_t]=[];_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s]=5;//data.data.pricing_data.building_structure[0].distance_on_center;
if(_reducer.const_var.crmSetting.is_show_background==true||_reducer.const_var.crmSetting.is_show_background==undefined){_reducer.const_var.controls.maxPolarAngle=Math.PI;}else{_reducer.const_var.controls.maxPolarAngle=Math.PI;}_reducer.const_var.controls.target.set(0,_reducer.params.p_h/2,0);//camera.position.set(0, params.p_h + 0, 2.05 * params.p_d);
_reducer.const_var.camera.position.set(1.25*_reducer.params.p_w,_reducer.params.p_h+0,1.25*_reducer.params.p_d);_reducer.const_var.controls.update();};exports.loadDefaultBuilding=loadDefaultBuilding;var rEaEfW=function rEaEfW(object){_reducer.const_var.d_w_a_r=[];_reducer.const_var.d_w_a_r_N_w=[];_reducer.const_var.door_arry={'window':[],'garage':[],'door':[],'frameout':[]};for(var i=0;i<object.length;i++){if("b_B_g_B"!=object[i].name&&"b_h_t1Bx"!=object[i].name&&"b_h_t2Bx"!=object[i].name&&"b_h_t5Bx"!=object[i].name&&"b_h_t6Bx"!=object[i].name&&"b_h_t3Bx"!=object[i].name&&"b_h_t4Bx"!=object[i].name){object[i].visible=false;_reducer.params[object[i].name.replace("-clone","")+"Qty"]--;_reducer.const_var.scene.remove(object[i]);}}_reducer.const_var.entry_points=[];_reducer.const_var.ManageDoorArrar={"front":[],"back":[],"left":[],"right":[],"ltleft":[],"ltright":[],"frontl":[],"frontr":[],"backl":[],"backr":[],"lefts":[],"rights":[],"fronts":[]};_reducer.const_var.ManageGlobalComponent={"front":[],"back":[],"left":[],"right":[],"ltleft":[],"ltright":[],"frontl":[],"frontr":[],"backl":[],"backr":[],"lefts":[],"rights":[],"fronts":[]};_reducer.const_var.ManageSpaces=[];_reducer.const_var.ManageDoorPlaces={"front":{"Garage":true,"CustomFrameout":true,"Walk":true,"WalkFrameout":true,"Windows":true,"WindowsFrameout":true,"GarageFrameout":true},"back":{"Garage":true,"CustomFrameout":true,"Walk":true,"WalkFrameout":true,"Windows":true,"WindowsFrameout":true,"GarageFrameout":true},"left":{"Garage":true,"CustomFrameout":true,"Walk":true,"WalkFrameout":true,"Windows":true,"WindowsFrameout":true,"GarageFrameout":true},"right":{"Garage":true,"CustomFrameout":true,"Walk":true,"WalkFrameout":true,"Windows":true,"WindowsFrameout":true,"GarageFrameout":true},"ltleft":{"Garage":true,"CustomFrameout":true,"Walk":true,"WalkFrameout":true,"Windows":true,"WindowsFrameout":true,"GarageFrameout":true},"ltright":{"Garage":true,"CustomFrameout":true,"Walk":true,"WalkFrameout":true,"Windows":true,"WindowsFrameout":true,"GarageFrameout":true},"frontl":{"Garage":true,"CustomFrameout":true,"Walk":true,"WalkFrameout":true,"Windows":true,"WindowsFrameout":true,"GarageFrameout":true},"frontr":{"Garage":true,"CustomFrameout":true,"Walk":true,"WalkFrameout":true,"Windows":true,"WindowsFrameout":true,"GarageFrameout":true},"backl":{"Garage":true,"CustomFrameout":true,"Walk":true,"WalkFrameout":true,"Windows":true,"WindowsFrameout":true,"GarageFrameout":true},"backr":{"Garage":true,"CustomFrameout":true,"Walk":true,"WalkFrameout":true,"Windows":true,"WindowsFrameout":true,"GarageFrameout":true},"lefts":{"Garage":true,"CustomFrameout":true,"Walk":true,"WalkFrameout":true,"Windows":true,"WindowsFrameout":true,"GarageFrameout":true},"rights":{"Garage":true,"CustomFrameout":true,"Walk":true,"WalkFrameout":true,"Windows":true,"WindowsFrameout":true,"GarageFrameout":true},"fronts":{"Garage":true,"CustomFrameout":true,"Walk":true,"WalkFrameout":true,"Windows":true,"WindowsFrameout":true,"GarageFrameout":true}};// ArrowNDistance.rmNode();
CenterBuildingArrows.updateCenterBuildingArrows();LeanToArrows.updateLeantosArrowAndDimensions();_reducer.const_var.callMesure=false;};exports.rEaEfW=rEaEfW;var addComponent=function addComponent(state,editData){if(editData.entry_points.length>0){_reducer.const_var.sum=0;var counts=[];for(var i=0;i<=editData.entry_points.length-1;i++){_reducer.params.trimkit=editData.entry_points[i].entry_trim_kit!=undefined?editData.entry_points[i].entry_trim_kit:_reducer.params.trimkit;_reducer.params.chain_hoist=editData.entry_points[i].entry_chain_hoist!=undefined?editData.entry_points[i].entry_chain_hoist:_reducer.params.chain_hoist;_reducer.params.header_seal=editData.entry_points[i].entry_header_seal!=undefined?editData.entry_points[i].entry_header_seal:_reducer.params.header_seal;_reducer.params.automatic_openers=editData.entry_points[i].entry_automatic_openers!=undefined?editData.entry_points[i].entry_automatic_openers:_reducer.params.entry_automatic_openers;_reducer.params.certified_door=editData.entry_points[i].entry_certified!=undefined?editData.entry_points[i].entry_certified:_reducer.params.certified_door;_reducer.params.extra_notes=editData.entry_points[i].entry_note!=undefined?editData.entry_points[i].entry_note:_reducer.params.extra_notes;cuComponent.RemoveDoorComponent(editData.entry_points[i].uniqueId,editData.entry_points[i].entry_type,editData.entry_points[i].component_name,editData.entry_points[i].component_wall_name,editData.entry_points[i],editData.entry_points[i].parent_array_key,editData.entry_points[i].child_array_key,editData.entry_points[i].nested_array_key,editData.entry_points[i].entry_rotation,editData.entry_points[i].entry_position,'',editData.entry_points[i].entry_size);}SetPriceforComponent(_reducer.const_var.componentPriceUpdateData);}_reducer.params.doorType="Garage";};exports.addComponent=addComponent;var upperCaseFirst=function upperCaseFirst(str){if(typeof str=='string'){return str.charAt(0).toUpperCase()+str.substring(1);}else{return str;}};exports.upperCaseFirst=upperCaseFirst;var upperCaseAllFirst=function upperCaseAllFirst(str){if(str=="Extended gable"){str="Extended Gable";}return str;};exports.upperCaseAllFirst=upperCaseAllFirst;var makeInstallationBackground=function makeInstallationBackground(state,value){var geometry=new THREE.BoxGeometry(1.05,.05,1.05);var textureUrl=require('../../assets/images/imgTextures/'+value+'.jpg');var loader=new THREE.TextureLoader();var texture=loader.load(textureUrl);texture.anisotropy=state.const_var.renderer.capabilities.getMaxAnisotropy();texture.wrapS=THREE.RepeatWrapping;texture.wrapT=THREE.RepeatWrapping;var material=new THREE.MeshPhongMaterial({color:"white",name:"foundation-Material",map:texture,bumpMap:texture,bumpScale:.04,specularMap:texture});var foundation=new THREE.Mesh(geometry,material);foundation.name="foundation";foundation.castShadow=true;foundation.receiveShadow=true;state.const_var.scene.add(foundation);if("undefined"!=typeof state.const_var.scene.getObjectByName("foundation"))state.const_var.scene.remove(state.const_var.scene.getObjectByName("foundation"));};exports.makeInstallationBackground=makeInstallationBackground;var makeExtraElements=function makeExtraElements(){var dataNew=_reducer.const_var.a_p_d_a;for(var i=0;i<dataNew.base.length;i++){_reducer.const_var.main_gauge_arr[dataNew.base[i].gauge+" Gauge"]=dataNew.base[i].gauge;_reducer.params.gauge_val=_reducer.params.gauge_val==""?dataNew.base[i].gauge:_reducer.params.gauge_val;}_reducer.const_var.trsArr={};_reducer.const_var.trsArr[0]='Select';//params.p_t_u = 0;
if(dataNew.trusses.length>0){if(dataNew.trusses[0].height==0){for(var i=0;i<=dataNew.trusses.length-1;i++){_reducer.const_var.trsArr[dataNew.trusses[i].cost]=dataNew.trusses[i].truss;}}}else{_reducer.params.p_t_u=0;}//console.log(const_var.trsArr,"const_var.trsArr")
if(dataNew.insulation.length>0){_reducer.const_var.insulationJson[0]='Select';for(var i=0;i<dataNew.insulation.length;i++){_reducer.const_var.insulationJson[dataNew.insulation[i].insulation_id]=dataNew.insulation[i].name;_reducer.const_var.insulationPriceJson[dataNew.insulation[i].insulation_id]=dataNew.insulation[i];}}//    console.log(const_var.insulationPriceJson,"const_var.insulationJson")
// if(dataNew.bows.length >0)
// {
//     folder10.add(params, "p_e_b",{"0":0,"1":1,"2":2,"3":3,"4":4,"5":5,"6":6,"7":7,"8":8,"9":9,"10":10}).name("Extra Bows").class("extra_bow").onChange(function() {
//         rLaSt(true);
//         cP(a_p_d_a);
//         rLaSt(false);
//     });
// }
};exports.makeExtraElements=makeExtraElements;var makeInsulationArrayForLeanto=function makeInsulationArrayForLeanto(){if(_reducer.const_var.leanGetDataLeft!=""){for(var i=0;i<=_reducer.const_var.leanGetDataLeft.insulation.length-1;i++){_reducer.const_var.insulationArrayForLeantoLeft[_reducer.const_var.leanGetDataLeft.insulation[i].insulation_id]=_reducer.const_var.leanGetDataLeft.insulation[i];}}if(_reducer.const_var.leanGetDataFront!=""){for(var i=0;i<=_reducer.const_var.leanGetDataFront.insulation.length-1;i++){_reducer.const_var.insulationArrayForLeantoFront[_reducer.const_var.leanGetDataFront.insulation[i].insulation_id]=_reducer.const_var.leanGetDataFront.insulation[i];}}if(_reducer.const_var.leanGetDataBack!=""){for(var i=0;i<=_reducer.const_var.leanGetDataBack.insulation.length-1;i++){_reducer.const_var.insulationArrayForLeantoBack[_reducer.const_var.leanGetDataBack.insulation[i].insulation_id]=_reducer.const_var.leanGetDataBack.insulation[i];}}if(_reducer.const_var.leanGetDataRight!=""){for(var i=0;i<=_reducer.const_var.leanGetDataRight.insulation.length-1;i++){_reducer.const_var.insulationArrayForLeantoRight[_reducer.const_var.leanGetDataRight.insulation[i].insulation_id]=_reducer.const_var.leanGetDataRight.insulation[i];}}};exports.makeInsulationArrayForLeanto=makeInsulationArrayForLeanto;var CheckLegsByResponse=function CheckLegsByResponse(state){var j=0;if(_reducer.const_var.ConditionArr[_reducer.params.p_b_t].length>0&&_reducer.const_var.ConditionArr[_reducer.params.p_b_t][_reducer.params.p_r_s]!=undefined){for(var i=0;i<=_reducer.const_var.ConditionArr[_reducer.params.p_b_t][_reducer.params.p_r_s].length-1;i++){_reducer.const_var.ConditionArr[_reducer.params.p_b_t][_reducer.params.p_r_s][i].min_width=_reducer.const_var.ConditionArr[_reducer.params.p_b_t][_reducer.params.p_r_s][i].min_width==''||_reducer.const_var.ConditionArr[_reducer.params.p_b_t][_reducer.params.p_r_s][i].min_width==null?0:_reducer.const_var.ConditionArr[_reducer.params.p_b_t][_reducer.params.p_r_s][i].min_width;_reducer.const_var.ConditionArr[_reducer.params.p_b_t][_reducer.params.p_r_s][i].min_height=_reducer.const_var.ConditionArr[_reducer.params.p_b_t][_reducer.params.p_r_s][i].min_height==''||_reducer.const_var.ConditionArr[_reducer.params.p_b_t][_reducer.params.p_r_s][i].min_height==null?0:_reducer.const_var.ConditionArr[_reducer.params.p_b_t][_reducer.params.p_r_s][i].min_height;if(_reducer.const_var.ConditionArr[_reducer.params.p_b_t][_reducer.params.p_r_s][i].min_width==0&&_reducer.const_var.ConditionArr[_reducer.params.p_b_t][_reducer.params.p_r_s][i].min_height<=_reducer.params.p_h&&_reducer.const_var.ConditionArr[_reducer.params.p_b_t][_reducer.params.p_r_s][i].max_height>=_reducer.params.p_h){if(_reducer.const_var.ConditionArr[_reducer.params.p_b_t][_reducer.params.p_r_s][i].is_default=="Y"){_reducer.params.p_e_l=true;_reducer.const_var.hasDoublelegdisable=true;_reducer.const_var.hasDoublelegshow=true;_reducer.const_var.hasDoublelegName=_reducer.const_var.ConditionArr[_reducer.params.p_b_t][_reducer.params.p_r_s][i].name;// $('.extraLegs').show();
// $('.extraLegs').addClass("disabled");
// $(".extraLegs input:checkbox").prop('checked',true);
// $(".extraLegs input:checkbox").prop('disabled',true);
}else{_reducer.params.p_e_l=false;_reducer.const_var.hasDoublelegdisable=false;_reducer.const_var.hasDoublelegshow=true;_reducer.const_var.hasDoublelegName=_reducer.const_var.ConditionArr[_reducer.params.p_b_t][_reducer.params.p_r_s][i].name;// $('.extraLegs').show();
// $(".extraLegs input:checkbox").prop('disabled',false);
//$(".extraLegs .c").find('span').remove();
//$(".extraLegs .c").append(" <span>(Including Base Rails)</span>");
}_reducer.const_var.legstype=_reducer.const_var.ConditionArr[_reducer.params.p_b_t][_reducer.params.p_r_s][i].legs_type=="reinforced"?"double":_reducer.const_var.ConditionArr[_reducer.params.p_b_t][_reducer.params.p_r_s][i].legs_type;}else if(_reducer.const_var.ConditionArr[_reducer.params.p_b_t][_reducer.params.p_r_s][i].min_height==0&&_reducer.const_var.ConditionArr[_reducer.params.p_b_t][_reducer.params.p_r_s][i].min_width<=_reducer.params.p_w&&_reducer.const_var.ConditionArr[_reducer.params.p_b_t][_reducer.params.p_r_s][i].max_width>=_reducer.params.p_w){if(_reducer.const_var.ConditionArr[_reducer.params.p_b_t][_reducer.params.p_r_s][i].is_default=="Y"){_reducer.params.p_e_l=true;_reducer.const_var.hasDoublelegdisable=true;_reducer.const_var.hasDoublelegshow=true;_reducer.const_var.hasDoublelegName=_reducer.const_var.ConditionArr[_reducer.params.p_b_t][_reducer.params.p_r_s][i].name;// $('.extraLegs').show();
// $(".extraLegs input:checkbox").prop('checked',true);
// $(".extraLegs input:checkbox").prop('disabled',true);
}else{_reducer.params.p_e_l=false;_reducer.const_var.hasDoublelegdisable=false;_reducer.const_var.hasDoublelegshow=true;_reducer.const_var.hasDoublelegName=_reducer.const_var.ConditionArr[_reducer.params.p_b_t][_reducer.params.p_r_s][i].name;// $('.extraLegs').show();
// $(".extraLegs input:checkbox").prop('disabled',false);
//$(".extraLegs .c").find('span').remove();
//$(".extraLegs .c").append(" <span>(Including Base Rails)</span>");
}_reducer.const_var.legstype=_reducer.const_var.ConditionArr[_reducer.params.p_b_t][_reducer.params.p_r_s][i].legs_type=="reinforced"?"double":_reducer.const_var.ConditionArr[_reducer.params.p_b_t][_reducer.params.p_r_s][i].legs_type;}else{j=j+1;if(j==_reducer.const_var.ConditionArr[_reducer.params.p_b_t][_reducer.params.p_r_s].length){_reducer.params.p_e_l=false;_reducer.const_var.hasDoublelegdisable=false;_reducer.const_var.hasDoublelegshow=false;_reducer.const_var.hasDoublelegName='';// $(".extraLegs input:checkbox").prop('checked',false);
// $('.extraLegs').hide();
_reducer.const_var.legstype="single";}}}}else{_reducer.params.p_e_l=false;_reducer.const_var.hasDoublelegdisable=false;_reducer.const_var.hasDoublelegshow=false;_reducer.const_var.hasDoublelegName='';// $(".extraLegs input:checkbox").prop('checked',false);
// $('.extraLegs').hide();
_reducer.const_var.legstype="single";}_reducer.params.p_e_l=state.defalutProductLoad==true&&_reducer.const_var.defaultProData.building.has_double_leg==true&&_reducer.const_var.CallApionAction==false?true:_reducer.params.p_e_l;_reducer.const_var.legstype=state.defalutProductLoad==true&&_reducer.const_var.defaultProData.building.legstype!=undefined&&_reducer.const_var.CallApionAction==false?_reducer.const_var.defaultProData.building.legstype:_reducer.const_var.legstype;BuildingUpdate(true,'');};exports.CheckLegsByResponse=CheckLegsByResponse;var uUdD=function uUdD(){if(_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s]==5){var b_u_D_p_a=_reducer.const_var.b_u_D_p_a5;}else{var b_u_D_p_a=_reducer.const_var.b_u_D_p_a4;}_reducer.params.p_u_t=_reducer.params.p_u_t>_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s]?_reducer.params.p_u_t:_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s];var drop_arr={};var numberofOption=Math.floor((_reducer.params.p_d-_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s])/_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s]);for(var i=1;i<=numberofOption;i++){_reducer.params.add_storage=_reducer.params.add_storage<_reducer.params.lean_p_d?_reducer.params.add_storage:1*_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s];_reducer.const_var.LeftLeandrop_arr[i*_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s]+" Feet"]=i*_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s];drop_arr[i*_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s]+" Feet"]=i*_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s];}// for(var i=0;i<= b_u_D_p_a.length;i++)
// {
//     if(b_u_D_p_a[i] < params.p_d-5)
//     {
//         drop_arr[b_u_D_p_a[i] + " Feet"]= b_u_D_p_a[i];
//     }
// }
if(drop_arr[_reducer.params.p_u_t+" Feet"]==undefined){_reducer.params.p_u_c=false;// $(".utilityCheck input:checkbox").prop('checked',false);
// params.p_f_w = "Open";
// params.p_l_w = "Open";
// params.p_r_w = "Open";
}_reducer.const_var.b_u_D_p_a=drop_arr;cuComponent.handleComponentPositionOnDimensionChange();};exports.uUdD=uUdD;var leanuUdD=function leanuUdD(){var numberofOption=Math.floor((_reducer.params.lean_p_d-_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s])/_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s]);var numberofOptionF=Math.floor((_reducer.params.leanF_p_d-_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s])/_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s]);var numberofOptionB=Math.floor((_reducer.params.leanB_p_d-_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s])/_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s]);var numberofOptionR=Math.floor((_reducer.params.leanR_p_d-_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s])/_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s]);_reducer.const_var.LeftLeandrop_arr={};for(var i=1;i<=numberofOption;i++){_reducer.params.add_storage=_reducer.params.add_storage<_reducer.params.lean_p_d?_reducer.params.add_storage:1*_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s];_reducer.const_var.LeftLeandrop_arr[i*_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s]+" Feet"]=i*_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s];}_reducer.const_var.RightLeandrop_arr={};for(var i=1;i<=numberofOptionR;i++){_reducer.params.add_storage_right=_reducer.params.add_storage_right<_reducer.params.leanR_p_d?_reducer.params.add_storage_right:1*_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s];_reducer.const_var.RightLeandrop_arr[i*_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s]+" Feet"]=i*_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s];}_reducer.const_var.FrontLeandrop_arr={};for(var i=1;i<=numberofOptionF;i++){_reducer.params.add_storage_front=_reducer.params.add_storage_front<_reducer.params.leanF_p_d?_reducer.params.add_storage_front:1*_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s];_reducer.const_var.FrontLeandrop_arr[i*_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s]+" Feet"]=i*_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s];}_reducer.const_var.BackLeandrop_arr={};for(var i=1;i<=numberofOptionB;i++){_reducer.params.add_storage_back=_reducer.params.add_storage_back<_reducer.params.leanF_p_d?_reducer.params.add_storage_back:1*_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s];_reducer.const_var.BackLeandrop_arr[i*_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s]+" Feet"]=i*_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s];}};exports.leanuUdD=leanuUdD;var uBmLDimension=function uBmLDimension(){if(_reducer.params.add_left_lean==true){if(_reducer.params.p_h<_reducer.const_var.b_m_i_hlean+parseInt(_reducer.params.b_l_t_r_p)){var heig=_reducer.const_var.b_m_i_hlean+parseInt(_reducer.params.b_l_t_r_p);//b_m_i_h = heig;
_reducer.params.p_h=heig<=_reducer.const_var.roofObject[_reducer.params.p_b_t][_reducer.params.p_r_s].max_height?heig:_reducer.const_var.roofObject[_reducer.params.p_b_t][_reducer.params.p_r_s].max_height;}else{_reducer.params.p_h=_reducer.params.p_h;}}else if(_reducer.params.add_right_lean==true){if(_reducer.params.p_h<_reducer.const_var.b_m_i_hlean+parseInt(_reducer.params.b_l_t_r_pR)){var heig=_reducer.const_var.b_m_i_hlean+parseInt(_reducer.params.b_l_t_r_pR);//b_m_i_h = heig;
_reducer.params.p_h=heig<=_reducer.const_var.roofObject[_reducer.params.p_b_t][_reducer.params.p_r_s].max_height?heig:_reducer.const_var.roofObject[_reducer.params.p_b_t][_reducer.params.p_r_s].max_height;}else{_reducer.params.p_h=_reducer.params.p_h;}}else{_reducer.params.p_h=_reducer.params.p_h<_reducer.const_var.b_m_i_h?_reducer.const_var.b_m_i_h:_reducer.params.p_h;}cP(_reducer.const_var.a_p_d_a);};exports.uBmLDimension=uBmLDimension;var uUdDCB=function uUdDCB(){if(_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s]==5){var b_u_D_p_a_c_b=_reducer.const_var.b_u_D_p_a6;}else{var b_u_D_p_a_c_b=_reducer.const_var.b_u_D_p_a6;}//console.log(params.p_u_t,const_var.DistanceArr[params.p_b_t][params.p_r_s],"const_var.DistanceArr[params.p_b_t][params.p_r_s]")
_reducer.params.cB_addStorage_right=_reducer.params.cB_addStorage_right>_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s]?_reducer.params.cB_addStorage_right:_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s];var drop_arr={};var numberofOption=Math.floor((_reducer.params.p_d-_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s])/_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s]);// for(var i=1;i<= numberofOption;i++)
// {
//     params.add_storage = (params.add_storage < params.lean_p_d)?params.add_storage:1 * const_var.DistanceArr[params.p_b_t][params.p_r_s];
//     const_var.LeftLeandrop_arr[(i * const_var.DistanceArr[params.p_b_t][params.p_r_s]) + " Feet"]= i * const_var.DistanceArr[params.p_b_t][params.p_r_s];
//     drop_arr[(i * const_var.DistanceArr[params.p_b_t][params.p_r_s]) + " Feet"]= i * const_var.DistanceArr[params.p_b_t][params.p_r_s];
// }
for(var i=0;i<=b_u_D_p_a_c_b.length;i++){if(b_u_D_p_a_c_b[i]<_reducer.params.p_w){drop_arr[b_u_D_p_a_c_b[i]+" Feet"]=b_u_D_p_a_c_b[i];}}if(drop_arr[_reducer.params.cB_addStorage_right+" Feet"]==undefined){_reducer.params.cB_addStorage_check_right=false;// $(".utilityCheck input:checkbox").prop('checked',false);
// params.p_f_w = "Open";
// params.p_l_w = "Open";
// params.p_r_w = "Open";
}_reducer.const_var.b_u_D_p_a_c_b=drop_arr;};exports.uUdDCB=uUdDCB;var uUdDp=function uUdDp(){if(_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s]==5){var r_f_p_w1=_reducer.const_var.r_f_p_w_arr;}else{var r_f_p_w1=_reducer.const_var.r_f_p_w_arr;}//console.log(params.p_u_t,const_var.DistanceArr[params.p_b_t][params.p_r_s],"const_var.DistanceArr[params.p_b_t][params.p_r_s]")
_reducer.params.r_f_p_w=_reducer.params.r_f_p_w>_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s]?_reducer.params.r_f_p_w:_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s];var drop_arr={};var numberofOption=Math.floor((_reducer.params.p_d-_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s])/_reducer.const_var.DistanceArr[_reducer.params.p_b_t][_reducer.params.p_r_s]);// for(var i=1;i<= numberofOption;i++)
// {
//     params.add_storage = (params.add_storage < params.lean_p_d)?params.add_storage:1 * const_var.DistanceArr[params.p_b_t][params.p_r_s];
//     const_var.LeftLeandrop_arr[(i * const_var.DistanceArr[params.p_b_t][params.p_r_s]) + " Feet"]= i * const_var.DistanceArr[params.p_b_t][params.p_r_s];
//     drop_arr[(i * const_var.DistanceArr[params.p_b_t][params.p_r_s]) + " Feet"]= i * const_var.DistanceArr[params.p_b_t][params.p_r_s];
// }
for(var i=0;i<=r_f_p_w1.length;i++){if(r_f_p_w1[i]<_reducer.params.p_w){drop_arr[r_f_p_w1[i]+" Feet"]=r_f_p_w1[i];}}if(drop_arr[_reducer.params.r_f_p_w+" Feet"]==undefined){// params.cB_addStorage_check_right = false;
// $(".utilityCheck input:checkbox").prop('checked',false);
// params.p_f_w = "Open";
// params.p_l_w = "Open";
// params.p_r_w = "Open";
}_reducer.const_var.r_f_p_w1=drop_arr;};exports.uUdDp=uUdDp;var updateEntryData=function updateEntryData(){//console.log("const_var.WallClassEdit[const_var.entry_points[i].entry_location]")
if(_reducer.const_var.entry_points.length>0){for(var i=0;i<=_reducer.const_var.entry_points.length-1;i++){//console.log(const_var.WallClassEdit[const_var.entry_points[i].entry_location],"const_var.WallClassEdit[const_var.entry_points[i].entry_location]")
if(_reducer.const_var.entry_points[i].extra_component_key=="front"){_reducer.const_var.entry_points[i].entry_position.z=_reducer.params.p_d/2;}if(_reducer.const_var.entry_points[i].extra_component_key=="back"){_reducer.const_var.entry_points[i].entry_position.z=_reducer.params.p_d/-2;}// if(const_var.entry_points[i].extra_component_key=="FrontL")
// {
//     const_var.entry_points[i].entry_position.z = params.lean_p_d/2;
// }if(const_var.entry_points[i].extra_component_key=="BackL")
// {
//     const_var.entry_points[i].entry_position.z = params.lean_p_d/-2;
// }
}}//console.log(const_var.entry_points,"const_var.entry_points")
};exports.updateEntryData=updateEntryData;var dawplace=function dawplace(){for(var i=0;i<_reducer.const_var.b_d_g_b_O_c.length;i++){if("b_B_g_B"!=_reducer.const_var.b_d_g_b_O_c[i].name&&"b_h_t1Bx"!=_reducer.const_var.b_d_g_b_O_c[i].name&&"b_h_t2Bx"!=_reducer.const_var.b_d_g_b_O_c[i].name&&"b_h_t5Bx"!=_reducer.const_var.b_d_g_b_O_c[i].name&&"b_h_t6Bx"!=_reducer.const_var.b_d_g_b_O_c[i].name&&"b_h_t3Bx"!=_reducer.const_var.b_d_g_b_O_c[i].name&&"b_h_t4Bx"!=_reducer.const_var.b_d_g_b_O_c[i].name&&"b_h_t7Bx"!=_reducer.const_var.b_d_g_b_O_c[i].name&&"b_h_t8Bx"!=_reducer.const_var.b_d_g_b_O_c[i].name){if(_reducer.const_var.b_d_g_b_O_c[i].pos=="front"&&_reducer.const_var.b_d_g_b_O_c[i].BarnPos=="FrontS"){if(_reducer.params.p_u_c==true){var disValTexture1=_reducer.params.fourth_center_cost==true?0.5:0.8;var dpos;if(_reducer.params.p_u_t>parseFloat(_reducer.params.p_d/2)){dpos=parseFloat(parseInt(_reducer.params.p_u_t)-parseFloat(_reducer.const_var.b_M_g_V))-parseFloat(_reducer.params.p_d/2)+disValTexture1;}else{dpos=-(parseFloat(_reducer.params.p_d/2)-parseFloat(parseInt(_reducer.params.p_u_t)+(0.8-parseFloat(_reducer.const_var.b_M_g_V))));}_reducer.const_var.b_d_g_b_O_c[i].position.z=dpos;}}}}};exports.dawplace=dawplace;var setUpWatermarkLogo=function setUpWatermarkLogo(){var loader,waterMarkLogo,waterMarkType,watermarkHeight;return regeneratorRuntime.async(function setUpWatermarkLogo$(_context){while(1){switch(_context.prev=_context.next){case 0:if("undefined"!=typeof _reducer.const_var.scene.getObjectByName("mesh11"))_reducer.const_var.scene.remove(_reducer.const_var.scene.getObjectByName("mesh11"));if("undefined"!=typeof _reducer.const_var.scene.getObjectByName("mesh111"))_reducer.const_var.scene.remove(_reducer.const_var.scene.getObjectByName("mesh111"));if(_reducer.const_var.scene.getObjectByName("mesh11")!=undefined){_reducer.const_var.scene.remove(_reducer.const_var.scene.getObjectByName("mesh11"));}if(_reducer.const_var.scene.getObjectByName("mesh111")!=undefined){_reducer.const_var.scene.remove(_reducer.const_var.scene.getObjectByName("mesh111"));}if(!(_reducer.const_var.crmSetting.main_domain_url!==undefined&&_reducer.const_var.crmSetting.main_domain_url!==""&&_reducer.const_var.crmSetting.main_domain_url!==null&&_reducer.const_var.crmSetting.main_domain_url)){_context.next=22;break;}loader=new THREE.TextureLoader();// var texture = loader.load(const_var.crmSetting.LogIm);
// var textureUrl = waterMark;
waterMarkLogo='';waterMarkType='';watermarkHeight=_reducer.params.p_h;if(_reducer.params.singleSlope==true){watermarkHeight=_reducer.params.p_h-_reducer.params.p_w*Math.abs(_reducer.params.p_r_p)/12;}_context.prev=10;waterMarkLogo=_reducer.const_var.crmSetting.main_domain_url!==undefined&&_reducer.const_var.crmSetting.main_domain_url.split('.')[0];waterMarkLogo=waterMarkLogo!=="cibirix"?waterMarkLogo:"";//Put the image name in blank ("") to see on local. Watermark will show live
waterMarkType=_reducer.params.p_w_c_name=="White"||_reducer.params.p_w_c_name=="white"||_reducer.params.p_w_c=="0xffffff"?"dark":"light";// const response = await axios.get(require(`../assets/images/watermark/${waterMarkLogo}-${waterMarkType}.png`));
// if(response.status === 200){
//     const textureUrl =  require(`../assets/images/watermark/${waterMarkLogo}-${waterMarkType}.png`);
//     var texture = loader.load(textureUrl);
//     texture.wrapS = THREE.RepeatWrapping;
//     texture.wrapT = THREE.RepeatWrapping;
//     var material = new THREE.MeshLambertMaterial({            
//         map: texture,
//         shininess: 1,
//         transparent: true,                        
//         opacity:1.0      
//     });
//     var geometry = new THREE.PlaneGeometry(7,4);
//     var mesh11 = new THREE.Mesh(geometry, material);
//     mesh11.name="mesh11";
//     mesh11.visible = (params.p_f_w=="Close")?true:false;
//     mesh11.renderOrder = new Date().getTime() + (3600 * 24 * 1000);
//     mesh11.position.set(0,((watermarkHeight-1)),(params.p_d / 2)+0.02);                
//     if(params.p_f_w=="Close"){
//         const_var.scene.add(mesh11);
//     }                
//     var mesh111 = new THREE.Mesh(geometry, material);
//     mesh111.name="mesh111";
//     mesh111.rotation.x = -9.43;
//     mesh111.rotation.z = 3.14;
//     mesh111.visible = (params.p_b_w=="Close")?true:false;
//     mesh111.renderOrder = new Date().getTime() + (3600 * 24 * 1000);
//     mesh111.position.set(0,((watermarkHeight - 1)),-(params.p_d / 2)-0.02);
//     if(params.p_b_w=="Close"){
//         const_var.scene.add(mesh111);
//     } 
// } else{
//     console.log("response:", response);
// }
_context.next=22;break;case 16:_context.prev=16;_context.t0=_context["catch"](10);if(!_context.t0.Error){_context.next=21;break;}console.error("".concat(waterMarkLogo,"-").concat(waterMarkType,".png  image not found"));return _context.abrupt("return");case 21:;case 22:case"end":return _context.stop();}}},null,null,[[10,16]]);};exports.setUpWatermarkLogo=setUpWatermarkLogo;var CkBngDr=function CkBngDr(){if(_reducer.params.p_b_c_b_l_f=="Close"&&_reducer.params.p_b_c_b_l=="Close"&&_reducer.params.p_b_c_b_r_f=="Close"&&_reducer.params.p_b_c_b_r=="Close"&&(_reducer.params.p_f_w=="Close"&&_reducer.params.p_b_w=="Close"||_reducer.params.p_u_c==true)){if(_reducer.const_var.d_w_a_r.length>0){for(var i=0;i<=_reducer.const_var.d_w_a_r.length-1;i++){if(_reducer.const_var.d_w_a_r[i].type=="garage"||_reducer.const_var.d_w_a_r[i].type=="door"){return i;}}return null;}return null;}else if(_reducer.params.p_f_w=="Close"&&_reducer.params.p_b_w=="Close"&&_reducer.params.p_l_w=="Close"&&_reducer.params.p_r_w=="Close"||_reducer.params.p_u_c==true){if(_reducer.const_var.d_w_a_r.length>0){for(var i=0;i<=_reducer.const_var.d_w_a_r.length-1;i++){if(_reducer.const_var.d_w_a_r[i].type=="garage"||_reducer.const_var.d_w_a_r[i].type=="door"){return i;}}return null;}return null;}return 1;};exports.CkBngDr=CkBngDr;var _default=pricingReducer;exports["default"]=_default;